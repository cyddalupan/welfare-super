import{$ as ce,A as Se,Aa as V,B as Ee,C as A,D as x,E as m,Ea as Re,Fa as Be,Ga as qe,Ha as je,I as Ae,Ia as Ue,J as Me,Ja as Ge,K as r,Ka as Ke,L as w,La as He,M,Ma as Ye,N as me,Na as Je,O as Fe,Oa as Qe,P as g,Pa as ze,Q as _,Qa as Ze,R as h,Ra as Xe,S as Ie,Sa as $e,T as Le,Ta as et,U,Ua as tt,V as Te,Va as it,W as ke,X as pe,Y as Pe,Z as Ve,Za as q,_ as F,a as z,aa as I,b as Z,ba as S,ca as Ne,da as We,ea as E,f as C,ia as G,j as R,ja as De,ka as D,l as u,la as B,m as p,ma as Oe,n as c,oa as L,p as be,pa as T,q as ve,qa as k,r as d,ra as K,sa as H,t as b,ta as P,u as y,ua as Y,v as f,va as ue,w as n,wa as $,x as i,xa as ee,y as v,ya as te,z as we,za as J}from"./chunk-MB6H7J3U.js";var ie=class l{db=u(q);TOKEN_KEY="admin_auth_token";async login(t,e){try{let o=await C(this.db.query(Re,[t]));if(o&&o.data&&o.data.length>0){let a=o.data[0];if(a.password===e){let s=JSON.stringify({userId:a.id,email:a.email});return localStorage.setItem(this.TOKEN_KEY,s),!0}}return!1}catch(o){return console.error("AuthService: Error during login:",o),!1}}logout(){localStorage.removeItem(this.TOKEN_KEY)}isAuthenticated(){return!!localStorage.getItem(this.TOKEN_KEY)}getCurrentUser(){let t=localStorage.getItem(this.TOKEN_KEY);if(t)try{return JSON.parse(t)}catch{return null}return null}static \u0275fac=function(e){return new(e||l)};static \u0275prov=R({token:l,factory:l.\u0275fac,providedIn:"root"})};function rt(l,t){if(l&1&&(n(0,"div",12),r(1),i()),l&2){let e=m();d(),M(" ",e.errorMessage," ")}}var fe=class l{email="";password="";errorMessage="";authService=u(ie);router=u(D);cdr=u(F);async login(){this.errorMessage="";try{await this.authService.login(this.email,this.password)?this.router.navigate(["/admin/dashboard"]):(this.errorMessage="Invalid email or password.",this.cdr.detectChanges())}catch(t){this.errorMessage="An unexpected error occurred. Please try again.",console.error("Login error:",t),this.cdr.detectChanges()}}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=b({type:l,selectors:[["app-admin-login"]],decls:16,vars:3,consts:[[1,"flex","items-center","justify-center","h-screen","w-screen","bg-transparent"],[1,"w-full","max-w-md","glass-card","p-8","text-white","rounded-xl"],[1,"text-3xl","font-bold","text-center","mb-8"],[3,"ngSubmit"],[1,"mb-4"],["for","email",1,"block","text-sm","font-medium","mb-2"],["type","email","id","email","name","email","placeholder","admin@example.com","required","",1,"w-full","px-4","py-2","bg-white/20","rounded-md","border","border-transparent","focus:outline-none","focus:ring-2","focus:ring-blue-500","text-gray-800",3,"ngModelChange","ngModel"],[1,"mb-6"],["for","password",1,"block","text-sm","font-medium","mb-2"],["type","password","id","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",1,"w-full","px-4","py-2","bg-white/20","rounded-md","border","border-transparent","focus:outline-none","focus:ring-2","focus:ring-blue-500","text-gray-800",3,"ngModelChange","ngModel"],["type","submit",1,"w-full","bg-blue-600","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded-md","transition","duration-300"],["class","mt-4 text-red-200 text-center bg-red-500/40 p-2 rounded-md",4,"ngIf"],[1,"mt-4","text-red-200","text-center","bg-red-500/40","p-2","rounded-md"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"h2",2),r(3,"Admin Login"),i(),n(4,"form",3),x("ngSubmit",function(){return o.login()}),n(5,"div",4)(6,"label",5),r(7,"Email"),i(),n(8,"input",6),h("ngModelChange",function(s){return _(o.email,s)||(o.email=s),s}),i()(),n(9,"div",7)(10,"label",8),r(11,"Password"),i(),n(12,"input",9),h("ngModelChange",function(s){return _(o.password,s)||(o.password=s),s}),i()(),n(13,"button",10),r(14," Login "),i(),y(15,rt,2,1,"div",11),i()()()),e&2&&(d(8),g("ngModel",o.email),d(4),g("ngModel",o.password),d(3),f("ngIf",o.errorMessage))},dependencies:[E,S,V,Y,T,k,K,J,P,H],encapsulation:2})};var ge=class l{databaseService=u(q);constructor(){}async addHistoryEntry(t){let e=[t.applicant_id,t.remarks,t.attachment,t.status];await C(this.databaseService.query(it,e))}static \u0275fac=function(e){return new(e||l)};static \u0275prov=R({token:l,factory:l.\u0275fac,providedIn:"root"})};var O=class l{db=u(q);applicantHistoryService=u(ge);async getApplicants(t){let e=Be,o=[];t&&(e="SELECT id, first_name, last_name, passport_number, country, main_status FROM employee_employee WHERE main_status = ? ORDER BY last_name, first_name",o.push(t));let a=await C(this.db.query(e,o));return a&&a.data?a.data:[]}async getApplicantById(t){let e=await C(this.db.query(qe,[t]));return e&&e.data&&e.data.length>0?e.data[0]:null}async getStatuses(){let t=await C(this.db.query(ze));return t&&t.data&&Array.isArray(t.data)?t.data.map(e=>e.status_name):[]}async createApplicant(t){let e=this.mapApplicantToParams(t),o=await C(this.db.query(je,e));if(o&&o.insertId){let a=o.insertId;await this.applicantHistoryService.addHistoryEntry({applicant_id:a,remarks:`Applicant created with status: ${t.main_status}`,attachment:"",status:t.main_status||"Created"})}return o}async updateApplicant(t){let e=await this.getApplicantById(t.id),o=this.mapApplicantToParams(t),a=await C(this.db.query(Ue,[...o,t.id]));if(t.id){let s=e&&e.main_status||"",W=t.main_status||"";e&&s!==W?await this.applicantHistoryService.addHistoryEntry({applicant_id:t.id,remarks:`Applicant status changed from '${e.main_status}' to '${t.main_status}'`,attachment:"",status:t.main_status||"Unknown"}):await this.applicantHistoryService.addHistoryEntry({applicant_id:t.id,remarks:"Applicant updated.",attachment:"",status:"Updated"})}return a}async deleteApplicant(t){return C(this.db.query(Ge,[t]))}mapApplicantToParams(t){return[t.first_name||"",t.middle_name||"",t.last_name||"",t.passport_number||"",t.date_of_birth||null,t.address||"",t.phone_number||"",t.email||"",t.is_support?1:0,t.token||"",t.user_id||null,t.date_deployment||null,t.fra_id||null,t.main_status||"",t.applicant_type||"",t.created_date_of_report||null,t.country||"",t.facebook||"",t.whatsapp||"",t.consistency_percentage||0,t.agency_id||1,t.emergency_contact_name||"",t.emergency_contact_phone||""]}static \u0275fac=function(e){return new(e||l)};static \u0275prov=R({token:l,factory:l.\u0275fac,providedIn:"root"})};var at=()=>({exact:!0}),ot=l=>["/admin/applicants/status",l];function lt(l,t){if(l&1&&(n(0,"li",18)(1,"a",21),r(2),pe(3,"titlecase"),i()()),l&2){let e=t.$implicit;d(),f("routerLink",U(4,ot,e)),d(),M(" ",Pe(3,2,e)," ")}}function st(l,t){if(l&1&&(n(0,"div",17)(1,"ul")(2,"li",18)(3,"a",19),r(4," All Applicants "),i()(),y(5,lt,4,6,"li",20),i()()),l&2){let e=m();d(3),f("routerLinkActiveOptions",Le(2,at)),d(2),f("ngForOf",e.applicantStatuses)}}var _e=class l{authService=u(ie);router=u(D);applicantService=u(O);isApplicantMenuOpen=!1;applicantStatuses=[];ngOnInit(){this.applicantService.getStatuses().then(t=>{this.applicantStatuses=t})}toggleApplicantMenu(){this.isApplicantMenuOpen=!this.isApplicantMenuOpen}logout(){this.authService.logout(),this.router.navigate(["/admin/login"])}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=b({type:l,selectors:[["app-sidebar"]],decls:28,vars:3,consts:[[1,"w-64","glass-card","p-6","flex","flex-col","text-white","rounded-xl"],[1,"text-2xl","font-bold","mb-10","text-center"],[1,"mb-4"],["routerLink","/admin/dashboard","routerLinkActive","bg-white/20",1,"flex","items-center","p-3","rounded-lg","hover:bg-white/10","transition-colors","duration-200"],[1,"fas","fa-tachometer-alt","w-6","h-6","mr-3"],[1,"w-full","flex","items-center","justify-between","p-3","rounded-lg","hover:bg-white/10","transition-colors","duration-200",3,"click"],[1,"flex","items-center"],[1,"fas","fa-users","w-6","h-6","mr-3"],[1,"fas","fa-chevron-down","w-4","h-4","transition-transform","duration-200"],["class","mt-2 ml-4 pl-3 border-l-2 border-white/20",4,"ngIf"],["routerLink","/admin/cases","routerLinkActive","bg-white/20",1,"flex","items-center","p-3","rounded-lg","hover:bg-white/10","transition-colors","duration-200"],[1,"fas","fa-folder-open","w-6","h-6","mr-3"],["routerLink","/admin/fras","routerLinkActive","bg-white/20",1,"flex","items-center","p-3","rounded-lg","hover:bg-white/10","transition-colors","duration-200"],[1,"fas","fa-building","w-6","h-6","mr-3"],[1,"mt-auto"],[1,"w-full","flex","items-center","justify-center","p-3","rounded-lg","bg-red-600/80","hover:bg-red-700/60","transition-colors","duration-200",3,"click"],[1,"fas","fa-sign-out-alt","w-6","h-6","mr-3"],[1,"mt-2","ml-4","pl-3","border-l-2","border-white/20"],[1,"mb-2"],["routerLink","/admin/applicants","routerLinkActive","bg-white/20",1,"block","p-2","rounded-lg","hover:bg-white/10","transition-colors","duration-200",3,"routerLinkActiveOptions"],["class","mb-2",4,"ngFor","ngForOf"],["routerLinkActive","bg-white/20",1,"block","p-2","rounded-lg","hover:bg-white/10","transition-colors","duration-200",3,"routerLink"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"h1",1),r(2,"Admin Panel"),i(),n(3,"nav")(4,"ul")(5,"li",2)(6,"a",3),v(7,"i",4),r(8," Dashboard "),i()(),n(9,"li",2)(10,"button",5),x("click",function(){return o.toggleApplicantMenu()}),n(11,"span",6),v(12,"i",7),r(13," Applicants "),i(),v(14,"i",8),i(),y(15,st,6,3,"div",9),i(),n(16,"li",2)(17,"a",10),v(18,"i",11),r(19," Cases "),i()(),n(20,"li",2)(21,"a",12),v(22,"i",13),r(23," FRAs "),i()()()(),n(24,"div",14)(25,"button",15),x("click",function(){return o.logout()}),v(26,"i",16),r(27," Logout "),i()()()),e&2&&(d(14),Me("rotate-180",o.isApplicantMenuOpen),d(),f("ngIf",o.isApplicantMenuOpen))},dependencies:[L,B,Oe,E,I,S,Ne],encapsulation:2})};var he=class l{static \u0275fac=function(e){return new(e||l)};static \u0275cmp=b({type:l,selectors:[["app-admin-layout"]],decls:5,vars:0,consts:[[1,"flex","h-screen","p-8","bg-transparent"],[1,"flex-1","overflow-y-auto"],[1,"w-full","h-full","bg-transparent","px-8"]],template:function(e,o){e&1&&(n(0,"div",0),v(1,"app-sidebar"),n(2,"main",1)(3,"div",2),v(4,"router-outlet"),i()()())},dependencies:[L,De,_e],encapsulation:2})};var xe=class l{static \u0275fac=function(e){return new(e||l)};static \u0275cmp=b({type:l,selectors:[["app-admin-dashboard"]],decls:2,vars:0,consts:[[1,"glass-card","p-0","text-white","rounded-xl","h-full"],["src",ve`https://welfare.reviewcenterphil.com/api/dashboard.php`,1,"w-full","h-full","border-none","rounded-xl"]],template:function(e,o){e&1&&(we(0,"div",0),Ee(1,"iframe",1),Se())},encapsulation:2})};var nt=(l,t)=>{let e=u(D);return localStorage.getItem("admin_auth_token")?!0:(e.navigate(["/admin/login"]),!1)};var dt=(l,t,e)=>({"bg-green-600":l,"bg-yellow-600":t,"bg-red-600":e}),mt=l=>["/admin/applicants/edit",l];function pt(l,t){l&1&&(n(0,"div",8)(1,"p"),r(2,"Loading applicants..."),i(),v(3,"i",9),i())}function ct(l,t){if(l&1){let e=A();n(0,"tr",17)(1,"td",18),r(2),i(),n(3,"td",18),r(4),i(),n(5,"td",18),r(6),i(),n(7,"td",18)(8,"span",19),r(9),i()(),n(10,"td",20)(11,"a",21),r(12,"History"),i(),n(13,"a",22),r(14,"Edit"),i(),n(15,"button",23),x("click",function(){let a=p(e).$implicit,s=m(2);return c(s.deleteApplicant(a.id))}),r(16,"Delete"),i()()()}if(l&2){let e=t.$implicit;d(2),me("",e.last_name,", ",e.first_name),d(2),w(e.passport_number),d(2),w(e.country),d(2),f("ngClass",ke(9,dt,e.main_status==="active",e.main_status==="with_complain",e.main_status==="inactive")),d(),M(" ",e.main_status," "),d(2),f("href",Ie("https://welfare.reviewcenterphil.com/api/history.php?app_id=",e.id),be),d(2),f("routerLink",U(13,mt,e.id))}}function ut(l,t){l&1&&(n(0,"tr")(1,"td",24),r(2,"No applicants found."),i()())}function ft(l,t){if(l&1){let e=A();n(0,"div",10)(1,"table",11)(2,"thead")(3,"tr",12)(4,"th",13),x("click",function(){p(e);let a=m();return c(a.sort("last_name"))}),r(5," Name "),i(),n(6,"th",13),x("click",function(){p(e);let a=m();return c(a.sort("passport_number"))}),r(7," Passport "),i(),n(8,"th",13),x("click",function(){p(e);let a=m();return c(a.sort("country"))}),r(9," Country "),i(),n(10,"th",13),x("click",function(){p(e);let a=m();return c(a.sort("main_status"))}),r(11," Status "),i(),n(12,"th",14),r(13," Actions "),i()()(),n(14,"tbody"),y(15,ct,17,15,"tr",15)(16,ut,3,0,"tr",16),i()()()}if(l&2){let e=m();d(15),f("ngForOf",e.filteredApplicants),d(),f("ngIf",!e.filteredApplicants||e.filteredApplicants.length===0)}}var oe=class l{applicantService=u(O);cdr=u(F);route=u(G);allApplicants=[];filteredApplicants=[];searchTerm="";isLoading=!1;currentStatus=null;sortDirection={};ngOnInit(){this.route.paramMap.subscribe(t=>{this.currentStatus=t.get("status"),this.loadApplicants(this.currentStatus??void 0)})}async loadApplicants(t){this.isLoading=!0,this.cdr.detectChanges();try{this.allApplicants=await this.applicantService.getApplicants(t),this.filterApplicants(),this.cdr.detectChanges()}catch(e){console.error("Error loading applicants:",e)}finally{this.isLoading=!1,this.cdr.detectChanges()}}filterApplicants(){let t=this.searchTerm.toLowerCase();this.filteredApplicants=this.allApplicants.filter(e=>(e.first_name?.toLowerCase()??"").includes(t)||(e.last_name?.toLowerCase()??"").includes(t)||(e.passport_number?.toLowerCase()??"").includes(t)||(e.country?.toLowerCase()??"").includes(t))}sort(t){let e=this.sortDirection[t]==="asc"?"desc":"asc";this.sortDirection={[t]:e},this.filteredApplicants.sort((o,a)=>{let s=o[t]??"",W=a[t]??"";return s<W?e==="asc"?-1:1:s>W?e==="asc"?1:-1:0})}async deleteApplicant(t){if(confirm("Are you sure you want to delete this applicant?"))try{await this.applicantService.deleteApplicant(t),this.loadApplicants()}catch(e){console.error("Error deleting applicant:",e),alert("Failed to delete applicant.")}}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=b({type:l,selectors:[["app-employee-list"]],decls:10,vars:3,consts:[[1,"glass-card","p-8","text-white","rounded-xl"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-3xl","font-bold"],["routerLink","/admin/applicants/new",1,"bg-blue-600","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded-md","transition","duration-300"],[1,"mb-4"],["type","text","placeholder","Search applicants...",1,"w-full","px-4","py-2","bg-white/20","rounded-md","border","border-transparent","focus:outline-none","focus:ring-2","focus:ring-blue-500","text-gray-800",3,"ngModelChange","ngModel"],["class","text-center py-8",4,"ngIf"],["class","overflow-x-auto bg-black/30 backdrop-blur-xl rounded-lg shadow-lg",4,"ngIf"],[1,"text-center","py-8"],[1,"fas","fa-spinner","fa-spin","text-4xl","mt-4"],[1,"overflow-x-auto","bg-black/30","backdrop-blur-xl","rounded-lg","shadow-lg"],[1,"min-w-full"],[1,"border-b","border-white/20"],[1,"px-6","py-3","text-left","text-sm","font-medium","uppercase","tracking-wider","cursor-pointer",3,"click"],[1,"px-6","py-3","text-right","text-sm","font-medium","uppercase","tracking-wider"],["class","border-b border-white/10 hover:bg-white/5",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"border-b","border-white/10","hover:bg-white/5"],[1,"px-6","py-4","whitespace-nowrap"],[1,"px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full",3,"ngClass"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],["target","_blank",1,"text-blue-400","hover:text-blue-300","mr-4",3,"href"],[1,"text-indigo-400","hover:text-indigo-300","mr-4",3,"routerLink"],[1,"text-red-400","hover:text-red-300",3,"click"],["colspan","5",1,"text-center","py-8"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"Applicants"),i(),n(4,"a",3),r(5," New Applicant "),i()(),n(6,"div",4)(7,"input",5),h("ngModelChange",function(s){return _(o.searchTerm,s)||(o.searchTerm=s),s}),x("ngModelChange",function(){return o.filterApplicants()}),i()(),y(8,pt,4,0,"div",6)(9,ft,17,2,"div",7),i()),e&2&&(d(7),g("ngModel",o.searchTerm),d(),f("ngIf",o.isLoading),d(),f("ngIf",!o.isLoading))},dependencies:[E,ce,I,S,V,T,k,P,L,B],encapsulation:2})};var Q=class l{db=u(q);async getFras(){let t=await C(this.db.query(Ke));return t&&t.data?t.data:[]}async getFraById(t){let e=await C(this.db.query(He,[t]));return e&&e.data&&e.data.length>0?e.data[0]:null}async createFra(t){let e=this.mapFraToParams(t);return C(this.db.query(Ye,e))}async updateFra(t){let e=this.mapFraToParams(t);return C(this.db.query(Je,[...e,t.id]))}async deleteFra(t){return C(this.db.query(Qe,[t]))}mapFraToParams(t){return[t.name||"",t.contact||"",t.address||"",t.country||"",t.agency_id||null]}static \u0275fac=function(e){return new(e||l)};static \u0275prov=R({token:l,factory:l.\u0275fac,providedIn:"root"})};function gt(l,t){l&1&&(n(0,"div",5)(1,"p"),r(2,"Loading applicant data..."),i(),v(3,"i",6),i())}function _t(l,t){if(l&1&&(n(0,"option",79),r(1),i()),l&2){let e=t.$implicit;f("value",e),d(),w(e)}}function ht(l,t){if(l&1&&(n(0,"option",79),r(1),i()),l&2){let e=t.$implicit;f("value",e.id),d(),w(e.name)}}function xt(l,t){if(l&1){let e=A();n(0,"form",7,0),x("ngSubmit",function(){p(e);let a=m();return c(a.saveApplicant())}),n(2,"div",8)(3,"h2",9),r(4,"Personal Information"),i(),n(5,"div",10)(6,"div",11)(7,"label",12),r(8,"First Name"),i(),n(9,"input",13),h("ngModelChange",function(a){p(e);let s=m();return _(s.applicant.first_name,a)||(s.applicant.first_name=a),c(a)}),i()(),n(10,"div",11)(11,"label",14),r(12,"Middle Name"),i(),n(13,"input",15),h("ngModelChange",function(a){p(e);let s=m();return _(s.applicant.middle_name,a)||(s.applicant.middle_name=a),c(a)}),i()(),n(14,"div",11)(15,"label",16),r(16,"Last Name"),i(),n(17,"input",17),h("ngModelChange",function(a){p(e);let s=m();return _(s.applicant.last_name,a)||(s.applicant.last_name=a),c(a)}),i()(),n(18,"div",11)(19,"label",18),r(20,"Passport Number"),i(),n(21,"input",19),h("ngModelChange",function(a){p(e);let s=m();return _(s.applicant.passport_number,a)||(s.applicant.passport_number=a),c(a)}),i()(),n(22,"div",11)(23,"label",20),r(24,"Date of Birth"),i(),n(25,"input",21),h("ngModelChange",function(a){p(e);let s=m();return _(s.applicant.date_of_birth,a)||(s.applicant.date_of_birth=a),c(a)}),i()(),n(26,"div",11)(27,"label",22),r(28,"Country"),i(),n(29,"select",23),h("ngModelChange",function(a){p(e);let s=m();return _(s.applicant.country,a)||(s.applicant.country=a),c(a)}),n(30,"option",24),r(31,"Select Country"),i(),n(32,"option",25),r(33,"United States"),i(),n(34,"option",26),r(35,"Canada"),i(),n(36,"option",27),r(37,"Mexico"),i(),n(38,"option",28),r(39,"Brazil"),i(),n(40,"option",29),r(41,"United Kingdom"),i(),n(42,"option",30),r(43,"France"),i(),n(44,"option",31),r(45,"Germany"),i(),n(46,"option",32),r(47,"Italy"),i(),n(48,"option",33),r(49,"Spain"),i(),n(50,"option",34),r(51,"China"),i(),n(52,"option",35),r(53,"India"),i(),n(54,"option",36),r(55,"Japan"),i(),n(56,"option",37),r(57,"South Korea"),i(),n(58,"option",38),r(59,"Australia"),i(),n(60,"option",39),r(61,"New Zealand"),i(),n(62,"option",40),r(63,"Philippines"),i(),n(64,"option",41),r(65,"Saudi Arabia"),i(),n(66,"option",42),r(67,"United Arab Emirates"),i(),n(68,"option",43),r(69,"Qatar"),i(),n(70,"option",44),r(71,"Kuwait"),i(),n(72,"option",45),r(73,"Bahrain"),i(),n(74,"option",46),r(75,"Oman"),i(),n(76,"option",47),r(77,"Egypt"),i(),n(78,"option",48),r(79,"Jordan"),i(),n(80,"option",49),r(81,"Lebanon"),i(),n(82,"option",50),r(83,"Iraq"),i(),n(84,"option",51),r(85,"Iran"),i(),n(86,"option",52),r(87,"Turkey"),i(),n(88,"option",53),r(89,"Israel"),i()()()()(),n(90,"div",8)(91,"h2",9),r(92,"Contact Details"),i(),n(93,"div",54)(94,"div",11)(95,"label",55),r(96,"Email"),i(),n(97,"input",56),h("ngModelChange",function(a){p(e);let s=m();return _(s.applicant.email,a)||(s.applicant.email=a),c(a)}),i()(),n(98,"div",11)(99,"label",57),r(100,"Phone Number"),i(),n(101,"input",58),h("ngModelChange",function(a){p(e);let s=m();return _(s.applicant.phone_number,a)||(s.applicant.phone_number=a),c(a)}),i()(),n(102,"div",11)(103,"label",59),r(104,"WhatsApp"),i(),n(105,"input",60),h("ngModelChange",function(a){p(e);let s=m();return _(s.applicant.whatsapp,a)||(s.applicant.whatsapp=a),c(a)}),i()(),n(106,"div",11)(107,"label",61),r(108,"Facebook URL"),i(),n(109,"input",62),h("ngModelChange",function(a){p(e);let s=m();return _(s.applicant.facebook,a)||(s.applicant.facebook=a),c(a)}),i()(),n(110,"div",63)(111,"label",64),r(112,"Address"),i(),n(113,"textarea",65),h("ngModelChange",function(a){p(e);let s=m();return _(s.applicant.address,a)||(s.applicant.address=a),c(a)}),i()()()(),n(114,"div",8)(115,"h2",9),r(116,"Employment Details"),i(),n(117,"div",10)(118,"div",11)(119,"label",66),r(120,"Main Status"),i(),n(121,"select",67),h("ngModelChange",function(a){p(e);let s=m();return _(s.applicant.main_status,a)||(s.applicant.main_status=a),c(a)}),n(122,"option",24),r(123,"Select Status"),i(),y(124,_t,2,2,"option",68),i()(),n(125,"div",11)(126,"label",69),r(127,"Applicant Type"),i(),n(128,"select",70),h("ngModelChange",function(a){p(e);let s=m();return _(s.applicant.applicant_type,a)||(s.applicant.applicant_type=a),c(a)}),n(129,"option"),r(130,"household"),i(),n(131,"option"),r(132,"skilled"),i()()(),n(133,"div",11)(134,"label",71),r(135,"Foreign Recruitment Agency"),i(),n(136,"select",72),h("ngModelChange",function(a){p(e);let s=m();return _(s.applicant.fra_id,a)||(s.applicant.fra_id=a),c(a)}),n(137,"option",73),r(138,"Select Agency"),i(),y(139,ht,2,2,"option",68),i()(),n(140,"div",11)(141,"label",74),r(142,"Deployment Date"),i(),n(143,"input",75),h("ngModelChange",function(a){p(e);let s=m();return _(s.applicant.date_deployment,a)||(s.applicant.date_deployment=a),c(a)}),i()()()(),n(144,"div",76)(145,"a",77),r(146,"Cancel"),i(),n(147,"button",78),r(148," Save "),i()()()}if(l&2){let e=Ae(1),o=m();d(9),g("ngModel",o.applicant.first_name),d(4),g("ngModel",o.applicant.middle_name),d(4),g("ngModel",o.applicant.last_name),d(4),g("ngModel",o.applicant.passport_number),d(4),g("ngModel",o.applicant.date_of_birth),d(4),g("ngModel",o.applicant.country),d(68),g("ngModel",o.applicant.email),d(4),g("ngModel",o.applicant.phone_number),d(4),g("ngModel",o.applicant.whatsapp),d(4),g("ngModel",o.applicant.facebook),d(4),g("ngModel",o.applicant.address),d(8),g("ngModel",o.applicant.main_status),d(3),f("ngForOf",o.statuses),d(4),g("ngModel",o.applicant.applicant_type),d(8),g("ngModel",o.applicant.fra_id),d(),f("ngValue",null),d(2),f("ngForOf",o.fras),d(4),g("ngModel",o.applicant.date_deployment),d(4),f("disabled",!e.form.valid)}}var le=class l{applicantService=u(O);fraService=u(Q);router=u(D);route=u(G);cdr=u(F);applicant={};isEditMode=!1;applicantId=null;isLoading=!1;statuses=[];fras=[];ngOnInit(){this.loadStatuses(),this.loadFras();let t=this.route.snapshot.paramMap.get("id");t&&(this.isEditMode=!0,this.applicantId=+t,this.loadApplicantData(this.applicantId))}async loadFras(){try{this.fras=await this.fraService.getFras()}catch(t){console.error("Error loading FRAs:",t)}}async loadStatuses(){try{this.statuses=await this.applicantService.getStatuses()}catch(t){console.error("Error loading statuses:",t)}}async loadApplicantData(t){this.isLoading=!0,this.cdr.detectChanges();try{let e=await this.applicantService.getApplicantById(t);e?(this.applicant=e,this.cdr.detectChanges()):this.router.navigate(["/admin/applicants"])}catch(e){console.error("Error loading applicant data:",e)}finally{this.isLoading=!1,this.cdr.detectChanges()}}async saveApplicant(){try{this.isEditMode&&this.applicantId?await this.applicantService.updateApplicant(Z(z({},this.applicant),{id:this.applicantId})):await this.applicantService.createApplicant(this.applicant),this.router.navigate(["/admin/applicants"])}catch(t){console.error("Error saving applicant:",t),alert("Failed to save applicant.")}}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=b({type:l,selectors:[["app-applicant-form"]],decls:5,vars:3,consts:[["applicantForm","ngForm"],[1,"glass-card","w-full","p-8","text-white"],[1,"text-3xl","font-bold","mb-6"],["class","text-center py-8",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[1,"text-center","py-8"],[1,"fas","fa-spinner","fa-spin","text-4xl","mt-4"],[3,"ngSubmit"],[1,"mb-8"],[1,"text-xl","font-semibold","mb-4","border-b","border-white/20","pb-2"],[1,"grid","grid-cols-1","md:grid-cols-3","gap-x-6"],[1,"form-group"],["for","first_name",1,"form-label"],["type","text","id","first_name","name","first_name","required","",1,"form-field",3,"ngModelChange","ngModel"],["for","middle_name",1,"form-label"],["type","text","id","middle_name","name","middle_name",1,"form-field",3,"ngModelChange","ngModel"],["for","last_name",1,"form-label"],["type","text","id","last_name","name","last_name","required","",1,"form-field",3,"ngModelChange","ngModel"],["for","passport_number",1,"form-label"],["type","text","id","passport_number","name","passport_number",1,"form-field",3,"ngModelChange","ngModel"],["for","date_of_birth",1,"form-label"],["type","date","id","date_of_birth","name","date_of_birth",1,"form-field",3,"ngModelChange","ngModel"],["for","country",1,"form-label"],["id","country","name","country",1,"form-field",3,"ngModelChange","ngModel"],["value",""],["value","US"],["value","CA"],["value","MX"],["value","BR"],["value","GB"],["value","FR"],["value","DE"],["value","IT"],["value","ES"],["value","CN"],["value","IN"],["value","JP"],["value","KR"],["value","AU"],["value","NZ"],["value","PH"],["value","SA"],["value","AE"],["value","QA"],["value","KW"],["value","BH"],["value","OM"],["value","EG"],["value","JO"],["value","LB"],["value","IQ"],["value","IR"],["value","TR"],["value","IL"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-x-6"],["for","email",1,"form-label"],["type","email","id","email","name","email",1,"form-field",3,"ngModelChange","ngModel"],["for","phone_number",1,"form-label"],["type","text","id","phone_number","name","phone_number",1,"form-field",3,"ngModelChange","ngModel"],["for","whatsapp",1,"form-label"],["type","text","id","whatsapp","name","whatsapp",1,"form-field",3,"ngModelChange","ngModel"],["for","facebook",1,"form-label"],["type","url","id","facebook","name","facebook",1,"form-field",3,"ngModelChange","ngModel"],[1,"form-group","md:col-span-2"],["for","address",1,"form-label"],["id","address","name","address","rows","3",1,"form-field",3,"ngModelChange","ngModel"],["for","main_status",1,"form-label"],["id","main_status","name","main_status",1,"form-field",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["for","applicant_type",1,"form-label"],["id","applicant_type","name","applicant_type",1,"form-field",3,"ngModelChange","ngModel"],["for","fra_id",1,"form-label"],["id","fra_id","name","fra_id",1,"form-field",3,"ngModelChange","ngModel"],[3,"ngValue"],["for","date_deployment",1,"form-label"],["type","date","id","date_deployment","name","date_deployment",1,"form-field",3,"ngModelChange","ngModel"],[1,"flex","justify-end","items-center","mt-8"],["routerLink","/admin/applicants",1,"text-gray-300","hover:text-white","mr-6"],["type","submit",1,"bg-blue-600","hover:bg-blue-700","text-white","font-bold","py-2","px-6","rounded-md","transition","duration-300","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[3,"value"]],template:function(e,o){e&1&&(n(0,"div",1)(1,"h1",2),r(2),i(),y(3,gt,4,0,"div",3)(4,xt,149,19,"form",4),i()),e&2&&(d(2),M("",o.isEditMode?"Edit":"Create"," Applicant"),d(),f("ngIf",o.isLoading),d(),f("ngIf",!o.isLoading))},dependencies:[E,I,S,V,Y,ee,te,T,$,k,K,J,P,H,L,B],styles:[".form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem}.form-label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-size:.875rem;line-height:1.25rem;font-weight:500;color:#d1d5db}.form-field[_ngcontent-%COMP%]{width:100%;background-color:#0003;border-width:0;border-bottom-width:2px;border-color:#ffffff4d;border-top-left-radius:.5rem;border-top-right-radius:.5rem;padding:.625rem;color:#fff;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}.form-field[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.form-field[_ngcontent-%COMP%]:focus{outline:none;--tw-ring-shadow: 0 0 #0000;border-color:#60a5fa}.form-field[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#1f2937;color:#fff}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{filter:invert(1)}"]})};var re=class l{db=u(q);async getCases(){let t=await C(this.db.query(Ze));return t&&t.data?t.data.map(e=>Z(z({},e),{employee_name:`${e.last_name}, ${e.first_name}`})):[]}async getCaseById(t){let e=await C(this.db.query(Xe,[t]));if(e&&e.data&&e.data.length>0){let o=e.data[0];return Z(z({},o),{employee_name:`${o.last_name}, ${o.first_name}`})}return null}async createCase(t){let e=this.mapCaseToParams(t);return C(this.db.query($e,e))}async updateCase(t){let e=this.mapCaseToParams(t);return C(this.db.query(et,[...e,t.id]))}async deleteCase(t){return C(this.db.query(tt,[t]))}mapCaseToParams(t){return[t.employee_id||null,t.category||"",t.report||"",t.report_status||"open",t.agency_id||null]}static \u0275fac=function(e){return new(e||l)};static \u0275prov=R({token:l,factory:l.\u0275fac,providedIn:"root"})};var yt=(l,t)=>({"bg-green-600":l,"bg-red-600":t}),Ct=l=>["/admin/cases/edit",l];function bt(l,t){l&1&&(n(0,"div",8)(1,"p"),r(2,"Loading cases..."),i(),v(3,"i",9),i())}function vt(l,t){if(l&1){let e=A();n(0,"tr",17)(1,"td",18),r(2),i(),n(3,"td",18),r(4),i(),n(5,"td",18)(6,"span",19),r(7),i()(),n(8,"td",18),r(9),pe(10,"date"),i(),n(11,"td",20)(12,"a",21),r(13,"Edit"),i(),n(14,"button",22),x("click",function(){let a=p(e).$implicit,s=m(2);return c(s.deleteCase(a.id))}),r(15,"Delete"),i()()()}if(l&2){let e=t.$implicit;d(2),w(e.employee_name),d(2),w(e.category),d(2),f("ngClass",Te(9,yt,e.report_status==="open",e.report_status==="closed")),d(),M(" ",e.report_status," "),d(2),w(Ve(10,6,e.date_reported,"shortDate")),d(3),f("routerLink",U(12,Ct,e.id))}}function wt(l,t){l&1&&(n(0,"tr")(1,"td",23),r(2,"No cases found."),i()())}function St(l,t){if(l&1){let e=A();n(0,"div",10)(1,"table",11)(2,"thead")(3,"tr",12)(4,"th",13),x("click",function(){p(e);let a=m();return c(a.sort("employee_name"))}),r(5," Employee "),i(),n(6,"th",13),x("click",function(){p(e);let a=m();return c(a.sort("category"))}),r(7," Category "),i(),n(8,"th",13),x("click",function(){p(e);let a=m();return c(a.sort("report_status"))}),r(9," Status "),i(),n(10,"th",13),x("click",function(){p(e);let a=m();return c(a.sort("date_reported"))}),r(11," Date Reported "),i(),n(12,"th",14),r(13," Actions "),i()()(),n(14,"tbody"),y(15,vt,16,14,"tr",15)(16,wt,3,0,"tr",16),i()()()}if(l&2){let e=m();d(15),f("ngForOf",e.filteredCases),d(),f("ngIf",!e.filteredCases||e.filteredCases.length===0)}}var ye=class l{caseService=u(re);cdr=u(F);allCases=[];filteredCases=[];searchTerm="";isLoading=!1;sortDirection={};ngOnInit(){this.loadCases()}async loadCases(){this.isLoading=!0,this.cdr.detectChanges();try{this.allCases=await this.caseService.getCases(),this.filteredCases=[...this.allCases],this.cdr.detectChanges()}catch(t){console.error("Error loading cases:",t)}finally{this.isLoading=!1,this.cdr.detectChanges()}}filterCases(){let t=this.searchTerm.toLowerCase();this.filteredCases=this.allCases.filter(e=>(e.employee_name?.toLowerCase()??"").includes(t)||(e.category?.toLowerCase()??"").includes(t)||(e.report_status?.toLowerCase()??"").includes(t))}sort(t){let e=this.sortDirection[t]==="asc"?"desc":"asc";this.sortDirection={[t]:e},this.filteredCases.sort((o,a)=>{let s,W;return t==="employee_name"?(s=o.employee_name??"",W=a.employee_name??""):(s=o[t]??"",W=a[t]??""),s<W?e==="asc"?-1:1:s>W?e==="asc"?1:-1:0})}async deleteCase(t){if(confirm("Are you sure you want to delete this case?"))try{await this.caseService.deleteCase(t),this.loadCases()}catch(e){console.error("Error deleting case:",e),alert("Failed to delete case.")}}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=b({type:l,selectors:[["app-case-list"]],decls:10,vars:3,consts:[[1,"glass-card","p-8","text-white","rounded-xl"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-3xl","font-bold"],["routerLink","/admin/cases/new",1,"bg-blue-600","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded-md","transition","duration-300"],[1,"mb-4"],["type","text","placeholder","Search cases...",1,"w-full","px-4","py-2","bg-white/20","rounded-md","border","border-transparent","focus:outline-none","focus:ring-2","focus:ring-blue-500","text-gray-800",3,"ngModelChange","ngModel"],["class","text-center py-8",4,"ngIf"],["class","overflow-x-auto bg-black/30 backdrop-blur-xl rounded-lg shadow-lg",4,"ngIf"],[1,"text-center","py-8"],[1,"fas","fa-spinner","fa-spin","text-4xl","mt-4"],[1,"overflow-x-auto","bg-black/30","backdrop-blur-xl","rounded-lg","shadow-lg"],[1,"min-w-full"],[1,"border-b","border-white/20"],[1,"px-6","py-3","text-left","text-sm","font-medium","uppercase","tracking-wider","cursor-pointer",3,"click"],[1,"px-6","py-3","text-right","text-sm","font-medium","uppercase","tracking-wider"],["class","border-b border-white/10 hover:bg-white/5",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"border-b","border-white/10","hover:bg-white/5"],[1,"px-6","py-4","whitespace-nowrap"],[1,"px-2","inline-flex","text-xs","leading-5","font-semibold","rounded-full",3,"ngClass"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"text-indigo-400","hover:text-indigo-300","mr-4",3,"routerLink"],[1,"text-red-400","hover:text-red-300",3,"click"],["colspan","5",1,"text-center","py-8"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"Cases"),i(),n(4,"a",3),r(5," New Case "),i()(),n(6,"div",4)(7,"input",5),h("ngModelChange",function(s){return _(o.searchTerm,s)||(o.searchTerm=s),s}),x("ngModelChange",function(){return o.filterCases()}),i()(),y(8,bt,4,0,"div",6)(9,St,17,2,"div",7),i()),e&2&&(d(7),g("ngModel",o.searchTerm),d(),f("ngIf",o.isLoading),d(),f("ngIf",!o.isLoading))},dependencies:[E,ce,I,S,V,T,k,P,L,B,We],encapsulation:2})};function Et(l,t){l&1&&(n(0,"div",4)(1,"p"),r(2,"Loading case details..."),i(),v(3,"i",5),i())}function At(l,t){if(l&1&&(n(0,"option",25),r(1),i()),l&2){let e=t.$implicit;f("ngValue",e.id),d(),Fe(" ",e.last_name,", ",e.first_name," (",e.passport_number,") ")}}function Mt(l,t){if(l&1){let e=A();n(0,"form",6),x("ngSubmit",function(){p(e);let a=m();return c(a.saveCase())}),n(1,"div")(2,"label",7),r(3,"Employee"),i(),n(4,"select",8),h("ngModelChange",function(a){p(e);let s=m();return _(s.caseItem.employee_id,a)||(s.caseItem.employee_id=a),c(a)}),n(5,"option",9),r(6,"Select an Employee"),i(),y(7,At,2,4,"option",10),i()(),n(8,"div")(9,"label",11),r(10,"Category"),i(),n(11,"input",12),h("ngModelChange",function(a){p(e);let s=m();return _(s.caseItem.category,a)||(s.caseItem.category=a),c(a)}),i()(),n(12,"div")(13,"label",13),r(14,"Report"),i(),n(15,"textarea",14),h("ngModelChange",function(a){p(e);let s=m();return _(s.caseItem.report,a)||(s.caseItem.report=a),c(a)}),i()(),n(16,"div")(17,"label",15),r(18,"Status"),i(),n(19,"select",16),h("ngModelChange",function(a){p(e);let s=m();return _(s.caseItem.report_status,a)||(s.caseItem.report_status=a),c(a)}),n(20,"option",17),r(21,"Open"),i(),n(22,"option",18),r(23,"Closed"),i(),n(24,"option",19),r(25,"Pending"),i()()(),n(26,"div")(27,"label",20),r(28,"Agency ID (Optional)"),i(),n(29,"input",21),h("ngModelChange",function(a){p(e);let s=m();return _(s.caseItem.agency_id,a)||(s.caseItem.agency_id=a),c(a)}),i()(),n(30,"div",22)(31,"button",23),x("click",function(){p(e);let a=m();return c(a.router.navigate(["/admin/cases"]))}),r(32," Cancel "),i(),n(33,"button",24),r(34),i()()()}if(l&2){let e=m();d(4),g("ngModel",e.caseItem.employee_id),d(),f("ngValue",null),d(2),f("ngForOf",e.applicants),d(4),g("ngModel",e.caseItem.category),d(4),g("ngModel",e.caseItem.report),d(4),g("ngModel",e.caseItem.report_status),d(10),g("ngModel",e.caseItem.agency_id),d(5),M(" ",e.isEditMode?"Update Case":"Create Case"," ")}}var se=class l{caseService=u(re);applicantService=u(O);route=u(G);router=u(D);cdr=u(F);caseItem={report_status:"open"};applicants=[];isEditMode=!1;isLoading=!1;async ngOnInit(){this.isLoading=!0,this.cdr.detectChanges();try{await this.loadApplicants(),this.route.paramMap.subscribe(async t=>{let e=t.get("id");e&&(this.isEditMode=!0,await this.loadCase(+e)),this.isLoading=!1,this.cdr.detectChanges()})}catch(t){console.error("Error during initialization:",t),this.isLoading=!1,this.cdr.detectChanges()}}async loadApplicants(){try{this.applicants=await this.applicantService.getApplicants()}catch(t){console.error("Error loading applicants:",t)}}async loadCase(t){try{let e=await this.caseService.getCaseById(t);e?this.caseItem=e:(console.error("Case not found"),this.router.navigate(["/admin/cases"]))}catch(e){console.error("Error loading case:",e)}}async saveCase(){try{this.isEditMode?await this.caseService.updateCase(this.caseItem):await this.caseService.createCase(this.caseItem),this.router.navigate(["/admin/cases"])}catch(t){console.error("Error saving case:",t),alert("Failed to save case.")}}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=b({type:l,selectors:[["app-case-form"]],decls:5,vars:3,consts:[[1,"glass-card","p-8","text-white","rounded-xl"],[1,"text-3xl","font-bold","mb-6"],["class","text-center py-8",4,"ngIf"],["class","space-y-4",3,"ngSubmit",4,"ngIf"],[1,"text-center","py-8"],[1,"fas","fa-spinner","fa-spin","text-4xl","mt-4"],[1,"space-y-4",3,"ngSubmit"],["for","employee_id",1,"block","text-sm","font-medium","text-gray-300"],["id","employee_id","name","employee_id","required","",1,"mt-1","block","w-full","px-3","py-2","bg-white/20","border","border-transparent","rounded-md","shadow-sm","focus:outline-none","focus:ring-blue-500","focus:border-blue-500","sm:text-sm","text-gray-800",3,"ngModelChange","ngModel"],["disabled","",3,"ngValue"],[3,"ngValue",4,"ngFor","ngForOf"],["for","category",1,"block","text-sm","font-medium","text-gray-300"],["type","text","id","category","name","category","required","",1,"mt-1","block","w-full","px-3","py-2","bg-white/20","border","border-transparent","rounded-md","shadow-sm","focus:outline-none","focus:ring-blue-500","focus:border-blue-500","sm:text-sm","text-gray-800",3,"ngModelChange","ngModel"],["for","report",1,"block","text-sm","font-medium","text-gray-300"],["id","report","name","report","rows","5","required","",1,"mt-1","block","w-full","px-3","py-2","bg-white/20","border","border-transparent","rounded-md","shadow-sm","focus:outline-none","focus:ring-blue-500","focus:border-blue-500","sm:text-sm","text-gray-800",3,"ngModelChange","ngModel"],["for","report_status",1,"block","text-sm","font-medium","text-gray-300"],["id","report_status","name","report_status","required","",1,"mt-1","block","w-full","px-3","py-2","bg-white/20","border","border-transparent","rounded-md","shadow-sm","focus:outline-none","focus:ring-blue-500","focus:border-blue-500","sm:text-sm","text-gray-800",3,"ngModelChange","ngModel"],["value","open"],["value","closed"],["value","pending"],["for","agency_id",1,"block","text-sm","font-medium","text-gray-300"],["type","number","id","agency_id","name","agency_id",1,"mt-1","block","w-full","px-3","py-2","bg-white/20","border","border-transparent","rounded-md","shadow-sm","focus:outline-none","focus:ring-blue-500","focus:border-blue-500","sm:text-sm","text-gray-800",3,"ngModelChange","ngModel"],[1,"flex","justify-end","space-x-3"],["type","button",1,"px-4","py-2","border","border-gray-300","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500",3,"click"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500"],[3,"ngValue"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"h1",1),r(2),i(),y(3,Et,4,0,"div",2)(4,Mt,35,8,"form",3),i()),e&2&&(d(2),w(o.isEditMode?"Edit Case":"New Case"),d(),f("ngIf",o.isLoading),d(),f("ngIf",!o.isLoading))},dependencies:[E,I,S,V,Y,ee,te,T,ue,$,k,K,J,P,H],encapsulation:2})};var Ft=l=>["/admin/fras/edit",l];function It(l,t){l&1&&(n(0,"div",8)(1,"p"),r(2,"Loading FRAs..."),i(),v(3,"i",9),i())}function Lt(l,t){if(l&1){let e=A();n(0,"tr",17)(1,"td",18),r(2),i(),n(3,"td",18),r(4),i(),n(5,"td",18),r(6),i(),n(7,"td",19)(8,"a",20),r(9,"Edit"),i(),n(10,"button",21),x("click",function(){let a=p(e).$implicit,s=m(2);return c(s.deleteFra(a.id))}),r(11,"Delete"),i()()()}if(l&2){let e=t.$implicit;d(2),w(e.name),d(2),w(e.contact),d(2),w(e.country),d(2),f("routerLink",U(4,Ft,e.id))}}function Tt(l,t){l&1&&(n(0,"tr")(1,"td",22),r(2,"No FRAs found."),i()())}function kt(l,t){if(l&1){let e=A();n(0,"div",10)(1,"table",11)(2,"thead")(3,"tr",12)(4,"th",13),x("click",function(){p(e);let a=m();return c(a.sort("name"))}),r(5," Name "),i(),n(6,"th",13),x("click",function(){p(e);let a=m();return c(a.sort("contact"))}),r(7," Contact "),i(),n(8,"th",13),x("click",function(){p(e);let a=m();return c(a.sort("country"))}),r(9," Country "),i(),n(10,"th",14),r(11," Actions "),i()()(),n(12,"tbody"),y(13,Lt,12,6,"tr",15)(14,Tt,3,0,"tr",16),i()()()}if(l&2){let e=m();d(13),f("ngForOf",e.filteredFras),d(),f("ngIf",!e.filteredFras||e.filteredFras.length===0)}}var Ce=class l{fraService=u(Q);cdr=u(F);allFras=[];filteredFras=[];searchTerm="";isLoading=!1;sortDirection={};ngOnInit(){this.loadFras()}async loadFras(){this.isLoading=!0,this.cdr.detectChanges();try{this.allFras=await this.fraService.getFras(),this.filterFras(),this.cdr.detectChanges()}catch(t){console.error("Error loading FRAs:",t)}finally{this.isLoading=!1,this.cdr.detectChanges()}}filterFras(){let t=this.searchTerm.toLowerCase();this.filteredFras=this.allFras.filter(e=>(e.name?.toLowerCase()??"").includes(t)||(e.contact?.toLowerCase()??"").includes(t)||(e.country?.toLowerCase()??"").includes(t))}sort(t){let e=this.sortDirection[t]==="asc"?"desc":"asc";this.sortDirection={[t]:e},this.filteredFras.sort((o,a)=>{let s=o[t]??"",W=a[t]??"";return s<W?e==="asc"?-1:1:s>W?e==="asc"?1:-1:0})}async deleteFra(t){if(confirm("Are you sure you want to delete this FRA?"))try{await this.fraService.deleteFra(t),this.loadFras()}catch(e){console.error("Error deleting FRA:",e),alert("Failed to delete FRA.")}}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=b({type:l,selectors:[["app-fra-list"]],decls:10,vars:3,consts:[[1,"glass-card","p-8","text-white","rounded-xl"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-3xl","font-bold"],["routerLink","/admin/fras/new",1,"bg-blue-600","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded-md","transition","duration-300"],[1,"mb-4"],["type","text","placeholder","Search FRAs...",1,"w-full","px-4","py-2","bg-white/20","rounded-md","border","border-transparent","focus:outline-none","focus:ring-2","focus:ring-blue-500","text-gray-800",3,"ngModelChange","ngModel"],["class","text-center py-8",4,"ngIf"],["class","overflow-x-auto bg-black/30 backdrop-blur-xl rounded-lg shadow-lg",4,"ngIf"],[1,"text-center","py-8"],[1,"fas","fa-spinner","fa-spin","text-4xl","mt-4"],[1,"overflow-x-auto","bg-black/30","backdrop-blur-xl","rounded-lg","shadow-lg"],[1,"min-w-full"],[1,"border-b","border-white/20"],[1,"px-6","py-3","text-left","text-sm","font-medium","uppercase","tracking-wider","cursor-pointer",3,"click"],[1,"px-6","py-3","text-right","text-sm","font-medium","uppercase","tracking-wider"],["class","border-b border-white/10 hover:bg-white/5",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"border-b","border-white/10","hover:bg-white/5"],[1,"px-6","py-4","whitespace-nowrap"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],[1,"text-indigo-400","hover:text-indigo-300","mr-4",3,"routerLink"],[1,"text-red-400","hover:text-red-300",3,"click"],["colspan","4",1,"text-center","py-8"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),r(3,"Foreign Recruitment Agencies"),i(),n(4,"a",3),r(5," New FRA "),i()(),n(6,"div",4)(7,"input",5),h("ngModelChange",function(s){return _(o.searchTerm,s)||(o.searchTerm=s),s}),x("ngModelChange",function(){return o.filterFras()}),i()(),y(8,It,4,0,"div",6)(9,kt,15,2,"div",7),i()),e&2&&(d(7),g("ngModel",o.searchTerm),d(),f("ngIf",o.isLoading),d(),f("ngIf",!o.isLoading))},dependencies:[E,I,S,V,T,k,P,L,B],encapsulation:2})};function Pt(l,t){l&1&&(n(0,"div",4),r(1,"Loading FRA data..."),i())}function Vt(l,t){if(l&1&&(n(0,"option",54),r(1),i()),l&2){let e=t.$implicit;f("value",e.id),d(),me(" ",e.first_name," ",e.last_name," ")}}function Nt(l,t){if(l&1){let e=A();n(0,"form",5),x("ngSubmit",function(){p(e);let a=m();return c(a.saveFra())}),n(1,"div",6)(2,"label",7),r(3,"Name:"),i(),n(4,"input",8),h("ngModelChange",function(a){p(e);let s=m();return _(s.fra.name,a)||(s.fra.name=a),c(a)}),i()(),n(5,"div",6)(6,"label",9),r(7,"Contact Person:"),i(),n(8,"input",10),h("ngModelChange",function(a){p(e);let s=m();return _(s.fra.contact,a)||(s.fra.contact=a),c(a)}),i()(),n(9,"div",6)(10,"label",11),r(11,"Address:"),i(),n(12,"textarea",12),h("ngModelChange",function(a){p(e);let s=m();return _(s.fra.address,a)||(s.fra.address=a),c(a)}),i()(),n(13,"div",6)(14,"label",13),r(15,"Country:"),i(),n(16,"select",14),h("ngModelChange",function(a){p(e);let s=m();return _(s.fra.country,a)||(s.fra.country=a),c(a)}),n(17,"option",15),r(18,"Select Country"),i(),n(19,"option",16),r(20,"United States"),i(),n(21,"option",17),r(22,"Canada"),i(),n(23,"option",18),r(24,"Mexico"),i(),n(25,"option",19),r(26,"Brazil"),i(),n(27,"option",20),r(28,"United Kingdom"),i(),n(29,"option",21),r(30,"France"),i(),n(31,"option",22),r(32,"Germany"),i(),n(33,"option",23),r(34,"Italy"),i(),n(35,"option",24),r(36,"Spain"),i(),n(37,"option",25),r(38,"China"),i(),n(39,"option",26),r(40,"India"),i(),n(41,"option",27),r(42,"Japan"),i(),n(43,"option",28),r(44,"South Korea"),i(),n(45,"option",29),r(46,"Australia"),i(),n(47,"option",30),r(48,"New Zealand"),i(),n(49,"option",31),r(50,"Philippines"),i(),n(51,"option",32),r(52,"Saudi Arabia"),i(),n(53,"option",33),r(54,"United Arab Emirates"),i(),n(55,"option",34),r(56,"Qatar"),i(),n(57,"option",35),r(58,"Kuwait"),i(),n(59,"option",36),r(60,"Bahrain"),i(),n(61,"option",37),r(62,"Oman"),i(),n(63,"option",38),r(64,"Egypt"),i(),n(65,"option",39),r(66,"Jordan"),i(),n(67,"option",40),r(68,"Lebanon"),i(),n(69,"option",41),r(70,"Iraq"),i(),n(71,"option",42),r(72,"Iran"),i(),n(73,"option",43),r(74,"Turkey"),i(),n(75,"option",44),r(76,"Israel"),i()()(),n(77,"div",6)(78,"label",45),r(79,"Applicant:"),i(),n(80,"select",46),h("ngModelChange",function(a){p(e);let s=m();return _(s.fra.applicant_id,a)||(s.fra.applicant_id=a),c(a)}),n(81,"option",47),r(82,"Select Applicant"),i(),y(83,Vt,2,3,"option",48),i()(),n(84,"div",6)(85,"label",49),r(86,"Agency ID:"),i(),n(87,"input",50),h("ngModelChange",function(a){p(e);let s=m();return _(s.fra.agency_id,a)||(s.fra.agency_id=a),c(a)}),i()(),n(88,"div",51)(89,"button",52),r(90),i(),n(91,"button",53),x("click",function(){p(e);let a=m();return c(a.router.navigate(["/admin/fras"]))}),r(92," Cancel "),i()()()}if(l&2){let e=m();d(4),g("ngModel",e.fra.name),d(4),g("ngModel",e.fra.contact),d(4),g("ngModel",e.fra.address),d(4),g("ngModel",e.fra.country),d(64),g("ngModel",e.fra.applicant_id),d(),f("ngValue",null),d(2),f("ngForOf",e.applicants),d(4),g("ngModel",e.fra.agency_id),d(3),M(" ",e.isEditMode?"Update FRA":"Create FRA"," ")}}var de=class l{fraService=u(Q);applicantService=u(O);router=u(D);route=u(G);cdr=u(F);fra={};isEditMode=!1;fraId=null;isLoading=!1;applicants=[];ngOnInit(){this.loadApplicants();let t=this.route.snapshot.paramMap.get("id");t&&(this.isEditMode=!0,this.fraId=+t,this.loadFraData(this.fraId))}async loadApplicants(){try{this.applicants=await this.applicantService.getApplicants(),this.cdr.detectChanges()}catch(t){console.error("Error loading applicants:",t)}}async loadFraData(t){this.isLoading=!0,this.cdr.detectChanges();try{let e=await this.fraService.getFraById(t);e?(this.fra=e,this.cdr.detectChanges()):this.router.navigate(["/admin/fras"])}catch(e){console.error("Error loading FRA data:",e)}finally{this.isLoading=!1,this.cdr.detectChanges()}}async saveFra(){try{this.isEditMode&&this.fraId?await this.fraService.updateFra(Z(z({},this.fra),{id:this.fraId})):await this.fraService.createFra(this.fra),this.router.navigate(["/admin/fras"])}catch(t){console.error("Error saving FRA:",t),alert("Failed to save FRA.")}}static \u0275fac=function(e){return new(e||l)};static \u0275cmp=b({type:l,selectors:[["app-fra-form"]],decls:5,vars:3,consts:[[1,"container","mx-auto","p-4"],[1,"text-2xl","font-bold","mb-4"],["class","text-center py-4",4,"ngIf"],["class","bg-white shadow-md rounded-lg p-6",3,"ngSubmit",4,"ngIf"],[1,"text-center","py-4"],[1,"bg-white","shadow-md","rounded-lg","p-6",3,"ngSubmit"],[1,"mb-4"],["for","name",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["type","text","id","name","name","name","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModelChange","ngModel"],["for","contact",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["type","text","id","contact","name","contact","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModelChange","ngModel"],["for","address",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","address","name","address","required","","rows","3",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModelChange","ngModel"],["for","country",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","country","name","country","required","",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModelChange","ngModel"],["value",""],["value","US"],["value","CA"],["value","MX"],["value","BR"],["value","GB"],["value","FR"],["value","DE"],["value","IT"],["value","ES"],["value","CN"],["value","IN"],["value","JP"],["value","KR"],["value","AU"],["value","NZ"],["value","PH"],["value","SA"],["value","AE"],["value","QA"],["value","KW"],["value","BH"],["value","OM"],["value","EG"],["value","JO"],["value","LB"],["value","IQ"],["value","IR"],["value","TR"],["value","IL"],["for","applicant_id",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["id","applicant_id","name","applicant_id",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModelChange","ngModel"],[3,"ngValue"],[3,"value",4,"ngFor","ngForOf"],["for","agency_id",1,"block","text-gray-700","text-sm","font-bold","mb-2"],["type","number","id","agency_id","name","agency_id",1,"shadow","appearance-none","border","rounded","w-full","py-2","px-3","text-gray-700","leading-tight","focus:outline-none","focus:shadow-outline",3,"ngModelChange","ngModel"],[1,"flex","items-center","justify-between"],["type","submit",1,"bg-blue-500","hover:bg-blue-700","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline"],["type","button",1,"bg-gray-500","hover:bg-gray-700","text-white","font-bold","py-2","px-4","rounded","focus:outline-none","focus:shadow-outline",3,"click"],[3,"value"]],template:function(e,o){e&1&&(n(0,"div",0)(1,"h2",1),r(2),i(),y(3,Pt,2,0,"div",2)(4,Nt,93,9,"form",3),i()),e&2&&(d(2),w(o.isEditMode?"Edit FRA":"Add New FRA"),d(),f("ngIf",o.isLoading),d(),f("ngIf",!o.isLoading))},dependencies:[E,I,S,V,Y,ee,te,T,ue,$,k,K,J,P,H,L],encapsulation:2})};var Yn=[{path:"login",component:fe},{path:"",component:he,canActivate:[nt],children:[{path:"dashboard",component:xe},{path:"applicants",component:oe},{path:"applicants/status/:status",component:oe},{path:"applicants/new",component:le},{path:"applicants/edit/:id",component:le},{path:"cases",component:ye},{path:"cases/new",component:se},{path:"cases/edit/:id",component:se},{path:"fras",component:Ce},{path:"fras/new",component:de},{path:"fras/edit/:id",component:de},{path:"",redirectTo:"dashboard",pathMatch:"full"}]}];export{Yn as ADMIN_ROUTES};
