import{A as ye,Aa as We,B as fe,Ba as $t,Bb as Lt,C as et,Ca as it,Cb as To,D as en,Da as ro,Db as Nt,E as gt,Ea as so,Eb as xo,F as tn,Fa as Ge,G as vt,Ga as ao,H as yt,I as bt,Ja as co,K as nn,L as It,M as Zn,Ma as lo,Na as an,Oa as Ot,Pa as uo,Q as Yn,Qa as cn,R as Wn,S as Gn,Ta as go,Ua as vo,Wa as yo,Xb as So,Yb as _o,Z as qn,Zb as Mo,_ as on,_b as Ue,a as Qe,b as pt,ba as tt,bb as bo,ca as Un,cb as Io,d as Ln,da as Ct,e as Fe,ea as Vn,eb as Co,f as Le,g as Se,i as _e,j as je,ja as Xn,k as Nn,ka as Kn,l as ft,la as Dt,m as Ne,ma as eo,n as ze,na as ce,o as mt,oa as to,p as zn,pa as xt,q as Bn,qa as St,ra as _t,sa as Mt,t as ve,ta as no,u as Ce,ua as oo,v as Je,va as io,vb as Eo,wa as Pt,wb as wo,x as ht,xa as jt,xb as ko,y as Hn,ya as At,yb as Do,z as Me,za as Rt}from"./chunk-QBNNDAMG.js";import"./chunk-BPNJ4XSC.js";import"./chunk-QUJFQN2Y.js";import"./chunk-HN6GP5JN.js";import"./chunk-LYVAD3YA.js";import"./chunk-2Z5TFF6Q.js";import{a as qe,c as po,d as Ft,g as fo,h as ln,i as mo}from"./chunk-D3KLNP4X.js";import"./chunk-RI6VIFYD.js";import"./chunk-BX2T5SXJ.js";import"./chunk-ROMOYGUQ.js";import"./chunk-PKG65ASR.js";import"./chunk-UDFYMEAC.js";import"./chunk-YV6RNW5L.js";import"./chunk-I4WYFWEI.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-DW6VLS55.js";import"./chunk-CKP3SGE2.js";import"./chunk-6W4ZNO6B.js";import"./chunk-3JIGZQQL.js";import"./chunk-636K7VIU.js";import{a as N,g as wt,h as kt}from"./chunk-CJW4MSPK.js";import{a as Be,c as rn,d as ae,e as He,h as oe,i as Ze}from"./chunk-TGDZUAEA.js";import"./chunk-VSDHJBUA.js";import{c as Tt}from"./chunk-M2X7KQLB.js";import{a as dn}from"./chunk-DVVH2KKN.js";import{a as ho}from"./chunk-NV3QH4JK.js";import{b as Et,c as Qn,d as Jn,f as ie,g as be,i as ot}from"./chunk-3IVKBF6N.js";import{a as sn,e as Ye}from"./chunk-OZYWYLNK.js";import{a as nt}from"./chunk-42C7ZIID.js";import{a as Oe,b as Ke,g as Fn}from"./chunk-KZZABCGY.js";var zt=()=>{let o;return{lock:async()=>{let n=o,t;return o=new Promise(i=>t=i),n!==void 0&&await n,t}}};var Ei=":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",wi=":host{left:0;right:0;top:0;bottom:0;display:block;position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0);contain:strict;cursor:pointer;opacity:0.01;-ms-touch-action:none;touch-action:none;z-index:2}:host(.backdrop-hide){background:transparent}:host(.backdrop-no-tappable){cursor:auto}:host{background-color:var(--ion-backdrop-color, #000)}",ki=Ze(class extends Be{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.ionBackdropTap=oe(this,"ionBackdropTap",7),this.visible=!0,this.tappable=!0,this.stopPropagation=!0}onMouseDown(e){this.emitTap(e)}emitTap(e){this.stopPropagation&&(e.preventDefault(),e.stopPropagation()),this.tappable&&this.ionBackdropTap.emit()}render(){let e=ce(this);return ae(He,{key:"7abaf2c310aa399607451b14063265e8a5846938","aria-hidden":"true",class:{[e]:!0,"backdrop-hide":!this.visible,"backdrop-no-tappable":!this.tappable}})}static get style(){return{ios:Ei,md:wi}}},[289,"ion-backdrop",{visible:[4],tappable:[4],stopPropagation:[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]);function Bt(){if(typeof customElements>"u")return;["ion-backdrop"].forEach(e=>{switch(e){case"ion-backdrop":customElements.get(e)||customElements.define(e,ki);break}})}var rt=(function(o){return o.Dark="DARK",o.Light="LIGHT",o.Default="DEFAULT",o})(rt||{}),mn={getEngine(){let o=ho();if(o?.isPluginAvailable("StatusBar"))return o.Plugins.StatusBar},setStyle(o){let e=this.getEngine();e&&e.setStyle(o)},getStyle:async function(){let o=this.getEngine();if(!o)return rt.Default;let{style:e}=await o.getInfo();return e}},un=(o,e)=>{if(e===1)return 0;let n=1/(1-e),t=-(e*n);return o*n+t},Ro=()=>{!nt||nt.innerWidth>=768||mn.setStyle({style:rt.Dark})},pn=(o=rt.Default)=>{!nt||nt.innerWidth>=768||mn.setStyle({style:o})},$o=async(o,e)=>{typeof o.canDismiss!="function"||!await o.canDismiss(void 0,it)||(e.isRunning()?e.onFinish(()=>{o.dismiss(void 0,"handler")},{oneTimeCallback:!0}):o.dismiss(void 0,"handler"))},fn=o=>.00255275*2.71828**(-14.9619*o)-1.00255*2.71828**(-.0380968*o)+1,Ee={MIN_PRESENTING_SCALE:.915},Di=(o,e,n,t)=>{let r=o.offsetHeight,s=!1,a=!1,l=null,p=null,f=.2,g=!0,y=0,w=()=>l&&qe(l)?l.scrollY:!0,I=Tt({el:o,gestureName:"modalSwipeToClose",gesturePriority:ro,direction:"y",threshold:10,canStart:h=>{let S=h.event.target;return S===null||!S.closest?!0:(l=Ft(S),l?(qe(l)?p=ie(l).querySelector(".inner-scroll"):p=l,!!!l.querySelector("ion-refresher")&&p.scrollTop===0):S.closest("ion-footer")===null)},onStart:h=>{let{deltaY:S}=h;g=w(),a=o.canDismiss!==void 0&&o.canDismiss!==!0,S>0&&l&&ln(l),e.progressStart(!0,s?1:0)},onMove:h=>{let{deltaY:S}=h;S>0&&l&&ln(l);let R=h.deltaY/r,M=R>=0&&a,H=M?f:.9999,C=M?fn(R/H):R,Y=ot(1e-4,C,H);e.progressStep(Y),Y>=.5&&y<.5?pn(n):Y<.5&&y>=.5&&Ro(),y=Y},onEnd:h=>{let S=h.velocityY,R=h.deltaY/r,M=R>=0&&a,H=M?f:.9999,C=M?fn(R/H):R,Y=ot(1e-4,C,H),j=(h.deltaY+S*1e3)/r,T=!M&&j>=.5,k=T?-.001:.001;T?(e.easing("cubic-bezier(0.32, 0.72, 0, 1)"),k+=Dt([0,0],[.32,.72],[0,1],[1,1],Y)[0]):(e.easing("cubic-bezier(1, 0, 0.68, 0.28)"),k+=Dt([0,0],[1,0],[.68,.28],[1,1],Y)[0]);let F=Po(T?R*r:(1-Y)*r,S);s=T,I.enable(!1),l&&mo(l,g),e.onFinish(()=>{T||I.enable(!0)}).progressEnd(T?1:0,k,F),M&&Y>H/4?$o(o,e):T&&t()}});return I},Po=(o,e)=>ot(400,o/Math.abs(e*1.1),500),Oo=o=>{let{currentBreakpoint:e,backdropBreakpoint:n,expandToScroll:t}=o,i=n===void 0||n<e,r=i?`calc(var(--backdrop-opacity) * ${e})`:"0",s=N("backdropAnimation").fromTo("opacity",0,r);i&&s.beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]);let a=N("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:"translateY(100%)"},{offset:1,opacity:1,transform:`translateY(${100-e*100}%)`}]),l=t?void 0:N("contentAnimation").keyframes([{offset:0,opacity:1,maxHeight:`${(1-e)*100}%`},{offset:1,opacity:1,maxHeight:`${e*100}%`}]);return{wrapperAnimation:a,backdropAnimation:s,contentAnimation:l}},Fo=o=>{let{currentBreakpoint:e,backdropBreakpoint:n}=o,t=`calc(var(--backdrop-opacity) * ${un(e,n)})`,i=[{offset:0,opacity:t},{offset:1,opacity:0}],r=[{offset:0,opacity:t},{offset:n,opacity:0},{offset:1,opacity:0}],s=N("backdropAnimation").keyframes(n!==0?r:i);return{wrapperAnimation:N("wrapperAnimation").keyframes([{offset:0,opacity:1,transform:`translateY(${100-e*100}%)`},{offset:1,opacity:1,transform:"translateY(100%)"}]),backdropAnimation:s}},Ti=()=>{let o=N().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),e=N().fromTo("transform","translateY(100vh)","translateY(0vh)");return{backdropAnimation:o,wrapperAnimation:e,contentAnimation:void 0}},jo=(o,e)=>{let{presentingEl:n,currentBreakpoint:t,expandToScroll:i}=e,r=ie(o),{wrapperAnimation:s,backdropAnimation:a,contentAnimation:l}=t!==void 0?Oo(e):Ti();a.addElement(r.querySelector("ion-backdrop")),s.addElement(r.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1}),!i&&l?.addElement(o.querySelector(".ion-page"));let p=N("entering-base").addElement(o).easing("cubic-bezier(0.32,0.72,0,1)").duration(500).addAnimation([s]);if(l&&p.addAnimation(l),n){let f=window.innerWidth<768,g=n.tagName==="ION-MODAL"&&n.presentingElement!==void 0,y=ie(n),w=N().beforeStyles({transform:"translateY(0)","transform-origin":"top center",overflow:"hidden"}),E=document.body;if(f){let z=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",P=g?"-10px":z,B=Ee.MIN_PRESENTING_SCALE,I=`translateY(${P}) scale(${B})`;w.afterStyles({transform:I}).beforeAddWrite(()=>E.style.setProperty("background-color","black")).addElement(n).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"},{offset:1,filter:"contrast(0.85)",transform:I,borderRadius:"10px 10px 0 0"}]),p.addAnimation(w)}else if(p.addAnimation(a),!g)s.fromTo("opacity","0","1");else{let P=`translateY(-10px) scale(${g?Ee.MIN_PRESENTING_SCALE:1})`;w.afterStyles({transform:P}).addElement(y.querySelector(".modal-wrapper")).keyframes([{offset:0,filter:"contrast(1)",transform:"translateY(0) scale(1)"},{offset:1,filter:"contrast(0.85)",transform:P}]);let B=N().afterStyles({transform:P}).addElement(y.querySelector(".modal-shadow")).keyframes([{offset:0,opacity:"1",transform:"translateY(0) scale(1)"},{offset:1,opacity:"0",transform:P}]);p.addAnimation([w,B])}}else p.addAnimation(a);return p},xi=()=>{let o=N().fromTo("opacity","var(--backdrop-opacity)",0),e=N().fromTo("transform","translateY(0vh)","translateY(100vh)");return{backdropAnimation:o,wrapperAnimation:e}},Ao=(o,e,n=500)=>{let{presentingEl:t,currentBreakpoint:i}=e,r=ie(o),{wrapperAnimation:s,backdropAnimation:a}=i!==void 0?Fo(e):xi();a.addElement(r.querySelector("ion-backdrop")),s.addElement(r.querySelectorAll(".modal-wrapper, .modal-shadow")).beforeStyles({opacity:1});let l=N("leaving-base").addElement(o).easing("cubic-bezier(0.32,0.72,0,1)").duration(n).addAnimation(s);if(t){let p=window.innerWidth<768,f=t.tagName==="ION-MODAL"&&t.presentingElement!==void 0,g=ie(t),y=N().beforeClearStyles(["transform"]).afterClearStyles(["transform"]).onFinish(E=>{if(E!==1)return;t.style.setProperty("overflow",""),Array.from(w.querySelectorAll("ion-modal:not(.overlay-hidden)")).filter(P=>P.presentingElement!==void 0).length<=1&&w.style.setProperty("background-color","")}),w=document.body;if(p){let E=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",z=f?"-10px":E,P=Ee.MIN_PRESENTING_SCALE,B=`translateY(${z}) scale(${P})`;y.addElement(t).keyframes([{offset:0,filter:"contrast(0.85)",transform:B,borderRadius:"10px 10px 0 0"},{offset:1,filter:"contrast(1)",transform:"translateY(0px) scale(1)",borderRadius:"0px"}]),l.addAnimation(y)}else if(l.addAnimation(a),!f)s.fromTo("opacity","1","0");else{let z=`translateY(-10px) scale(${f?Ee.MIN_PRESENTING_SCALE:1})`;y.addElement(g.querySelector(".modal-wrapper")).afterStyles({transform:"translate3d(0, 0, 0)"}).keyframes([{offset:0,filter:"contrast(0.85)",transform:z},{offset:1,filter:"contrast(1)",transform:"translateY(0) scale(1)"}]);let P=N().addElement(g.querySelector(".modal-shadow")).afterStyles({transform:"translateY(0) scale(1)"}).keyframes([{offset:0,opacity:"0",transform:z},{offset:1,opacity:"1",transform:"translateY(0) scale(1)"}]);l.addAnimation([y,P])}}else l.addAnimation(a);return l},Si=(o,e,n=300)=>{let{presentingEl:t}=e;if(!t)return N("portrait-to-landscape-transition");let i=t.tagName==="ION-MODAL"&&t.presentingElement!==void 0,r=ie(t),s=document.body,a=N("portrait-to-landscape-transition").addElement(o).easing("cubic-bezier(0.32,0.72,0,1)").duration(n),l=N().beforeStyles({transform:"translateY(0)","transform-origin":"top center",overflow:"hidden"});if(i){let f=`translateY(-10px) scale(${Ee.MIN_PRESENTING_SCALE})`,g="translateY(0px) scale(1)";l.addElement(t).afterStyles({transform:g}).fromTo("transform",f,g).fromTo("filter","contrast(0.85)","contrast(1)");let y=N().addElement(r.querySelector(".modal-shadow")).afterStyles({transform:g,opacity:"0"}).fromTo("transform",f,g);a.addAnimation([l,y])}else{let p=ie(o),f=N().addElement(p.querySelectorAll(".modal-wrapper, .modal-shadow")).fromTo("opacity","1","1"),g=N().addElement(p.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)","var(--backdrop-opacity)"),y=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",w=Ee.MIN_PRESENTING_SCALE,E=`translateY(${y}) scale(${w})`;l.addElement(t).afterStyles({transform:"translateY(0px) scale(1)","border-radius":"0px"}).beforeAddWrite(()=>s.style.setProperty("background-color","")).fromTo("transform",E,"translateY(0px) scale(1)").fromTo("filter","contrast(0.85)","contrast(1)").fromTo("border-radius","10px 10px 0 0","0px"),a.addAnimation([l,f,g])}return a},_i=(o,e,n=300)=>{let{presentingEl:t}=e;if(!t)return N("landscape-to-portrait-transition");let i=t.tagName==="ION-MODAL"&&t.presentingElement!==void 0,r=ie(t),s=document.body,a=N("landscape-to-portrait-transition").addElement(o).easing("cubic-bezier(0.32,0.72,0,1)").duration(n),l=N().beforeStyles({transform:"translateY(0)","transform-origin":"top center",overflow:"hidden"});if(i){let f=`translateY(-10px) scale(${Ee.MIN_PRESENTING_SCALE})`,g="translateY(0) scale(1)";l.addElement(t).afterStyles({transform:g}).fromTo("transform",f,g);let y=N().addElement(r.querySelector(".modal-shadow")).afterStyles({transform:g,opacity:"0"}).fromTo("transform",f,g);a.addAnimation([l,y])}else{let p=ie(o),f=N().addElement(p.querySelectorAll(".modal-wrapper, .modal-shadow")).fromTo("opacity","1","1"),g=N().addElement(p.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)","var(--backdrop-opacity)"),y=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",w=Ee.MIN_PRESENTING_SCALE,E=`translateY(${y}) scale(${w})`;l.addElement(t).afterStyles({transform:E}).beforeAddWrite(()=>s.style.setProperty("background-color","black")).keyframes([{offset:0,transform:"translateY(0px) scale(1)",filter:"contrast(1)",borderRadius:"0px"},{offset:.2,transform:"translateY(0px) scale(1)",filter:"contrast(1)",borderRadius:"10px 10px 0 0"},{offset:1,transform:E,filter:"contrast(0.85)",borderRadius:"10px 10px 0 0"}]),a.addAnimation([l,f,g])}return a},Mi=()=>{let o=N().fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),e=N().keyframes([{offset:0,opacity:.01,transform:"translateY(40px)"},{offset:1,opacity:1,transform:"translateY(0px)"}]);return{backdropAnimation:o,wrapperAnimation:e,contentAnimation:void 0}},Pi=(o,e)=>{let{currentBreakpoint:n,expandToScroll:t}=e,i=ie(o),{wrapperAnimation:r,backdropAnimation:s,contentAnimation:a}=n!==void 0?Oo(e):Mi();s.addElement(i.querySelector("ion-backdrop")),r.addElement(i.querySelector(".modal-wrapper")),!t&&a?.addElement(o.querySelector(".ion-page"));let l=N().addElement(o).easing("cubic-bezier(0.36,0.66,0.04,1)").duration(280).addAnimation([s,r]);return a&&l.addAnimation(a),l},ji=()=>{let o=N().fromTo("opacity","var(--backdrop-opacity)",0),e=N().keyframes([{offset:0,opacity:.99,transform:"translateY(0px)"},{offset:1,opacity:0,transform:"translateY(40px)"}]);return{backdropAnimation:o,wrapperAnimation:e}},Ai=(o,e)=>{let{currentBreakpoint:n}=e,t=ie(o),{wrapperAnimation:i,backdropAnimation:r}=n!==void 0?Fo(e):ji();return r.addElement(t.querySelector("ion-backdrop")),i.addElement(t.querySelector(".modal-wrapper")),N().easing("cubic-bezier(0.47,0,0.745,0.715)").duration(200).addAnimation([r,i])},Ri=(o,e,n,t,i,r,s=[],a,l,p,f)=>{let g=[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1,opacity:.01}],y=[{offset:0,opacity:"var(--backdrop-opacity)"},{offset:1-i,opacity:0},{offset:1,opacity:0}],w={WRAPPER_KEYFRAMES:[{offset:0,transform:"translateY(0%)"},{offset:1,transform:"translateY(100%)"}],BACKDROP_KEYFRAMES:i!==0?y:g,CONTENT_KEYFRAMES:[{offset:0,maxHeight:"100%"},{offset:1,maxHeight:"0%"}]},E=o.querySelector("ion-content"),z=n.clientHeight,P=t,B=0,I=!1,h=null,S=null,R=null,M=null,H=.95,C=s[s.length-1],Y=s[0],j=r.childAnimations.find(O=>O.id==="wrapperAnimation"),T=r.childAnimations.find(O=>O.id==="backdropAnimation"),k=r.childAnimations.find(O=>O.id==="contentAnimation"),F=()=>{let O=o;O.focusTrap===!1||O.showBackdrop===!1||(o.style.setProperty("pointer-events","auto"),e.style.setProperty("pointer-events","auto"),o.classList.remove(Ge))},te=()=>{o.style.setProperty("pointer-events","none"),e.style.setProperty("pointer-events","none"),o.classList.add(Ge)},K=O=>{if(!S&&(S=Array.from(o.querySelectorAll("ion-footer")),!S.length))return;let D=o.querySelector(".ion-page");if(M=O,O==="stationary")S.forEach(X=>{X.classList.remove("modal-footer-moving"),X.style.removeProperty("position"),X.style.removeProperty("width"),X.style.removeProperty("height"),X.style.removeProperty("top"),X.style.removeProperty("left"),D?.style.removeProperty("padding-bottom"),D?.appendChild(X)});else{let X=0;S.forEach((G,re)=>{let ne=G.getBoundingClientRect(),m=document.body.getBoundingClientRect();X+=G.clientHeight;let v=ne.top-m.top,u=ne.left-m.left;if(G.style.setProperty("--pinned-width",`${G.clientWidth}px`),G.style.setProperty("--pinned-height",`${G.clientHeight}px`),G.style.setProperty("--pinned-top",`${v}px`),G.style.setProperty("--pinned-left",`${u}px`),re===0){R=v;let b=o.querySelector("ion-header");b&&(R-=b.clientHeight)}}),S.forEach(G=>{D?.style.setProperty("padding-bottom",`${X}px`),G.classList.add("modal-footer-moving"),G.style.setProperty("position","absolute"),G.style.setProperty("width","var(--pinned-width)"),G.style.setProperty("height","var(--pinned-height)"),G.style.setProperty("top","var(--pinned-top)"),G.style.setProperty("left","var(--pinned-left)"),document.body.appendChild(G)})}};j&&T&&(j.keyframes([...w.WRAPPER_KEYFRAMES]),T.keyframes([...w.BACKDROP_KEYFRAMES]),k?.keyframes([...w.CONTENT_KEYFRAMES]),r.progressStart(!0,1-P),P>i&&o.focusTrap!==!1&&o.showBackdrop!==!1?F():te()),E&&P!==C&&a&&(E.scrollY=!1);let W=O=>{let D=Ft(O.event.target);if(P=l(),!a&&D)return(qe(D)?ie(D).querySelector(".inner-scroll"):D).scrollTop===0;if(P===1&&D){let X=qe(D)?ie(D).querySelector(".inner-scroll"):D;return!!!D.querySelector("ion-refresher")&&X.scrollTop===0}return!0},x=O=>{if(I=o.canDismiss!==void 0&&o.canDismiss!==!0&&Y===0,!a){let D=Ft(O.event.target);h=D&&qe(D)?ie(D).querySelector(".inner-scroll"):D}a||K("moving"),O.deltaY>0&&E&&(E.scrollY=!1),be(()=>{o.focus()}),r.progressStart(!0,1-P)},c=O=>{if(!a&&R!==null&&M!==null&&(O.currentY>=R&&M==="moving"?K("stationary"):O.currentY<R&&M==="stationary"&&K("moving")),!a&&O.deltaY<=0&&h)return;O.deltaY>0&&E&&(E.scrollY=!1);let D=1-P,X=s.length>1?1-s[1]:void 0,G=D+O.deltaY/z,re=X!==void 0&&G>=X&&I,ne=re?H:.9999,m=re&&X!==void 0?X+fn((G-X)/(ne-X)):G;B=ot(1e-4,m,ne),r.progressStep(B)},d=O=>{if(!a&&O.deltaY<=0&&h&&h.scrollTop>0){K("stationary");return}let D=O.velocityY,X=(O.deltaY+D*350)/z,G=P-X,re=s.reduce((ne,m)=>Math.abs(m-G)<Math.abs(ne-G)?m:ne);_({breakpoint:re,breakpointOffset:B,canDismiss:I,animated:!0})},_=O=>{let{breakpoint:D,canDismiss:X,breakpointOffset:G,animated:re}=O,ne=X&&D===0,m=ne?P:D,v=m!==0;return P=0,j&&T&&(j.keyframes([{offset:0,transform:`translateY(${G*100}%)`},{offset:1,transform:`translateY(${(1-m)*100}%)`}]),T.keyframes([{offset:0,opacity:`calc(var(--backdrop-opacity) * ${un(1-G,i)})`},{offset:1,opacity:`calc(var(--backdrop-opacity) * ${un(m,i)})`}]),k&&k.keyframes([{offset:0,maxHeight:`${(1-G)*100}%`},{offset:1,maxHeight:`${m*100}%`}]),r.progressStep(0)),$.enable(!1),ne?$o(o,r):v||p(),E&&(m===s[s.length-1]||!a)&&(E.scrollY=!0),!a&&m===0&&K("stationary"),new Promise(u=>{r.onFinish(()=>{v?(a||K("stationary"),j&&T?be(()=>{j.keyframes([...w.WRAPPER_KEYFRAMES]),T.keyframes([...w.BACKDROP_KEYFRAMES]),k?.keyframes([...w.CONTENT_KEYFRAMES]),r.progressStart(!0,1-m),P=m,f(P),P>i&&o.focusTrap!==!1&&o.showBackdrop!==!1?F():te(),$.enable(!0),u()}):($.enable(!0),u())):u()},{oneTimeCallback:!0}).progressEnd(1,0,re?500:0)})},$=Tt({el:n,gestureName:"modalSheet",gesturePriority:40,direction:"y",threshold:10,canStart:W,onStart:x,onMove:c,onEnd:d});return{gesture:$,moveSheetToBreakpoint:_}},$i=':host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, var(--ion-background-color-step-350, #c0c0be));cursor:pointer;z-index:11}.modal-handle::before{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:""}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host(.modal-sheet.modal-no-expand-scroll) ion-footer{position:absolute;bottom:0;width:var(--width)}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.4)}:host(.modal-card),:host(.modal-sheet){--border-radius:10px}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:10px}}.modal-wrapper{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0)}@media screen and (max-width: 767px){@supports (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - max(30px, var(--ion-safe-area-top)) - 10px)}}@supports not (width: max(0px, 1px)){:host(.modal-card){--height:calc(100% - 40px)}}:host(.modal-card) .modal-wrapper{border-start-start-radius:var(--border-radius);border-start-end-radius:var(--border-radius);border-end-end-radius:0;border-end-start-radius:0}:host(.modal-card){--backdrop-opacity:0;--width:100%;-ms-flex-align:end;align-items:flex-end}:host(.modal-card) .modal-shadow{display:none}:host(.modal-card) ion-backdrop{pointer-events:none}}@media screen and (min-width: 768px){:host(.modal-card){--width:calc(100% - 120px);--height:calc(100% - (120px + var(--ion-safe-area-top) + var(--ion-safe-area-bottom)));--max-width:720px;--max-height:1000px;--backdrop-opacity:0;--box-shadow:0px 0px 30px 10px rgba(0, 0, 0, 0.1);-webkit-transition:all 0.5s ease-in-out;transition:all 0.5s ease-in-out}:host(.modal-card) .modal-wrapper{-webkit-box-shadow:none;box-shadow:none}:host(.modal-card) .modal-shadow{-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow)}}:host(.modal-sheet) .modal-wrapper{border-start-start-radius:var(--border-radius);border-start-end-radius:var(--border-radius);border-end-end-radius:0;border-end-start-radius:0}',Oi=':host{--width:100%;--min-width:auto;--max-width:auto;--height:100%;--min-height:auto;--max-height:auto;--overflow:hidden;--border-radius:0;--border-width:0;--border-style:none;--border-color:transparent;--background:var(--ion-background-color, #fff);--box-shadow:none;--backdrop-opacity:0;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:absolute;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);contain:strict}.modal-wrapper,ion-backdrop{pointer-events:auto}:host(.overlay-hidden){display:none}.modal-wrapper,.modal-shadow{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:var(--overflow);z-index:10}.modal-shadow{position:absolute;background:transparent}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--width:600px;--height:500px;--ion-safe-area-top:0px;--ion-safe-area-bottom:0px;--ion-safe-area-right:0px;--ion-safe-area-left:0px}}@media only screen and (min-width: 768px) and (min-height: 768px){:host{--width:600px;--height:600px}}.modal-handle{left:0px;right:0px;top:5px;border-radius:8px;-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;position:absolute;width:36px;height:5px;-webkit-transform:translateZ(0);transform:translateZ(0);border:0;background:var(--ion-color-step-350, var(--ion-background-color-step-350, #c0c0be));cursor:pointer;z-index:11}.modal-handle::before{-webkit-padding-start:4px;padding-inline-start:4px;-webkit-padding-end:4px;padding-inline-end:4px;padding-top:4px;padding-bottom:4px;position:absolute;width:36px;height:5px;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);content:""}:host(.modal-sheet){--height:calc(100% - (var(--ion-safe-area-top) + 10px))}:host(.modal-sheet) .modal-wrapper,:host(.modal-sheet) .modal-shadow{position:absolute;bottom:0}:host(.modal-sheet.modal-no-expand-scroll) ion-footer{position:absolute;bottom:0;width:var(--width)}:host{--backdrop-opacity:var(--ion-backdrop-opacity, 0.32)}@media only screen and (min-width: 768px) and (min-height: 600px){:host{--border-radius:2px;--box-shadow:0 28px 48px rgba(0, 0, 0, 0.4)}}.modal-wrapper{-webkit-transform:translate3d(0,  40px,  0);transform:translate3d(0,  40px,  0);opacity:0.01}',Lo=Ze(class extends Be{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.didPresent=oe(this,"ionModalDidPresent",7),this.willPresent=oe(this,"ionModalWillPresent",7),this.willDismiss=oe(this,"ionModalWillDismiss",7),this.didDismiss=oe(this,"ionModalDidDismiss",7),this.ionBreakpointDidChange=oe(this,"ionBreakpointDidChange",7),this.didPresentShorthand=oe(this,"didPresent",7),this.willPresentShorthand=oe(this,"willPresent",7),this.willDismissShorthand=oe(this,"willDismiss",7),this.didDismissShorthand=oe(this,"didDismiss",7),this.ionMount=oe(this,"ionMount",7),this.lockController=zt(),this.triggerController=so(),this.coreDelegate=Mt(),this.isSheetModal=!1,this.inheritedAttributes={},this.inline=!1,this.gestureAnimationDismissing=!1,this.presented=!1,this.hasController=!1,this.keyboardClose=!0,this.expandToScroll=!0,this.backdropBreakpoint=0,this.handleBehavior="none",this.backdropDismiss=!0,this.showBackdrop=!0,this.animated=!0,this.isOpen=!1,this.keepContentsMounted=!1,this.focusTrap=!0,this.canDismiss=!0,this.onHandleClick=()=>{let{sheetTransition:n,handleBehavior:t}=this;t!=="cycle"||n!==void 0||this.moveToNextBreakpoint()},this.onBackdropTap=()=>{let{sheetTransition:n}=this;n===void 0&&this.dismiss(void 0,$t)},this.onLifecycle=n=>{let t=this.usersElement,i=Fi[n.type];if(t&&i){let r=new CustomEvent(i,{bubbles:!1,cancelable:!1,detail:n.detail});t.dispatchEvent(r)}},this.onModalFocus=n=>{let{dragHandleEl:t,el:i}=this;n.target===i&&t&&t.tabIndex!==-1&&t.focus()},this.onSlotChange=({target:n})=>{n.assignedElements().forEach(i=>{i.querySelectorAll("ion-modal").forEach(r=>{r.getAttribute("data-parent-ion-modal")===null&&r.setAttribute("data-parent-ion-modal",this.el.id)})})}}onIsOpenChange(e,n){e===!0&&n===!1?this.present():e===!1&&n===!0&&this.dismiss()}triggerChanged(){let{trigger:e,el:n,triggerController:t}=this;e&&t.addClickListener(n,e)}onWindowResize(){ce(this)!=="ios"||!this.presentingElement||this.enterAnimation||this.leaveAnimation||(clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>{this.handleViewTransition()},50))}breakpointsChanged(e){e!==void 0&&(this.sortedBreakpoints=e.sort((n,t)=>n-t))}connectedCallback(){let{el:e}=this;Pt(e),this.triggerChanged()}disconnectedCallback(){this.triggerController.removeClickListener(),this.cleanupViewTransitionListener(),this.cleanupParentRemovalObserver()}componentWillLoad(){var e;let{breakpoints:n,initialBreakpoint:t,el:i,htmlAttributes:r}=this,s=this.isSheetModal=n!==void 0&&t!==void 0,a=["aria-label","role"];this.inheritedAttributes=Qn(i,a),i.parentNode&&(this.cachedOriginalParent=i.parentNode),r!==void 0&&a.forEach(l=>{r[l]&&(this.inheritedAttributes=Object.assign(Object.assign({},this.inheritedAttributes),{[l]:r[l]}),delete r[l])}),s&&(this.currentBreakpoint=this.initialBreakpoint),n!==void 0&&t!==void 0&&!n.includes(t)&&Ye("[ion-modal] - Your breakpoints array must include the initialBreakpoint value."),!((e=this.htmlAttributes)===null||e===void 0)&&e.id||jt(this.el)}componentDidLoad(){this.isOpen===!0&&be(()=>this.present()),this.breakpointsChanged(this.breakpoints),this.triggerChanged()}getDelegate(e=!1){if(this.workingDelegate&&!e)return{delegate:this.workingDelegate,inline:this.inline};let n=this.el.parentNode,t=this.inline=n!==null&&!this.hasController,i=this.workingDelegate=t?this.delegate||this.coreDelegate:this.delegate;return{inline:t,delegate:i}}async checkCanDismiss(e,n){let{canDismiss:t}=this;return typeof t=="function"?t(e,n):t}async present(){let e=await this.lockController.lock();if(this.presented){e();return}let{presentingElement:n,el:t}=this;this.currentBreakpoint=this.initialBreakpoint;let{inline:i,delegate:r}=this.getDelegate(!0);this.ionMount.emit(),this.usersElement=await St(r,t,this.component,["ion-page"],this.componentProps,i),Et(t)?await kt(this.usersElement):this.keepContentsMounted||await wt(),rn(()=>this.el.classList.add("show-modal"));let s=n!==void 0;s&&ce(this)==="ios"&&(this.statusBarStyle=await mn.getStyle(),Ro()),await At(this,"modalEnter",jo,Pi,{presentingEl:n,currentBreakpoint:this.initialBreakpoint,backdropBreakpoint:this.backdropBreakpoint,expandToScroll:this.expandToScroll}),typeof window<"u"&&(this.keyboardOpenCallback=()=>{this.gesture&&(this.gesture.enable(!1),be(()=>{this.gesture&&this.gesture.enable(!0)}))},window.addEventListener(dn,this.keyboardOpenCallback)),this.isSheetModal?this.initSheetGesture():s&&this.initSwipeToClose(),this.initViewTransitionListener(),this.initParentRemovalObserver(),e()}initSwipeToClose(){var e;if(ce(this)!=="ios")return;let{el:n}=this,t=this.leaveAnimation||sn.get("modalLeave",Ao),i=this.animation=t(n,{presentingEl:this.presentingElement,expandToScroll:this.expandToScroll});if(!po(n)){fo(n);return}let s=(e=this.statusBarStyle)!==null&&e!==void 0?e:rt.Default;this.gesture=Di(n,i,s,()=>{this.gestureAnimationDismissing=!0,pn(this.statusBarStyle),this.animation.onFinish(async()=>{await this.dismiss(void 0,it),this.gestureAnimationDismissing=!1})}),this.gesture.enable(!0)}initSheetGesture(){let{wrapperEl:e,initialBreakpoint:n,backdropBreakpoint:t}=this;if(!e||n===void 0)return;let i=this.enterAnimation||sn.get("modalEnter",jo),r=this.animation=i(this.el,{presentingEl:this.presentingElement,currentBreakpoint:n,backdropBreakpoint:t,expandToScroll:this.expandToScroll});r.progressStart(!0,1);let{gesture:s,moveSheetToBreakpoint:a}=Ri(this.el,this.backdropEl,e,n,t,r,this.sortedBreakpoints,this.expandToScroll,()=>{var l;return(l=this.currentBreakpoint)!==null&&l!==void 0?l:0},()=>this.sheetOnDismiss(),l=>{this.currentBreakpoint!==l&&(this.currentBreakpoint=l,this.ionBreakpointDidChange.emit({breakpoint:l}))});this.gesture=s,this.moveSheetToBreakpoint=a,this.gesture.enable(!0)}sheetOnDismiss(){this.gestureAnimationDismissing=!0,this.animation.onFinish(async()=>{this.currentBreakpoint=0,this.ionBreakpointDidChange.emit({breakpoint:this.currentBreakpoint}),await this.dismiss(void 0,it),this.gestureAnimationDismissing=!1})}async dismiss(e,n){var t;if(this.gestureAnimationDismissing&&n!==it)return!1;let i=await this.lockController.lock();if(await this.dismissNestedModals(),n!=="handler"&&!await this.checkCanDismiss(e,n))return i(),!1;let{presentingElement:r}=this;r!==void 0&&ce(this)==="ios"&&pn(this.statusBarStyle),typeof window<"u"&&this.keyboardOpenCallback&&(window.removeEventListener(dn,this.keyboardOpenCallback),this.keyboardOpenCallback=void 0);let a=await Rt(this,e,n,"modalLeave",Ao,Ai,{presentingEl:r,currentBreakpoint:(t=this.currentBreakpoint)!==null&&t!==void 0?t:this.initialBreakpoint,backdropBreakpoint:this.backdropBreakpoint,expandToScroll:this.expandToScroll});if(a){let{delegate:l}=this.getDelegate();await _t(l,this.usersElement),rn(()=>this.el.classList.remove("show-modal")),this.animation&&this.animation.destroy(),this.gesture&&this.gesture.destroy(),this.cleanupViewTransitionListener(),this.cleanupParentRemovalObserver()}return this.currentBreakpoint=void 0,this.animation=void 0,i(),a}onDidDismiss(){return We(this.el,"ionModalDidDismiss")}onWillDismiss(){return We(this.el,"ionModalWillDismiss")}async setCurrentBreakpoint(e){if(!this.isSheetModal){Ye("[ion-modal] - setCurrentBreakpoint is only supported on sheet modals.");return}if(!this.breakpoints.includes(e)){Ye(`[ion-modal] - Attempted to set invalid breakpoint value ${e}. Please double check that the breakpoint value is part of your defined breakpoints.`);return}let{currentBreakpoint:n,moveSheetToBreakpoint:t,canDismiss:i,breakpoints:r,animated:s}=this;n!==e&&t&&(this.sheetTransition=t({breakpoint:e,breakpointOffset:1-n,canDismiss:i!==void 0&&i!==!0&&r[0]===0,animated:s}),await this.sheetTransition,this.sheetTransition=void 0)}async getCurrentBreakpoint(){return this.currentBreakpoint}async moveToNextBreakpoint(){let{breakpoints:e,currentBreakpoint:n}=this;if(!e||n==null)return!1;let t=e.filter(a=>a!==0),r=(t.indexOf(n)+1)%t.length,s=t[r];return await this.setCurrentBreakpoint(s),!0}initViewTransitionListener(){ce(this)!=="ios"||!this.presentingElement||this.enterAnimation||this.leaveAnimation||(this.currentViewIsPortrait=window.innerWidth<768)}handleViewTransition(){let e=window.innerWidth<768;if(this.currentViewIsPortrait===e)return;this.viewTransitionAnimation&&(this.viewTransitionAnimation.destroy(),this.viewTransitionAnimation=void 0);let{presentingElement:n}=this;if(!n)return;let t;this.currentViewIsPortrait&&!e?t=Si(this.el,{presentingEl:n}):t=_i(this.el,{presentingEl:n}),this.currentViewIsPortrait=e,this.viewTransitionAnimation=t,t.play().then(()=>{this.viewTransitionAnimation=void 0,this.reinitSwipeToClose()})}cleanupViewTransitionListener(){this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=void 0),this.viewTransitionAnimation&&(this.viewTransitionAnimation.destroy(),this.viewTransitionAnimation=void 0)}reinitSwipeToClose(){ce(this)!=="ios"||!this.presentingElement||(this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.animation&&(this.animation.progressEnd(0,0,0),this.animation.destroy(),this.animation=void 0),be(()=>{this.ensureCorrectModalPosition(),this.initSwipeToClose()}))}ensureCorrectModalPosition(){let{el:e,presentingElement:n}=this,i=ie(e).querySelector(".modal-wrapper");if(i&&(i.style.transform="translateY(0vh)",i.style.opacity="1"),n?.tagName==="ION-MODAL")if(window.innerWidth<768){let s=CSS.supports("width","max(0px, 1px)")?"max(30px, var(--ion-safe-area-top))":"30px",a=Ee.MIN_PRESENTING_SCALE;n.style.transform=`translateY(${s}) scale(${a})`}else n.style.transform="translateY(0px) scale(1)"}async dismissNestedModals(){let e=document.querySelectorAll(`ion-modal[data-parent-ion-modal="${this.el.id}"]`);e?.forEach(async n=>{await n.dismiss(void 0,"parent-dismissed")})}initParentRemovalObserver(){typeof MutationObserver>"u"||typeof window>"u"||!this.cachedOriginalParent||this.cachedOriginalParent.nodeType===Node.DOCUMENT_NODE||this.cachedOriginalParent.nodeType===Node.DOCUMENT_FRAGMENT_NODE||(this.parentRemovalObserver=new MutationObserver(e=>{e.forEach(n=>{if(n.type==="childList"&&n.removedNodes.length>0){let t=Array.from(n.removedNodes).some(r=>{var s,a;let l=r===this.cachedOriginalParent,p=this.cachedOriginalParent?(a=(s=r).contains)===null||a===void 0?void 0:a.call(s,this.cachedOriginalParent):!1;return l||p}),i=this.cachedOriginalParent&&!this.cachedOriginalParent.isConnected;(t||i)&&(this.dismiss(void 0,"parent-removed"),this.cachedOriginalParent=void 0)}})}),this.parentRemovalObserver.observe(document.body,{childList:!0,subtree:!0}))}cleanupParentRemovalObserver(){var e;(e=this.parentRemovalObserver)===null||e===void 0||e.disconnect(),this.parentRemovalObserver=void 0}render(){let{handle:e,isSheetModal:n,presentingElement:t,htmlAttributes:i,handleBehavior:r,inheritedAttributes:s,focusTrap:a,expandToScroll:l}=this,p=e!==!1&&n,f=ce(this),g=t!==void 0&&f==="ios",y=r==="cycle";return ae(He,Object.assign({key:"9e9a7bd591eb17a225a00b4fa2e379e94601d17f","no-router":!0,tabIndex:y&&(n&&p)?0:-1},i,{style:{zIndex:`${2e4+this.overlayIndex}`},class:Object.assign({[f]:!0,"modal-default":!g&&!n,"modal-card":g,"modal-sheet":n,"modal-no-expand-scroll":n&&!l,"overlay-hidden":!0,[Ge]:a===!1},xt(this.cssClass)),onIonBackdropTap:this.onBackdropTap,onIonModalDidPresent:this.onLifecycle,onIonModalWillPresent:this.onLifecycle,onIonModalWillDismiss:this.onLifecycle,onIonModalDidDismiss:this.onLifecycle,onFocus:this.onModalFocus}),ae("ion-backdrop",{key:"e5eae2c14f830f75e308fcd7f4c10c86fac5b962",ref:E=>this.backdropEl=E,visible:this.showBackdrop,tappable:this.backdropDismiss,part:"backdrop"}),f==="ios"&&ae("div",{key:"e268f9cd310c3cf4e051b5b92524ce4fb70d005e",class:"modal-shadow"}),ae("div",Object.assign({key:"9c380f36c18144c153077b15744d1c3346bce63e",role:"dialog"},s,{"aria-modal":"true",class:"modal-wrapper ion-overlay-wrapper",part:"content",ref:E=>this.wrapperEl=E}),p&&ae("button",{key:"2d5ee6d5959d97309c306e8ce72eb0f2c19be144",class:"modal-handle",tabIndex:y?0:-1,"aria-label":"Activate to adjust the size of the dialog overlaying the screen",onClick:y?this.onHandleClick:void 0,part:"handle",ref:E=>this.dragHandleEl=E}),ae("slot",{key:"5590434c35ea04c42fc006498bc189038e15a298",onSlotchange:this.onSlotChange})))}get el(){return this}static get watchers(){return{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}}static get style(){return{ios:$i,md:Oi}}},[289,"ion-modal",{hasController:[4,"has-controller"],overlayIndex:[2,"overlay-index"],delegate:[16],keyboardClose:[4,"keyboard-close"],enterAnimation:[16],leaveAnimation:[16],breakpoints:[16],expandToScroll:[4,"expand-to-scroll"],initialBreakpoint:[2,"initial-breakpoint"],backdropBreakpoint:[2,"backdrop-breakpoint"],handle:[4],handleBehavior:[1,"handle-behavior"],component:[1],componentProps:[16],cssClass:[1,"css-class"],backdropDismiss:[4,"backdrop-dismiss"],showBackdrop:[4,"show-backdrop"],animated:[4],presentingElement:[16],htmlAttributes:[16],isOpen:[4,"is-open"],trigger:[1],keepContentsMounted:[4,"keep-contents-mounted"],focusTrap:[4,"focus-trap"],canDismiss:[4,"can-dismiss"],presented:[32],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64],setCurrentBreakpoint:[64],getCurrentBreakpoint:[64]},[[9,"resize","onWindowResize"]],{isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}]),Fi={ionModalDidPresent:"ionViewDidEnter",ionModalWillPresent:"ionViewWillEnter",ionModalWillDismiss:"ionViewWillLeave",ionModalDidDismiss:"ionViewDidLeave"};function No(){if(typeof customElements>"u")return;["ion-modal","ion-backdrop"].forEach(e=>{switch(e){case"ion-modal":customElements.get(e)||customElements.define(e,Lo);break;case"ion-backdrop":customElements.get(e)||Bt();break}})}var zo=No;var Li=o=>{if(!o)return{arrowWidth:0,arrowHeight:0};let{width:e,height:n}=o.getBoundingClientRect();return{arrowWidth:e,arrowHeight:n}},Ho=(o,e,n)=>{let t=e.getBoundingClientRect(),i=t.height,r=t.width;return o==="cover"&&n&&(r=n.getBoundingClientRect().width),{contentWidth:r,contentHeight:i}},Ni=(o,e,n,t)=>{let i=[],s=ie(t).querySelector(".popover-content");switch(e){case"hover":i=[{eventName:"mouseenter",callback:a=>{document.elementFromPoint(a.clientX,a.clientY)!==o&&n.dismiss(void 0,void 0,!1)}}];break;case"context-menu":case"click":default:i=[{eventName:"click",callback:a=>{if(a.target.closest("[data-ion-popover-trigger]")===o){a.stopPropagation();return}n.dismiss(void 0,void 0,!1)}}];break}return i.forEach(({eventName:a,callback:l})=>s.addEventListener(a,l)),()=>{i.forEach(({eventName:a,callback:l})=>s.removeEventListener(a,l))}},zi=(o,e,n)=>{let t=[];switch(e){case"hover":let i;t=[{eventName:"mouseenter",callback:async r=>{r.stopPropagation(),i&&clearTimeout(i),i=setTimeout(()=>{be(()=>{n.presentFromTrigger(r),i=void 0})},100)}},{eventName:"mouseleave",callback:r=>{i&&clearTimeout(i);let s=r.relatedTarget;s&&s.closest("ion-popover")!==n&&n.dismiss(void 0,void 0,!1)}},{eventName:"click",callback:r=>r.stopPropagation()},{eventName:"ionPopoverActivateTrigger",callback:r=>n.presentFromTrigger(r,!0)}];break;case"context-menu":t=[{eventName:"contextmenu",callback:r=>{r.preventDefault(),n.presentFromTrigger(r)}},{eventName:"click",callback:r=>r.stopPropagation()},{eventName:"ionPopoverActivateTrigger",callback:r=>n.presentFromTrigger(r,!0)}];break;case"click":default:t=[{eventName:"click",callback:r=>n.presentFromTrigger(r)},{eventName:"ionPopoverActivateTrigger",callback:r=>n.presentFromTrigger(r,!0)}];break}return t.forEach(({eventName:i,callback:r})=>o.addEventListener(i,r)),o.setAttribute("data-ion-popover-trigger","true"),()=>{t.forEach(({eventName:i,callback:r})=>o.removeEventListener(i,r)),o.removeAttribute("data-ion-popover-trigger")}},Zo=(o,e)=>!e||e.tagName!=="ION-ITEM"?-1:o.findIndex(n=>n===e),Bi=(o,e)=>{let n=Zo(o,e);return o[n+1]},Hi=(o,e)=>{let n=Zo(o,e);return o[n-1]},Ht=o=>{let n=ie(o).querySelector("button");n&&be(()=>n.focus())},Zi=o=>o.hasAttribute("data-ion-popover-trigger"),Yi=o=>{let e=async n=>{var t;let i=document.activeElement,r=[],s=(t=n.target)===null||t===void 0?void 0:t.tagName;if(!(s!=="ION-POPOVER"&&s!=="ION-ITEM")){try{r=Array.from(o.querySelectorAll("ion-item:not(ion-popover ion-popover *):not([disabled])"))}catch{}switch(n.key){case"ArrowLeft":await o.getParentPopover()&&o.dismiss(void 0,void 0,!1);break;case"ArrowDown":n.preventDefault();let l=Bi(r,i);l!==void 0&&Ht(l);break;case"ArrowUp":n.preventDefault();let p=Hi(r,i);p!==void 0&&Ht(p);break;case"Home":n.preventDefault();let f=r[0];f!==void 0&&Ht(f);break;case"End":n.preventDefault();let g=r[r.length-1];g!==void 0&&Ht(g);break;case"ArrowRight":case" ":case"Enter":if(i&&Zi(i)){let y=new CustomEvent("ionPopoverActivateTrigger");i.dispatchEvent(y)}break}}};return o.addEventListener("keydown",e),()=>o.removeEventListener("keydown",e)},Yo=(o,e,n,t,i,r,s,a,l,p,f)=>{var g;let y={top:0,left:0,width:0,height:0};switch(r){case"event":if(!f)return l;let R=f;y={top:R.clientY,left:R.clientX,width:1,height:1};break;case"trigger":default:let M=f,H=p||((g=M?.detail)===null||g===void 0?void 0:g.ionShadowTarget)||M?.target;if(!H)return l;let C=H.getBoundingClientRect();y={top:C.top,left:C.left,width:C.width,height:C.height};break}let w=qi(s,y,e,n,t,i,o),E=Ui(a,s,y,e,n),z=w.top+E.top,P=w.left+E.left,{arrowTop:B,arrowLeft:I}=Gi(s,t,i,z,P,e,n,o),{originX:h,originY:S}=Wi(s,a,o);return{top:z,left:P,referenceCoordinates:y,arrowTop:B,arrowLeft:I,originX:h,originY:S}},Wi=(o,e,n)=>{switch(o){case"top":return{originX:Bo(e),originY:"bottom"};case"bottom":return{originX:Bo(e),originY:"top"};case"left":return{originX:"right",originY:Zt(e)};case"right":return{originX:"left",originY:Zt(e)};case"start":return{originX:n?"left":"right",originY:Zt(e)};case"end":return{originX:n?"right":"left",originY:Zt(e)}}},Bo=o=>{switch(o){case"start":return"left";case"center":return"center";case"end":return"right"}},Zt=o=>{switch(o){case"start":return"top";case"center":return"center";case"end":return"bottom"}},Gi=(o,e,n,t,i,r,s,a)=>{let l={arrowTop:t+s/2-e/2,arrowLeft:i+r-e/2},p={arrowTop:t+s/2-e/2,arrowLeft:i-e*1.5};switch(o){case"top":return{arrowTop:t+s,arrowLeft:i+r/2-e/2};case"bottom":return{arrowTop:t-n,arrowLeft:i+r/2-e/2};case"left":return l;case"right":return p;case"start":return a?p:l;case"end":return a?l:p;default:return{arrowTop:0,arrowLeft:0}}},qi=(o,e,n,t,i,r,s)=>{let a={top:e.top,left:e.left-n-i},l={top:e.top,left:e.left+e.width+i};switch(o){case"top":return{top:e.top-t-r,left:e.left};case"right":return l;case"bottom":return{top:e.top+e.height+r,left:e.left};case"left":return a;case"start":return s?l:a;case"end":return s?a:l}},Ui=(o,e,n,t,i)=>{switch(o){case"center":return Xi(e,n,t,i);case"end":return Vi(e,n,t,i);case"start":default:return{top:0,left:0}}},Vi=(o,e,n,t)=>{switch(o){case"start":case"end":case"left":case"right":return{top:-(t-e.height),left:0};case"top":case"bottom":default:return{top:0,left:-(n-e.width)}}},Xi=(o,e,n,t)=>{switch(o){case"start":case"end":case"left":case"right":return{top:-(t/2-e.height/2),left:0};case"top":case"bottom":default:return{top:0,left:-(n/2-e.width/2)}}},Wo=(o,e,n,t,i,r,s,a,l,p,f,g,y=0,w=0,E=0)=>{let z=y,P=w,B=n,I=e,h,S=p,R=f,M=!1,H=!1,C=g?g.top+g.height:r/2-a/2,Y=g?g.height:0,j=!1;return B<t+l?(B=t,M=!0,S="left"):s+t+B+l>i&&(H=!0,B=i-s-t,S="right"),C+Y+a>r&&(o==="top"||o==="bottom")&&(C-a>0?(I=Math.max(12,C-a-Y-(E-1)),z=I+a,R="bottom",j=!0):h=t),{top:I,left:B,bottom:h,originX:S,originY:R,checkSafeAreaLeft:M,checkSafeAreaRight:H,arrowTop:z,arrowLeft:P,addPopoverBottomClass:j}},Ki=(o,e=!1,n,t)=>!(!n&&!t||o!=="top"&&o!=="bottom"&&e),Qi=5,Ji=(o,e)=>{var n;let{event:t,size:i,trigger:r,reference:s,side:a,align:l}=e,p=o.ownerDocument,f=p.dir==="rtl",g=p.defaultView.innerWidth,y=p.defaultView.innerHeight,w=ie(o),E=w.querySelector(".popover-content"),z=w.querySelector(".popover-arrow"),P=r||((n=t?.detail)===null||n===void 0?void 0:n.ionShadowTarget)||t?.target,{contentWidth:B,contentHeight:I}=Ho(i,E,P),{arrowWidth:h,arrowHeight:S}=Li(z),R={top:y/2-I/2,left:g/2-B/2,originX:f?"right":"left",originY:"top"},M=Yo(f,B,I,h,S,s,a,l,R,r,t),H=i==="cover"?0:Qi,C=i==="cover"?0:25,{originX:Y,originY:j,top:T,left:k,bottom:F,checkSafeAreaLeft:te,checkSafeAreaRight:K,arrowTop:W,arrowLeft:x,addPopoverBottomClass:c}=Wo(a,M.top,M.left,H,g,y,B,I,C,M.originX,M.originY,M.referenceCoordinates,M.arrowTop,M.arrowLeft,S),d=N(),_=N(),$=N();return _.addElement(w.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),$.addElement(w.querySelector(".popover-arrow")).addElement(w.querySelector(".popover-content")).fromTo("opacity",.01,1),d.easing("ease").duration(100).beforeAddWrite(()=>{i==="cover"&&o.style.setProperty("--width",`${B}px`),c&&o.classList.add("popover-bottom"),F!==void 0&&E.style.setProperty("bottom",`${F}px`);let O=" + var(--ion-safe-area-left, 0)",D=" - var(--ion-safe-area-right, 0)",X=`${k}px`;if(te&&(X=`${k}px${O}`),K&&(X=`${k}px${D}`),E.style.setProperty("top",`calc(${T}px + var(--offset-y, 0))`),E.style.setProperty("left",`calc(${X} + var(--offset-x, 0))`),E.style.setProperty("transform-origin",`${j} ${Y}`),z!==null){let G=M.top!==T||M.left!==k;Ki(a,G,t,r)?(z.style.setProperty("top",`calc(${W}px + var(--offset-y, 0))`),z.style.setProperty("left",`calc(${x}px + var(--offset-x, 0))`)):z.style.setProperty("display","none")}}).addAnimation([_,$])},er=o=>{let e=ie(o),n=e.querySelector(".popover-content"),t=e.querySelector(".popover-arrow"),i=N(),r=N(),s=N();return r.addElement(e.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),s.addElement(e.querySelector(".popover-arrow")).addElement(e.querySelector(".popover-content")).fromTo("opacity",.99,0),i.easing("ease").afterAddWrite(()=>{o.style.removeProperty("--width"),o.classList.remove("popover-bottom"),n.style.removeProperty("top"),n.style.removeProperty("left"),n.style.removeProperty("bottom"),n.style.removeProperty("transform-origin"),t&&(t.style.removeProperty("top"),t.style.removeProperty("left"),t.style.removeProperty("display"))}).duration(300).addAnimation([r,s])},tr=12,nr=(o,e)=>{var n;let{event:t,size:i,trigger:r,reference:s,side:a,align:l}=e,p=o.ownerDocument,f=p.dir==="rtl",g=p.defaultView.innerWidth,y=p.defaultView.innerHeight,w=ie(o),E=w.querySelector(".popover-content"),z=r||((n=t?.detail)===null||n===void 0?void 0:n.ionShadowTarget)||t?.target,{contentWidth:P,contentHeight:B}=Ho(i,E,z),I={top:y/2-B/2,left:g/2-P/2,originX:f?"right":"left",originY:"top"},h=Yo(f,P,B,0,0,s,a,l,I,r,t),S=i==="cover"?0:tr,{originX:R,originY:M,top:H,left:C,bottom:Y}=Wo(a,h.top,h.left,S,g,y,P,B,0,h.originX,h.originY,h.referenceCoordinates),j=N(),T=N(),k=N(),F=N(),te=N();return T.addElement(w.querySelector("ion-backdrop")).fromTo("opacity",.01,"var(--backdrop-opacity)").beforeStyles({"pointer-events":"none"}).afterClearStyles(["pointer-events"]),k.addElement(w.querySelector(".popover-wrapper")).duration(150).fromTo("opacity",.01,1),F.addElement(E).beforeStyles({top:`calc(${H}px + var(--offset-y, 0px))`,left:`calc(${C}px + var(--offset-x, 0px))`,"transform-origin":`${M} ${R}`}).beforeAddWrite(()=>{Y!==void 0&&E.style.setProperty("bottom",`${Y}px`)}).fromTo("transform","scale(0.8)","scale(1)"),te.addElement(w.querySelector(".popover-viewport")).fromTo("opacity",.01,1),j.easing("cubic-bezier(0.36,0.66,0.04,1)").duration(300).beforeAddWrite(()=>{i==="cover"&&o.style.setProperty("--width",`${P}px`),M==="bottom"&&o.classList.add("popover-bottom")}).addAnimation([T,k,F,te])},or=o=>{let e=ie(o),n=e.querySelector(".popover-content"),t=N(),i=N(),r=N();return i.addElement(e.querySelector("ion-backdrop")).fromTo("opacity","var(--backdrop-opacity)",0),r.addElement(e.querySelector(".popover-wrapper")).fromTo("opacity",.99,0),t.easing("ease").afterAddWrite(()=>{o.style.removeProperty("--width"),o.classList.remove("popover-bottom"),n.style.removeProperty("top"),n.style.removeProperty("left"),n.style.removeProperty("bottom"),n.style.removeProperty("transform-origin")}).duration(150).addAnimation([i,r])},ir=':host{--background:var(--ion-background-color, #fff);--min-width:0;--min-height:0;--max-width:auto;--height:auto;--offset-x:0px;--offset-y:0px;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:fixed;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);z-index:1001}:host(.popover-nested){pointer-events:none}:host(.popover-nested) .popover-wrapper{pointer-events:auto}:host(.overlay-hidden){display:none}.popover-wrapper{z-index:10}.popover-content{display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:auto;z-index:10}::slotted(.popover-viewport){--ion-safe-area-top:0px;--ion-safe-area-right:0px;--ion-safe-area-bottom:0px;--ion-safe-area-left:0px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}:host(.popover-nested.popover-side-left){--offset-x:5px}:host(.popover-nested.popover-side-right){--offset-x:-5px}:host(.popover-nested.popover-side-start){--offset-x:5px}:host-context([dir=rtl]):host(.popover-nested.popover-side-start),:host-context([dir=rtl]).popover-nested.popover-side-start{--offset-x:-5px}@supports selector(:dir(rtl)){:host(.popover-nested.popover-side-start:dir(rtl)){--offset-x:-5px}}:host(.popover-nested.popover-side-end){--offset-x:-5px}:host-context([dir=rtl]):host(.popover-nested.popover-side-end),:host-context([dir=rtl]).popover-nested.popover-side-end{--offset-x:5px}@supports selector(:dir(rtl)){:host(.popover-nested.popover-side-end:dir(rtl)){--offset-x:5px}}:host{--width:200px;--max-height:90%;--box-shadow:none;--backdrop-opacity:var(--ion-backdrop-opacity, 0.08)}:host(.popover-desktop){--box-shadow:0px 4px 16px 0px rgba(0, 0, 0, 0.12)}.popover-content{border-radius:10px}:host(.popover-desktop) .popover-content{border:0.5px solid var(--ion-color-step-100, var(--ion-background-color-step-100, #e6e6e6))}.popover-arrow{display:block;position:absolute;width:20px;height:10px;overflow:hidden;z-index:11}.popover-arrow::after{top:3px;border-radius:3px;position:absolute;width:14px;height:14px;-webkit-transform:rotate(45deg);transform:rotate(45deg);background:var(--background);content:"";z-index:10}.popover-arrow::after{inset-inline-start:3px}:host(.popover-bottom) .popover-arrow{top:auto;bottom:-10px}:host(.popover-bottom) .popover-arrow::after{top:-6px}:host(.popover-side-left) .popover-arrow{-webkit-transform:rotate(90deg);transform:rotate(90deg)}:host(.popover-side-right) .popover-arrow{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}:host(.popover-side-top) .popover-arrow{-webkit-transform:rotate(180deg);transform:rotate(180deg)}:host(.popover-side-start) .popover-arrow{-webkit-transform:rotate(90deg);transform:rotate(90deg)}:host-context([dir=rtl]):host(.popover-side-start) .popover-arrow,:host-context([dir=rtl]).popover-side-start .popover-arrow{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}@supports selector(:dir(rtl)){:host(.popover-side-start:dir(rtl)) .popover-arrow{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}}:host(.popover-side-end) .popover-arrow{-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}:host-context([dir=rtl]):host(.popover-side-end) .popover-arrow,:host-context([dir=rtl]).popover-side-end .popover-arrow{-webkit-transform:rotate(90deg);transform:rotate(90deg)}@supports selector(:dir(rtl)){:host(.popover-side-end:dir(rtl)) .popover-arrow{-webkit-transform:rotate(90deg);transform:rotate(90deg)}}.popover-arrow,.popover-content{opacity:0}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.popover-translucent) .popover-content,:host(.popover-translucent) .popover-arrow::after{background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}}',rr=":host{--background:var(--ion-background-color, #fff);--min-width:0;--min-height:0;--max-width:auto;--height:auto;--offset-x:0px;--offset-y:0px;left:0;right:0;top:0;bottom:0;display:-ms-flexbox;display:flex;position:fixed;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;outline:none;color:var(--ion-text-color, #000);z-index:1001}:host(.popover-nested){pointer-events:none}:host(.popover-nested) .popover-wrapper{pointer-events:auto}:host(.overlay-hidden){display:none}.popover-wrapper{z-index:10}.popover-content{display:-ms-flexbox;display:flex;position:absolute;-ms-flex-direction:column;flex-direction:column;width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);overflow:auto;z-index:10}::slotted(.popover-viewport){--ion-safe-area-top:0px;--ion-safe-area-right:0px;--ion-safe-area-bottom:0px;--ion-safe-area-left:0px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column}:host(.popover-nested.popover-side-left){--offset-x:5px}:host(.popover-nested.popover-side-right){--offset-x:-5px}:host(.popover-nested.popover-side-start){--offset-x:5px}:host-context([dir=rtl]):host(.popover-nested.popover-side-start),:host-context([dir=rtl]).popover-nested.popover-side-start{--offset-x:-5px}@supports selector(:dir(rtl)){:host(.popover-nested.popover-side-start:dir(rtl)){--offset-x:-5px}}:host(.popover-nested.popover-side-end){--offset-x:-5px}:host-context([dir=rtl]):host(.popover-nested.popover-side-end),:host-context([dir=rtl]).popover-nested.popover-side-end{--offset-x:5px}@supports selector(:dir(rtl)){:host(.popover-nested.popover-side-end:dir(rtl)){--offset-x:5px}}:host{--width:250px;--max-height:90%;--box-shadow:0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12);--backdrop-opacity:var(--ion-backdrop-opacity, 0.32)}.popover-content{border-radius:4px;-webkit-transform-origin:left top;transform-origin:left top}:host-context([dir=rtl]) .popover-content{-webkit-transform-origin:right top;transform-origin:right top}[dir=rtl] .popover-content{-webkit-transform-origin:right top;transform-origin:right top}@supports selector(:dir(rtl)){.popover-content:dir(rtl){-webkit-transform-origin:right top;transform-origin:right top}}.popover-viewport{-webkit-transition-delay:100ms;transition-delay:100ms}.popover-wrapper{opacity:0}",Go=Ze(class extends Be{constructor(e){super(),e!==!1&&this.__registerHost(),this.__attachShadow(),this.didPresent=oe(this,"ionPopoverDidPresent",7),this.willPresent=oe(this,"ionPopoverWillPresent",7),this.willDismiss=oe(this,"ionPopoverWillDismiss",7),this.didDismiss=oe(this,"ionPopoverDidDismiss",7),this.didPresentShorthand=oe(this,"didPresent",7),this.willPresentShorthand=oe(this,"willPresent",7),this.willDismissShorthand=oe(this,"willDismiss",7),this.didDismissShorthand=oe(this,"didDismiss",7),this.ionMount=oe(this,"ionMount",7),this.parentPopover=null,this.coreDelegate=Mt(),this.lockController=zt(),this.inline=!1,this.focusDescendantOnPresent=!1,this.presented=!1,this.hasController=!1,this.keyboardClose=!0,this.backdropDismiss=!0,this.showBackdrop=!0,this.translucent=!1,this.animated=!0,this.triggerAction="click",this.size="auto",this.dismissOnSelect=!1,this.reference="trigger",this.side="bottom",this.arrow=!0,this.isOpen=!1,this.keyboardEvents=!1,this.focusTrap=!0,this.keepContentsMounted=!1,this.onBackdropTap=()=>{this.dismiss(void 0,$t)},this.onLifecycle=n=>{let t=this.usersElement,i=sr[n.type];if(t&&i){let r=new CustomEvent(i,{bubbles:!1,cancelable:!1,detail:n.detail});t.dispatchEvent(r)}},this.configureTriggerInteraction=()=>{let{trigger:n,triggerAction:t,el:i,destroyTriggerInteraction:r}=this;if(r&&r(),n===void 0)return;let s=this.triggerEl=n!==void 0?document.getElementById(n):null;if(!s){Ye(`[ion-popover] - A trigger element with the ID "${n}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on ion-popover.`,this.el);return}this.destroyTriggerInteraction=zi(s,t,i)},this.configureKeyboardInteraction=()=>{let{destroyKeyboardInteraction:n,el:t}=this;n&&n(),this.destroyKeyboardInteraction=Yi(t)},this.configureDismissInteraction=()=>{let{destroyDismissInteraction:n,parentPopover:t,triggerAction:i,triggerEl:r,el:s}=this;!t||!r||(n&&n(),this.destroyDismissInteraction=Ni(r,i,s,t))}}onTriggerChange(){this.configureTriggerInteraction()}onIsOpenChange(e,n){e===!0&&n===!1?this.present():e===!1&&n===!0&&this.dismiss()}connectedCallback(){let{configureTriggerInteraction:e,el:n}=this;Pt(n),e()}disconnectedCallback(){let{destroyTriggerInteraction:e}=this;e&&e()}componentWillLoad(){var e,n;let{el:t}=this,i=(n=(e=this.htmlAttributes)===null||e===void 0?void 0:e.id)!==null&&n!==void 0?n:jt(t);this.parentPopover=t.closest(`ion-popover:not(#${i})`),this.alignment===void 0&&(this.alignment=ce(this)==="ios"?"center":"start")}componentDidLoad(){let{parentPopover:e,isOpen:n}=this;n===!0&&be(()=>this.present()),e&&Jn(e,"ionPopoverWillDismiss",()=>{this.dismiss(void 0,void 0,!1)}),this.configureTriggerInteraction()}async presentFromTrigger(e,n=!1){this.focusDescendantOnPresent=n,await this.present(e),this.focusDescendantOnPresent=!1}getDelegate(e=!1){if(this.workingDelegate&&!e)return{delegate:this.workingDelegate,inline:this.inline};let n=this.el.parentNode,t=this.inline=n!==null&&!this.hasController,i=this.workingDelegate=t?this.delegate||this.coreDelegate:this.delegate;return{inline:t,delegate:i}}async present(e){let n=await this.lockController.lock();if(this.presented){n();return}let{el:t}=this,{inline:i,delegate:r}=this.getDelegate(!0);this.ionMount.emit(),this.usersElement=await St(r,t,this.component,["popover-viewport"],this.componentProps,i),this.keyboardEvents||this.configureKeyboardInteraction(),this.configureDismissInteraction(),Et(t)?await kt(this.usersElement):this.keepContentsMounted||await wt(),await At(this,"popoverEnter",Ji,nr,{event:e||this.event,size:this.size,trigger:this.triggerEl,reference:this.reference,side:this.side,align:this.alignment}),this.focusDescendantOnPresent&&no(t),n()}async dismiss(e,n,t=!0){let i=await this.lockController.lock(),{destroyKeyboardInteraction:r,destroyDismissInteraction:s}=this;t&&this.parentPopover&&this.parentPopover.dismiss(e,n,t);let a=await Rt(this,e,n,"popoverLeave",er,or,this.event);if(a){r&&(r(),this.destroyKeyboardInteraction=void 0),s&&(s(),this.destroyDismissInteraction=void 0);let{delegate:l}=this.getDelegate();await _t(l,this.usersElement)}return i(),a}async getParentPopover(){return this.parentPopover}onDidDismiss(){return We(this.el,"ionPopoverDidDismiss")}onWillDismiss(){return We(this.el,"ionPopoverWillDismiss")}render(){let e=ce(this),{onLifecycle:n,parentPopover:t,dismissOnSelect:i,side:r,arrow:s,htmlAttributes:a,focusTrap:l}=this,p=eo("desktop"),f=s&&!t;return ae(He,Object.assign({key:"16866c02534968c982cf4730d2936d03a5107c8b","aria-modal":"true","no-router":!0,tabindex:"-1"},a,{style:{zIndex:`${2e4+this.overlayIndex}`},class:Object.assign(Object.assign({},xt(this.cssClass)),{[e]:!0,"popover-translucent":this.translucent,"overlay-hidden":!0,"popover-desktop":p,[`popover-side-${r}`]:!0,[Ge]:l===!1,"popover-nested":!!t}),onIonPopoverDidPresent:n,onIonPopoverWillPresent:n,onIonPopoverWillDismiss:n,onIonPopoverDidDismiss:n,onIonBackdropTap:this.onBackdropTap}),!t&&ae("ion-backdrop",{key:"0df258601a4d30df3c27aa8234a7d5e056c3ecbb",tappable:this.backdropDismiss,visible:this.showBackdrop,part:"backdrop"}),ae("div",{key:"f94e80ed996b957b5cd09b826472b4f60e8fcc78",class:"popover-wrapper ion-overlay-wrapper",onClick:i?()=>this.dismiss():void 0},f&&ae("div",{key:"185ce22f6386e8444a9cc7b8818dbfc16c463c99",class:"popover-arrow",part:"arrow"}),ae("div",{key:"206202b299404e110de5397b229678cca18568d3",class:"popover-content",part:"content"},ae("slot",{key:"ee543a0b92d6e35a837c0a0e4617c7b0fc4ad0b0"}))))}get el(){return this}static get watchers(){return{trigger:["onTriggerChange"],triggerAction:["onTriggerChange"],isOpen:["onIsOpenChange"]}}static get style(){return{ios:ir,md:rr}}},[289,"ion-popover",{hasController:[4,"has-controller"],delegate:[16],overlayIndex:[2,"overlay-index"],enterAnimation:[16],leaveAnimation:[16],component:[1],componentProps:[16],keyboardClose:[4,"keyboard-close"],cssClass:[1,"css-class"],backdropDismiss:[4,"backdrop-dismiss"],event:[8],showBackdrop:[4,"show-backdrop"],translucent:[4],animated:[4],htmlAttributes:[16],triggerAction:[1,"trigger-action"],trigger:[1],size:[1],dismissOnSelect:[4,"dismiss-on-select"],reference:[1],side:[1],alignment:[1025],arrow:[4],isOpen:[4,"is-open"],keyboardEvents:[4,"keyboard-events"],focusTrap:[4,"focus-trap"],keepContentsMounted:[4,"keep-contents-mounted"],presented:[32],presentFromTrigger:[64],present:[64],dismiss:[64],getParentPopover:[64],onDidDismiss:[64],onWillDismiss:[64]},void 0,{trigger:["onTriggerChange"],triggerAction:["onTriggerChange"],isOpen:["onIsOpenChange"]}]),sr={ionPopoverDidPresent:"ionViewDidEnter",ionPopoverWillPresent:"ionViewWillEnter",ionPopoverWillDismiss:"ionViewWillLeave",ionPopoverDidDismiss:"ionViewDidLeave"};function qo(){if(typeof customElements>"u")return;["ion-popover","ion-backdrop"].forEach(e=>{switch(e){case"ion-popover":customElements.get(e)||customElements.define(e,Go);break;case"ion-backdrop":customElements.get(e)||Bt();break}})}var Uo=qo;var ar=Object.defineProperty,cr=(o,e)=>{for(var n in e)ar(o,n,{get:e[n],enumerable:!0})};var lr=typeof window<"u"?window:{},dr=lr.HTMLElement||class{};var ur=o=>o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),pr={};cr(pr,{err:()=>Vo,map:()=>fr,ok:()=>hn,unwrap:()=>mr,unwrapErr:()=>hr});var hn=o=>({isOk:!0,isErr:!1,value:o}),Vo=o=>({isOk:!1,isErr:!0,value:o});function fr(o,e){if(o.isOk){let n=e(o.value);return n instanceof Promise?n.then(t=>hn(t)):hn(n)}if(o.isErr){let n=o.value;return Vo(n)}throw"should never get here"}var mr=o=>{if(o.isOk)return o.value;throw o.value},hr=o=>{if(o.isErr)return o.value;throw o.value};var gn=o=>{let e=ur(o);return new RegExp(`(^|[^@]|@(?!supports\\s+selector\\s*\\([^{]*?${e}))(${e}\\b)`,"g")};gn("::slotted");gn(":host");gn(":host-context");var gr="Capture",Ns=new RegExp(gr+"$");var vr=(()=>{class o extends cn{angularDelegate=je(Ot);injector=je(mt);environmentInjector=je(ft);constructor(){super(oo),zo()}create(n){return super.create(Ke(Oe({},n),{delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"modal")}))}static \u0275fac=function(t){return new(t||o)};static \u0275prov=Se({token:o,factory:o.\u0275fac})}return o})(),vn=class extends cn{angularDelegate=je(Ot);injector=je(mt);environmentInjector=je(ft);constructor(){super(io),Uo()}create(e){return super.create(Ke(Oe({},e),{delegate:this.angularDelegate.create(this.environmentInjector,this.injector,"popover")}))}},Xo=(o={})=>Nn([{provide:an,useValue:o},{provide:Hn,useFactory:yr,multi:!0,deps:[an,zn]},uo(),Ot,vr,vn]),yr=(o,e)=>()=>{e.documentElement.classList.add("ion-ce"),to(o)};var yn=`You are Welfare, a friendly AI assistant here to help Overseas Filipino Workers (OFWs) with their concerns. Your replies should be extremely concise, friendly, use Taglish, avoid deep or uncommon words, and focus on one point or question at a time. Many users just want someone to talk to, so be approachable and supportive.
Core Objective: Your primary function is to be a friendly and supportive listener for Overseas Filipino Workers (OFWs). Provide empathetic responses and a safe space for them to share their thoughts and feelings. Your goal is to offer emotional support and guidance, focusing on their well-being.
Assistant Protocol:
 * Welcome and Introduction: Begin the chat with a warm, friendly welcome. Clearly state your purpose: to listen and offer support.
 * Empathy and Active Listening: Listen attentively and show genuine empathy and concern for the user's situation. Maintain a calm, polite, and understanding demeanor at all times.
 * Supportive Responses: Provide encouraging and validating responses. Focus on the user's emotional state and offer a safe space for expression.
 * Closing Message: End the interaction with a supportive and respectful closing message, reinforcing your role as a listener and friend.
DOS and DON'TS for the AI Assistant
DOS
 * Be Respectful and Calm: Be polite, patient, and professional in every response.
 * Show Malasakit (Empathy): Acknowledge the user's feelings and validate their concern.
 * Maintain Focus: Keep the conversation centered on the user's emotional state and well-being.
 * Provide Emotional Assurance: Offer comforting and supportive messages.
 * give strength to fight.
DON'TS
 * Do Not Promise Solutions: Never guarantee a specific outcome or timeline for resolution.
 * Do Not Suggest Government Agencies: Absolutely do not mention, recommend, or refer the applicant to any external government bodies (like OWWA, POEA, DMW, etc.).
 * Do Not Engage in Debate: Avoid arguing or questioning the validity of the complaint. Your role is to receive and process.
 * Do Not Provide Legal Advice: Stick strictly to the agency's intake protocol.
 * Do Not Instruct User on Reply Length: Never tell the user to reply with short messages or to be concise. That is your role, not theirs.
 * Do Not tell that its scary.

---
Complaint Reporting Protocol:
If the user's **most recent message** clearly describes a serious complaint for the first time (e.g., "no salary", "rape", "abuse", "contract violation"), your primary goal is to trigger the [[REPORT]] tag. Do not trigger the tag based on information from older messages in the conversation history. You MUST end your response with the [[REPORT]] tag only if the user's latest message is the one that introduces the complaint.

---
AI Action Tag Instructions:
From the user's message, identify any *new* factual information about their background, situation, or character that is not already listed in "User's known characteristics" (which will be provided separately). If you find new information, output it as a single sentence using the tag [[MEMORY:"<new_memory_content>"]]. Do not include the [[MEMORY]] tag if no new information is found or if the information is already known. The [[MEMORY]] tag should appear at the end of your response, if present. The [[REPORT]] tag, if triggered, should always appear as the very last item in your response.`,Ko=`You are an AI assistant specialized in generating and updating formal case reports based on chat conversations with Overseas Filipino Workers (OFWs). Your task is to extract critical information about a complaint and present it in a structured format.

Instructions:
1.  **Analyze the provided chat history.** Focus on identifying the core complaint, key events, and relevant details.
2.  **Determine the complaint category.** Use general, legally appropriate terms for the category (e.g., "Unpaid Wages", "Physical Abuse", "Sexual Harassment", "Contract Violation", "Illegal Recruitment", "Human Trafficking"). Avoid overly specific or duplicate categories. If multiple issues are present, choose the most severe or primary one.
3.  **Compose a detailed report.** Summarize the complaint clearly and concisely, including who, what, when, and where possible.
4.  **If an 'Existing Report' is provided, update it.** Integrate new information from the chat history into the existing report. Do not repeat information already present. Ensure the updated report is comprehensive and flows logically.
5.  **Output Format:** Return your response as a JSON object with two keys: "category" and "report".

Example Output (for a new report):
{
  "category": "Unpaid Wages",
  "report": "The employee, [Employee Name], reports that they have not received their salary for the past three months (August, September, October 2025) from their employer, [Employer Name], in [Country]. They have attempted to contact the employer multiple times without success. The total amount owed is approximately [Amount]."
}

Example Output (for an updated report, if 'Existing Report' was provided):
{
  "category": "Unpaid Wages", // Keep the original category unless the primary complaint has clearly shifted
  "report": "The employee, [Employee Name], reports that they have not received their salary for the past three months (August, September, October 2025) from their employer, [Employer Name], in [Country]. They have attempted to contact the employer multiple times without success. The total amount owed is approximately [Amount]. New information: The employer has now threatened to confiscate the employee's passport if they continue to demand their salary."
}

Chat History:
{{CHAT_HISTORY}}

{{EXISTING_REPORT_PLACEHOLDER}}
`,Qo='Your goal is to get the passport number and last name of the user to confirm the identity so you can help. take note that we already have the user data we only need to map them on the database to confirm identity so its safe to ask for passport number. In order to help in anything, we prioritize the user log in first. Once you have both the last name and passport number, respond with the exact format: [[LOGIN, LASTNAME:"<last_name>",PASSPORT:"<passport_number>"]]',Jo=`You are a helpful assistant whose sole purpose is to review the immediately preceding AI's response to the user. Your goal is to act as a "good cop" correcting a "bad cop" if the previous AI's response was unclear, had a typo, or could be improved with a gentle clarification, use Taglish, avoid deep or uncommon words.

Instructions:
1.  Analyze the last AI message in the conversation history.
2.  If the last AI message is perfectly clear, concise, and appropriate, respond with the exact tag: [[DONE]].
3.  If the last AI message could be improved, is slightly off-topic, contains a minor error, or needs a gentle clarification, provide a very short, polite, and helpful follow-up message. Examples: "Sorry for the typo.", "I meant to say...", "Apologies, I meant when did you last eat?", "To clarify, I was referring to...".
4.  Your response should be extremely brief and only provide a correction or the [[DONE]] tag. Do not rephrase the entire previous message.
5.  Do NOT generate any other action tags (like [[LOGIN]], [[MEMORY]], [[REPORT]]).
`;var Ae=Fn(To());var Pe=class o{constructor(e){this.http=e}apiUrl="/api/ai.php";encrypt(e){let n=Ae.enc.Hex.parse(Nt.encryptionKey),t=Ae.lib.WordArray.random(16),i=Ae.AES.encrypt(e,n,{iv:t});return t.clone().concat(i.ciphertext).toString(Ae.enc.Base64)}callAi(e){let n=JSON.stringify({messages:e}),t=this.encrypt(n);return this.http.post(this.apiUrl,t,{headers:{"Content-Type":"text/plain"},responseType:"text"})}static \u0275fac=function(n){return new(n||o)(_e(Ct))};static \u0275prov=Se({token:o,factory:o.\u0275fac,providedIn:"root"})};var le=Fn(To());var Yt=class o{constructor(e){this.http=e;this.encryptionKey=Nt.encryptionKey}apiUrl="api/database.php";encryptionKey;login(e,n){let t=e.trim().toLowerCase(),i=n.trim().toLowerCase(),a={query:xo,params:[t,i]},l=this.encryptPayload(JSON.stringify(a));return this.http.post(this.apiUrl,l).pipe(Ln(p=>(console.log("Login response data:",p?.data[0]),p&&p.success&&p.data&&p.data.length>0&&p.data[0].id?(localStorage.setItem("user_id",p.data[0].id),localStorage.setItem("agency_id",p.data[0].agency_id),!0):!1)),Fe(p=>(console.error("Login API call failed:",p),Qe(!1))))}logout(){localStorage.removeItem("user_id"),localStorage.removeItem("agency_id")}encryptPayload(e){let n=le.enc.Hex.parse(this.encryptionKey),t=le.lib.WordArray.random(16),i=le.AES.encrypt(e,n,{iv:t,mode:le.mode.CBC,padding:le.pad.Pkcs7});return le.lib.WordArray.create().concat(t).concat(i.ciphertext).toString(le.enc.Base64)}static \u0275fac=function(n){return new(n||o)(_e(Ct))};static \u0275prov=Se({token:o,factory:o.\u0275fac,providedIn:"root"})};var Wt=class o{constructor(e,n){this.databaseService=e;this.aiService=n}handleReportCreation(e,n,t,i){return i("I've noticed you're describing a serious issue. I'm starting the process to file a formal report for you."),i("Checking for any existing reports..."),this.databaseService.query(So,[e]).pipe(Le(r=>{let s=r&&r.length>0?r[0]:null;return s?(i("An existing report was found. I will now update it with the new information."),this.updateExistingCase(e,s,t,i)):(i("No existing report found. I will create a new one for you."),this.createNewCase(e,n,t,i))}),Fe(r=>(console.error("Error handling report creation:",r),i("An error occurred while processing the report. Please try again."),pt(()=>new Error("Failed to handle report creation.")))))}createNewCase(e,n,t,i){i("Generating a summary of your complaint...");let r=this.buildReportGenerationPrompt(t);return this.aiService.callAi([{role:"system",content:r}]).pipe(Le(s=>{let a=JSON.parse(s);return i("Saving the report to your file..."),this.databaseService.query(_o,[e,n,a.category,a.report]).pipe(Le(l=>{let p=l.insertId;return i(`Your report has been successfully filed. Your case ID is ${p}.`),Qe(p)}))}),Fe(s=>(console.error("Error creating new case:",s),i("An error occurred while creating the report. Please try again."),pt(()=>new Error("Failed to create new case.")))))}updateExistingCase(e,n,t,i){i("Updating the summary of your complaint...");let r=this.buildReportGenerationPrompt(t,n.report);return this.aiService.callAi([{role:"system",content:r}]).pipe(Le(s=>{let a=JSON.parse(s);return i("Saving the updated report to your file..."),this.databaseService.query(Mo,[a.report,n.id]).pipe(Le(()=>(i(`Your report (Case ID: ${n.id}) has been successfully updated.`),Qe(n.id))))}),Fe(s=>(console.error("Error updating existing case:",s),i("An error occurred while updating the report. Please try again."),pt(()=>new Error("Failed to update existing case.")))))}buildReportGenerationPrompt(e,n){let t=Ko,i=e.map(r=>`${r.role}: ${r.content}`).join(`
`);return t=t.replace("{{CHAT_HISTORY}}",i),n?t=t.replace("{{EXISTING_REPORT_PLACEHOLDER}}",`Existing Report:
${n}`):t=t.replace("{{EXISTING_REPORT_PLACEHOLDER}}",""),t}static \u0275fac=function(n){return new(n||o)(_e(Ue),_e(Pe))};static \u0275prov=Se({token:o,factory:o.\u0275fac,providedIn:"root"})};var kr=["chatContainer"],Dr=["messageInput"];function Tr(o,e){if(o&1&&(ye(0,"div",7)(1,"div",8),et(2,"div",9),fe()()),o&2){let n=e.$implicit;nn("justify-end",n.role==="user")("justify-start",n.role==="assistant"),ve(),nn("user-message-bubble",n.role==="user"),ve(),Me("innerHTML",n.content,Bn)}}function xr(o,e){o&1&&et(0,"span",13)}function Sr(o,e){if(o&1&&(ye(0,"div",10)(1,"div",11)(2,"span"),It(3),fe(),ht(4,xr,1,0,"span",12),fe()()),o&2){let n=tn();ve(3),Zn(n.currentStatusMessage),ve(),Me("ngIf",n.isLoading)}}var ti=150,Gt=class o{constructor(e,n,t,i){this.aiService=e;this.authService=n;this.databaseService=t;this.caseService=i;this.systemPrompt={role:"system",content:""}}title="analytics-agent";chatContainer;messageInput;messages=[];systemPrompt;newMessage="";isLoading=!1;currentStatusMessage="Thinking...";userId=null;agencyId=null;employeeMemories=[];ngOnInit(){let e=localStorage.getItem("user_id"),n=localStorage.getItem("agency_id");(e&&(!n||n==="null"||n==="undefined")||!e&&n)&&(this.authService.logout(),e=null,n=null),this.userId=e,this.agencyId=n,this.setInitialSystemPrompt(),this.userId?(this.loadChatHistory(),this.loadEmployeeMemories()):(this.messages=[],this.messages.push({role:"assistant",content:"Welcome! To get started, please provide your last name and passport number so I can assist you."}))}setInitialSystemPrompt(){this.userId?this.systemPrompt.content=yn:this.systemPrompt.content=Qo+`

`+yn}loadChatHistory(){this.userId&&this.databaseService.getChatHistory(parseInt(this.userId,10)).subscribe({next:e=>{this.messages=e},error:e=>{console.error("Failed to load chat history:",e),this.messages.push({role:"assistant",content:"Sorry, I was unable to load your previous conversation."})}})}loadEmployeeMemories(){this.userId&&this.databaseService.getEmployeeMemories(parseInt(this.userId,10)).subscribe({next:e=>{this.employeeMemories=e,console.log("Loaded employee memories:",this.employeeMemories)},error:e=>{console.error("Failed to load employee memories:",e)}})}ngAfterViewChecked(){this.scrollToBottom()}adjustTextareaHeight(){if(this.messageInput&&this.messageInput.nativeElement){let e=this.messageInput.nativeElement;e.style.height="auto",e.style.height=Math.min(e.scrollHeight,ti)+"px",e.style.overflowY=e.scrollHeight>ti?"auto":"hidden"}}sendMessage(){if(console.log("sendMessage called."),this.newMessage.trim()===""){console.log("New message is empty, returning.");return}this.isLoading=!0,this.currentStatusMessage="Thinking...";let e={role:"user",content:this.newMessage.trim()};this.messages.push(e),this.saveMessageToDb(e),this.newMessage="";let n=this.systemPrompt.content;if(this.userId&&this.employeeMemories&&this.employeeMemories.length>0){let s=this.employeeMemories.map(a=>`"${a}"`).join(", ");n+=`

User's known characteristics: ${s}`}let t={role:"system",content:n},i=this.messages.slice(-10),r=[t,...i];console.log("Calling initial AI with payload:",r),this.aiService.callAi(r).subscribe({next:s=>{console.log("Initial AI response received:",s);let{response:a,tagProcessed:l}=this.parseAiResponseForTags(s),p=null;a&&(p={role:"assistant",content:a},this.messages.push(p),this.saveMessageToDb(p),console.log("Assistant message added:",p)),this.isLoading=!1,this.currentStatusMessage="Thinking...",p&&(console.log("Triggering follow-up AI."),this.triggerFollowUpAi(e,p))},error:s=>{console.error("AI call failed:",s);let a={role:"assistant",content:"Error: Could not get a response from the AI."};this.messages.push(a),this.saveMessageToDb(a),this.isLoading=!1,this.currentStatusMessage="Thinking..."}}),this.adjustTextareaHeight()}saveMessageToDb(e){console.log("Attempting to save message. UserID:",this.userId,"AgencyID:",this.agencyId),this.userId&&this.agencyId&&this.agencyId!=="null"&&this.agencyId!=="undefined"?(console.log("UserID and AgencyID are present. Calling database service."),this.databaseService.saveChatMessage(e,parseInt(this.userId,10),parseInt(this.agencyId,10)).subscribe({next:()=>console.log("Message saved successfully."),error:n=>console.error("Failed to save message:",n)})):console.log("Save skipped: UserID or AgencyID is missing or invalid.")}parseAiResponseForTags(e){let n=/\[\[LOGIN, LASTNAME:"([^"]+)",PASSPORT:"([^"]+)"\]\]/,t=/\[\[MEMORY:"([^"]+)"\]\]/g,i=/\[\[REPORT\]\]/,r=e,s=!1,a=!1,l=r.match(n);if(l){let y=l[1],w=l[2];this.authService.login(y,w).subscribe({next:E=>{if(E)this.userId=localStorage.getItem("user_id"),this.agencyId=localStorage.getItem("agency_id"),this.setInitialSystemPrompt(),this.messages=[],this.loadChatHistory(),this.loadEmployeeMemories();else{let z={role:"assistant",content:"Account does not exist, please double check if input is correct."};this.messages.push(z),this.saveMessageToDb(z)}},error:E=>{console.error("Login failed:",E);let z={role:"assistant",content:"An error occurred during login. Please try again later."};this.messages.push(z),this.saveMessageToDb(z)}}),r=r.replace(n,"").trim(),s=!0}let p,f=r;for(;(p=t.exec(r))!==null;){let y=p[1];this.userId?this.databaseService.saveEmployeeMemory(parseInt(this.userId,10),y).subscribe({next:()=>{console.log("Memory saved successfully: ",y),this.employeeMemories.push(y)},error:w=>console.error("Failed to save memory:",w)}):console.warn("Attempted to save memory for unauthenticated user:",y),f=f.replace(p[0],"").trim()}if(r=f,r.match(i))if(a=!0,r=r.replace(i,"").trim(),this.userId)this.handleReportTag();else{console.warn("[[REPORT]] tag detected for unauthenticated user. Ignoring.");let y={role:"assistant",content:"Please log in to file a report."};this.messages.push(y),this.saveMessageToDb(y)}return{response:r,tagProcessed:s||a}}handleReportTag(){if(!this.userId||!this.agencyId){console.error("handleReportTag called without a valid userId or agencyId.");return}this.isLoading=!0,this.currentStatusMessage="I've noticed you're describing a serious issue. I'm starting the process to file a formal report for you.";let e=t=>{this.currentStatusMessage=t,this.scrollToBottom()},n=this.messages.slice(-10);this.caseService.handleReportCreation(parseInt(this.userId,10),parseInt(this.agencyId,10),n,e).subscribe({next:t=>{console.log(`Report process completed. Case ID: ${t}`),this.isLoading=!1,this.currentStatusMessage="Thinking..."},error:t=>{console.error("Error during report processing:",t),this.currentStatusMessage="An unexpected error occurred during report processing. Please try again.",this.isLoading=!1}})}triggerFollowUpAi(e,n){console.log("triggerFollowUpAi called with userMessage:",e,"and assistantMessage:",n);let t=this.systemPrompt.content;if(this.userId&&this.employeeMemories&&this.employeeMemories.length>0){let a=this.employeeMemories.map(l=>`"${l}"`).join(", ");t+=`

User's known characteristics: ${a}`}t+=`

${Jo}`;let i={role:"system",content:t},r=this.messages.slice(-10),s=[i,...r];console.log("Calling follow-up AI with payload:",s),this.aiService.callAi(s).subscribe({next:a=>{console.log("Follow-up AI response received:",a);let l=/\[\[DONE\]\]/;if(a.match(l))console.log("Follow-up AI: Previous response was satisfactory. [[DONE]] tag detected.");else{console.log("Follow-up AI: Corrective message received.");let f={role:"assistant",content:a.trim()};this.messages.push(f),this.saveMessageToDb(f)}},error:a=>{console.error("Follow-up AI call failed:",a)}})}scrollToBottom(){try{this.chatContainer.nativeElement.scrollTop=this.chatContainer.nativeElement.scrollHeight}catch{}}static \u0275fac=function(n){return new(n||o)(Ce(Pe),Ce(Yt),Ce(Ue),Ce(Wt))};static \u0275cmp=Je({type:o,selectors:[["app-chat"]],viewQuery:function(n,t){if(n&1&&(vt(kr,5),vt(Dr,5)),n&2){let i;yt(i=bt())&&(t.chatContainer=i.first),yt(i=bt())&&(t.messageInput=i.first)}},decls:15,vars:5,consts:[["chatContainer",""],["messageInput",""],["class","flex",3,"justify-end","justify-start",4,"ngFor","ngForOf"],["class","flex justify-center",4,"ngIf"],[1,"flex","items-center","p-2"],["rows","1","placeholder","Type your message...",1,"flex-1","resize-none","outline-none","bg-transparent","text-white","placeholder-gray-400","p-2",3,"ngModelChange","ionInput","keydown.enter","ngModel","disabled"],[3,"click","disabled"],[1,"flex"],[1,"p-3","rounded-lg","max-w-xl"],[1,"chat-message-content",3,"innerHTML"],[1,"flex","justify-center"],[1,"p-3","rounded-lg","max-w-xl","flex","items-center","space-x-2"],["class","animate-spin rounded-full h-4 w-4 border-b-2 border-white",4,"ngIf"],[1,"animate-spin","rounded-full","h-4","w-4","border-b-2","border-white"]],template:function(n,t){if(n&1){let i=en();ye(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),It(3,"Chat"),fe()()(),ye(4,"ion-content",null,0),ht(6,Tr,3,7,"div",2)(7,Sr,5,2,"div",3),fe(),ye(8,"ion-footer")(9,"ion-toolbar")(10,"div",4)(11,"ion-textarea",5,1),Gn("ngModelChange",function(s){return Ne(i),Wn(t.newMessage,s)||(t.newMessage=s),ze(s)}),gt("ionInput",function(){return Ne(i),ze(t.adjustTextareaHeight())})("keydown.enter",function(s){return Ne(i),t.sendMessage(),ze(s.preventDefault())}),fe(),ye(13,"ion-button",6),gt("click",function(){return Ne(i),ze(t.sendMessage())}),It(14," Send "),fe()()()()}n&2&&(ve(6),Me("ngForOf",t.messages),ve(),Me("ngIf",t.isLoading||t.currentStatusMessage!=="Thinking..."),ve(4),Yn("ngModel",t.newMessage),Me("disabled",t.isLoading),ve(2),Me("disabled",t.isLoading))},dependencies:[tt,qn,on,lo,ao,co,Lt,yo,bo,Io,Co,Eo,wo,ko,go],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:100vh;font-family:Inter,sans-serif;color:var(--ion-text-color)}ion-header[_ngcontent-%COMP%], ion-footer[_ngcontent-%COMP%]{box-shadow:none!important}ion-toolbar[_ngcontent-%COMP%]{--background: var(--ion-background-color);--border-color: transparent;--min-height: 56px;padding:0 10px;color:var(--ion-text-color)}.glass-toolbar[_ngcontent-%COMP%]{background:var(--ion-toolbar-background, var(--ion-background-color));-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border-bottom:1px solid var(--ion-color-step-150);box-shadow:0 2px 10px #0000001a;color:var(--ion-text-color)}ion-content[_ngcontent-%COMP%]{--background: var(--ion-background-color);display:flex;flex-direction:column;flex-grow:1;padding-top:10px;padding-bottom:10px;overflow-y:auto}ion-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:100%;display:flex;margin-bottom:10px}ion-content[_ngcontent-%COMP%] > div.justify-end[_ngcontent-%COMP%]{justify-content:flex-end}ion-content[_ngcontent-%COMP%] > div.justify-start[_ngcontent-%COMP%]{justify-content:flex-start}ion-content[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:10px 15px;border-radius:20px;max-width:80%;word-wrap:break-word;color:var(--ion-text-color)}.user-message-bubble[_ngcontent-%COMP%]{background:var(--ion-color-primary);color:var(--ion-color-primary-contrast);box-shadow:0 2px 5px #0003;border-bottom-right-radius:5px;margin-right:10px}.assistant-message-bubble[_ngcontent-%COMP%]{background:var(--ion-color-secondary);color:var(--ion-color-secondary-contrast);box-shadow:0 2px 5px #0003;border:1px solid var(--ion-color-step-300);border-bottom-left-radius:5px;margin-left:10px}.chat-message-content[_ngcontent-%COMP%]{word-wrap:break-word;overflow-wrap:break-word;max-width:100%}.chat-message-content[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{white-space:pre-wrap;word-break:break-all;background-color:var(--ion-color-step-200);padding:8px;border-radius:5px;color:var(--ion-text-color)}.chat-message-content[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%!important;table-layout:fixed;display:block;overflow-x:auto;border-collapse:collapse}.chat-message-content[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .chat-message-content[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{max-width:none;word-break:break-word;padding:8px;border:1px solid var(--ion-color-step-300);color:var(--ion-text-color)}.chat-message-content[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto;border-radius:8px}.ion-content[_ngcontent-%COMP%] > .flex.justify-center[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}ion-textarea[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px;--padding-top: 10px;--padding-bottom: 10px;--background: var(--ion-color-light);border-radius:20px;color:var(--ion-text-color);min-height:40px;max-height:150px;overflow-y:auto;font-size:1rem}ion-textarea.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}ion-textarea.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--ion-color-step-50);border-radius:10px}ion-textarea.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--ion-color-step-200);border-radius:10px}ion-button[_ngcontent-%COMP%]{--background: var(--ion-color-tertiary);--background-activated: var(--ion-color-tertiary-tint);--border-radius: 20px;height:40px;font-size:1rem;margin-left:10px;text-transform:none;color:var(--ion-color-tertiary-contrast)}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:var(--ion-color-step-50);border-radius:10px}.custom-scrollbar[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:var(--ion-color-step-200);border-radius:10px}"]})};var ni=[{path:"",component:Gt},{path:"admin",loadChildren:()=>import("./chunk-YQKSCTSN.js").then(o=>o.AdminModule)}];var oi={providers:[Xo(),Xn(ni),Vn()]};var qt=class o{constructor(e,n){this.databaseService=e;this.aiService=n}title="welfare-super";ngOnInit(){}static \u0275fac=function(n){return new(n||o)(Ce(Ue),Ce(Pe))};static \u0275cmp=Je({type:o,selectors:[["app-root"]],decls:2,vars:0,template:function(n,t){n&1&&(ye(0,"ion-app"),et(1,"ion-router-outlet"),fe())},dependencies:[Kn,tt,Lt,vo,Do],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;background-size:cover;background-position:center;font-family:Inter,sans-serif}.glass-container[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);box-shadow:0 8px 32px #1f26875e}.glass-card[_ngcontent-%COMP%]{background:#fff3;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);border:1px solid rgba(255,255,255,.15)}[_nghost-%COMP%]  .chat-message-content{word-wrap:break-word;overflow-wrap:break-word;max-width:100%}[_nghost-%COMP%]  .chat-message-content pre{white-space:pre-wrap;word-break:break-all}[_nghost-%COMP%]  .chat-message-content table{width:100%!important;table-layout:fixed;display:block;overflow-x:auto;border-collapse:collapse}[_nghost-%COMP%]  .chat-message-content th, [_nghost-%COMP%]  .chat-message-content td{max-width:none;word-break:break-word;padding:8px;border:1px solid rgba(255,255,255,.2)}[_nghost-%COMP%]  .chat-message-content img{max-width:100%;height:auto}.user-message-bubble[_ngcontent-%COMP%]{background:#007bff4d;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);border:1px solid rgba(0,123,255,.25)}.glass-input[_ngcontent-%COMP%]{background:#ffffff26;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.2);box-shadow:0 4px 10px #0003;color:#fff}.glass-input[_ngcontent-%COMP%]::placeholder{color:#ffffffb3}.glass-button[_ngcontent-%COMP%]{background:#4caf5033;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);border:1px solid rgba(76,175,80,.3);box-shadow:0 4px 15px #0003}.glass-button[_ngcontent-%COMP%]:hover{background:#4caf504d}.log-container-plan[_ngcontent-%COMP%], .log-container-execution[_ngcontent-%COMP%]{max-height:60vh}@media (max-width: 768px){.log-container-plan[_ngcontent-%COMP%], .log-container-execution[_ngcontent-%COMP%]{max-height:30vh}}"]})};var Ie=globalThis;function de(o){return(Ie.__Zone_symbol_prefix||"__zone_symbol__")+o}function _r(){let o=Ie.performance;function e(W){o&&o.mark&&o.mark(W)}function n(W,x){o&&o.measure&&o.measure(W,x)}e("Zone");let t=(()=>{class W{static __symbol__=de;static assertZonePatched(){if(Ie.Promise!==j.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let c=W.current;for(;c.parent;)c=c.parent;return c}static get current(){return k.zone}static get currentTask(){return F}static __load_patch(c,d,_=!1){if(j.hasOwnProperty(c)){let $=Ie[de("forceDuplicateZoneCheck")]===!0;if(!_&&$)throw Error("Already loaded patch: "+c)}else if(!Ie["__Zone_disable_"+c]){let $="Zone:"+c;e($),j[c]=d(Ie,W,T),n($,$)}}get parent(){return this._parent}get name(){return this._name}_parent;_name;_properties;_zoneDelegate;constructor(c,d){this._parent=c,this._name=d?d.name||"unnamed":"<root>",this._properties=d&&d.properties||{},this._zoneDelegate=new r(this,this._parent&&this._parent._zoneDelegate,d)}get(c){let d=this.getZoneWith(c);if(d)return d._properties[c]}getZoneWith(c){let d=this;for(;d;){if(d._properties.hasOwnProperty(c))return d;d=d._parent}return null}fork(c){if(!c)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,c)}wrap(c,d){if(typeof c!="function")throw new Error("Expecting function got: "+c);let _=this._zoneDelegate.intercept(this,c,d),$=this;return function(){return $.runGuarded(_,this,arguments,d)}}run(c,d,_,$){k={parent:k,zone:this};try{return this._zoneDelegate.invoke(this,c,d,_,$)}finally{k=k.parent}}runGuarded(c,d=null,_,$){k={parent:k,zone:this};try{try{return this._zoneDelegate.invoke(this,c,d,_,$)}catch(O){if(this._zoneDelegate.handleError(this,O))throw O}}finally{k=k.parent}}runTask(c,d,_){if(c.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(c.zone||P).name+"; Execution: "+this.name+")");let $=c,{type:O,data:{isPeriodic:D=!1,isRefreshable:X=!1}={}}=c;if(c.state===B&&(O===Y||O===C))return;let G=c.state!=S;G&&$._transitionTo(S,h);let re=F;F=$,k={parent:k,zone:this};try{O==C&&c.data&&!D&&!X&&(c.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,$,d,_)}catch(ne){if(this._zoneDelegate.handleError(this,ne))throw ne}}finally{let ne=c.state;if(ne!==B&&ne!==M)if(O==Y||D||X&&ne===I)G&&$._transitionTo(h,S,I);else{let m=$._zoneDelegates;this._updateTaskCount($,-1),G&&$._transitionTo(B,S,B),X&&($._zoneDelegates=m)}k=k.parent,F=re}}scheduleTask(c){if(c.zone&&c.zone!==this){let _=this;for(;_;){if(_===c.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${c.zone.name}`);_=_.parent}}c._transitionTo(I,B);let d=[];c._zoneDelegates=d,c._zone=this;try{c=this._zoneDelegate.scheduleTask(this,c)}catch(_){throw c._transitionTo(M,I,B),this._zoneDelegate.handleError(this,_),_}return c._zoneDelegates===d&&this._updateTaskCount(c,1),c.state==I&&c._transitionTo(h,I),c}scheduleMicroTask(c,d,_,$){return this.scheduleTask(new s(H,c,d,_,$,void 0))}scheduleMacroTask(c,d,_,$,O){return this.scheduleTask(new s(C,c,d,_,$,O))}scheduleEventTask(c,d,_,$,O){return this.scheduleTask(new s(Y,c,d,_,$,O))}cancelTask(c){if(c.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(c.zone||P).name+"; Execution: "+this.name+")");if(!(c.state!==h&&c.state!==S)){c._transitionTo(R,h,S);try{this._zoneDelegate.cancelTask(this,c)}catch(d){throw c._transitionTo(M,R),this._zoneDelegate.handleError(this,d),d}return this._updateTaskCount(c,-1),c._transitionTo(B,R),c.runCount=-1,c}}_updateTaskCount(c,d){let _=c._zoneDelegates;d==-1&&(c._zoneDelegates=null);for(let $=0;$<_.length;$++)_[$]._updateTaskCount(c.type,d)}}return W})(),i={name:"",onHasTask:(W,x,c,d)=>W.hasTask(c,d),onScheduleTask:(W,x,c,d)=>W.scheduleTask(c,d),onInvokeTask:(W,x,c,d,_,$)=>W.invokeTask(c,d,_,$),onCancelTask:(W,x,c,d)=>W.cancelTask(c,d)};class r{get zone(){return this._zone}_zone;_taskCounts={microTask:0,macroTask:0,eventTask:0};_parentDelegate;_forkDlgt;_forkZS;_forkCurrZone;_interceptDlgt;_interceptZS;_interceptCurrZone;_invokeDlgt;_invokeZS;_invokeCurrZone;_handleErrorDlgt;_handleErrorZS;_handleErrorCurrZone;_scheduleTaskDlgt;_scheduleTaskZS;_scheduleTaskCurrZone;_invokeTaskDlgt;_invokeTaskZS;_invokeTaskCurrZone;_cancelTaskDlgt;_cancelTaskZS;_cancelTaskCurrZone;_hasTaskDlgt;_hasTaskDlgtOwner;_hasTaskZS;_hasTaskCurrZone;constructor(x,c,d){this._zone=x,this._parentDelegate=c,this._forkZS=d&&(d&&d.onFork?d:c._forkZS),this._forkDlgt=d&&(d.onFork?c:c._forkDlgt),this._forkCurrZone=d&&(d.onFork?this._zone:c._forkCurrZone),this._interceptZS=d&&(d.onIntercept?d:c._interceptZS),this._interceptDlgt=d&&(d.onIntercept?c:c._interceptDlgt),this._interceptCurrZone=d&&(d.onIntercept?this._zone:c._interceptCurrZone),this._invokeZS=d&&(d.onInvoke?d:c._invokeZS),this._invokeDlgt=d&&(d.onInvoke?c:c._invokeDlgt),this._invokeCurrZone=d&&(d.onInvoke?this._zone:c._invokeCurrZone),this._handleErrorZS=d&&(d.onHandleError?d:c._handleErrorZS),this._handleErrorDlgt=d&&(d.onHandleError?c:c._handleErrorDlgt),this._handleErrorCurrZone=d&&(d.onHandleError?this._zone:c._handleErrorCurrZone),this._scheduleTaskZS=d&&(d.onScheduleTask?d:c._scheduleTaskZS),this._scheduleTaskDlgt=d&&(d.onScheduleTask?c:c._scheduleTaskDlgt),this._scheduleTaskCurrZone=d&&(d.onScheduleTask?this._zone:c._scheduleTaskCurrZone),this._invokeTaskZS=d&&(d.onInvokeTask?d:c._invokeTaskZS),this._invokeTaskDlgt=d&&(d.onInvokeTask?c:c._invokeTaskDlgt),this._invokeTaskCurrZone=d&&(d.onInvokeTask?this._zone:c._invokeTaskCurrZone),this._cancelTaskZS=d&&(d.onCancelTask?d:c._cancelTaskZS),this._cancelTaskDlgt=d&&(d.onCancelTask?c:c._cancelTaskDlgt),this._cancelTaskCurrZone=d&&(d.onCancelTask?this._zone:c._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;let _=d&&d.onHasTask,$=c&&c._hasTaskZS;(_||$)&&(this._hasTaskZS=_?d:i,this._hasTaskDlgt=c,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,d.onScheduleTask||(this._scheduleTaskZS=i,this._scheduleTaskDlgt=c,this._scheduleTaskCurrZone=this._zone),d.onInvokeTask||(this._invokeTaskZS=i,this._invokeTaskDlgt=c,this._invokeTaskCurrZone=this._zone),d.onCancelTask||(this._cancelTaskZS=i,this._cancelTaskDlgt=c,this._cancelTaskCurrZone=this._zone))}fork(x,c){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,x,c):new t(x,c)}intercept(x,c,d){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,x,c,d):c}invoke(x,c,d,_,$){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,x,c,d,_,$):c.apply(d,_)}handleError(x,c){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,x,c):!0}scheduleTask(x,c){let d=c;if(this._scheduleTaskZS)this._hasTaskZS&&d._zoneDelegates.push(this._hasTaskDlgtOwner),d=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,x,c),d||(d=c);else if(c.scheduleFn)c.scheduleFn(c);else if(c.type==H)E(c);else throw new Error("Task is missing scheduleFn.");return d}invokeTask(x,c,d,_){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,x,c,d,_):c.callback.apply(d,_)}cancelTask(x,c){let d;if(this._cancelTaskZS)d=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,x,c);else{if(!c.cancelFn)throw Error("Task is not cancelable");d=c.cancelFn(c)}return d}hasTask(x,c){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,x,c)}catch(d){this.handleError(x,d)}}_updateTaskCount(x,c){let d=this._taskCounts,_=d[x],$=d[x]=_+c;if($<0)throw new Error("More tasks executed then were scheduled.");if(_==0||$==0){let O={microTask:d.microTask>0,macroTask:d.macroTask>0,eventTask:d.eventTask>0,change:x};this.hasTask(this._zone,O)}}}class s{type;source;invoke;callback;data;scheduleFn;cancelFn;_zone=null;runCount=0;_zoneDelegates=null;_state="notScheduled";constructor(x,c,d,_,$,O){if(this.type=x,this.source=c,this.data=_,this.scheduleFn=$,this.cancelFn=O,!d)throw new Error("callback is not defined");this.callback=d;let D=this;x===Y&&_&&_.useG?this.invoke=s.invokeTask:this.invoke=function(){return s.invokeTask.call(Ie,D,this,arguments)}}static invokeTask(x,c,d){x||(x=this),te++;try{return x.runCount++,x.zone.runTask(x,c,d)}finally{te==1&&z(),te--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(B,I)}_transitionTo(x,c,d){if(this._state===c||this._state===d)this._state=x,x==B&&(this._zoneDelegates=null);else throw new Error(`${this.type} '${this.source}': can not transition to '${x}', expecting state '${c}'${d?" or '"+d+"'":""}, was '${this._state}'.`)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}let a=de("setTimeout"),l=de("Promise"),p=de("then"),f=[],g=!1,y;function w(W){if(y||Ie[l]&&(y=Ie[l].resolve(0)),y){let x=y[p];x||(x=y.then),x.call(y,W)}else Ie[a](W,0)}function E(W){te===0&&f.length===0&&w(z),W&&f.push(W)}function z(){if(!g){for(g=!0;f.length;){let W=f;f=[];for(let x=0;x<W.length;x++){let c=W[x];try{c.zone.runTask(c,null,null)}catch(d){T.onUnhandledError(d)}}}T.microtaskDrainDone(),g=!1}}let P={name:"NO ZONE"},B="notScheduled",I="scheduling",h="scheduled",S="running",R="canceling",M="unknown",H="microTask",C="macroTask",Y="eventTask",j={},T={symbol:de,currentZoneFrame:()=>k,onUnhandledError:K,microtaskDrainDone:K,scheduleMicroTask:E,showUncaughtError:()=>!t[de("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:K,patchMethod:()=>K,bindArguments:()=>[],patchThen:()=>K,patchMacroTask:()=>K,patchEventPrototype:()=>K,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>K,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>K,wrapWithCurrentZone:()=>K,filterProperties:()=>[],attachOriginToPatched:()=>K,_redefineProperty:()=>K,patchCallbacks:()=>K,nativeScheduleMicroTask:w},k={parent:null,zone:new t(null,null)},F=null,te=0;function K(){}return n("Zone","Zone"),t}function Mr(){let o=globalThis,e=o[de("forceDuplicateZoneCheck")]===!0;if(o.Zone&&(e||typeof o.Zone.__symbol__!="function"))throw new Error("Zone already loaded.");return o.Zone??=_r(),o.Zone}var ct=Object.getOwnPropertyDescriptor,kn=Object.defineProperty,Dn=Object.getPrototypeOf,Pr=Object.create,jr=Array.prototype.slice,Tn="addEventListener",xn="removeEventListener",In=de(Tn),Cn=de(xn),we="true",ke="false",lt=de("");function Sn(o,e){return Zone.current.wrap(o,e)}function _n(o,e,n,t,i){return Zone.current.scheduleMacroTask(o,e,n,t,i)}var Q=de,Xt=typeof window<"u",dt=Xt?window:void 0,se=Xt&&dt||globalThis,Ar="removeAttribute";function Mn(o,e){for(let n=o.length-1;n>=0;n--)typeof o[n]=="function"&&(o[n]=Sn(o[n],e+"_"+n));return o}function Rr(o,e){let n=o.constructor.name;for(let t=0;t<e.length;t++){let i=e[t],r=o[i];if(r){let s=ct(o,i);if(!di(s))continue;o[i]=(a=>{let l=function(){return a.apply(this,Mn(arguments,n+"."+i))};return Te(l,a),l})(r)}}}function di(o){return o?o.writable===!1?!1:!(typeof o.get=="function"&&typeof o.set>"u"):!0}var ui=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Kt=!("nw"in se)&&typeof se.process<"u"&&se.process.toString()==="[object process]",Pn=!Kt&&!ui&&!!(Xt&&dt.HTMLElement),pi=typeof se.process<"u"&&se.process.toString()==="[object process]"&&!ui&&!!(Xt&&dt.HTMLElement),Vt={},$r=Q("enable_beforeunload"),ii=function(o){if(o=o||se.event,!o)return;let e=Vt[o.type];e||(e=Vt[o.type]=Q("ON_PROPERTY"+o.type));let n=this||o.target||se,t=n[e],i;if(Pn&&n===dt&&o.type==="error"){let r=o;i=t&&t.call(this,r.message,r.filename,r.lineno,r.colno,r.error),i===!0&&o.preventDefault()}else i=t&&t.apply(this,arguments),o.type==="beforeunload"&&se[$r]&&typeof i=="string"?o.returnValue=i:i!=null&&!i&&o.preventDefault();return i};function ri(o,e,n){let t=ct(o,e);if(!t&&n&&ct(n,e)&&(t={enumerable:!0,configurable:!0}),!t||!t.configurable)return;let i=Q("on"+e+"patched");if(o.hasOwnProperty(i)&&o[i])return;delete t.writable,delete t.value;let r=t.get,s=t.set,a=e.slice(2),l=Vt[a];l||(l=Vt[a]=Q("ON_PROPERTY"+a)),t.set=function(p){let f=this;if(!f&&o===se&&(f=se),!f)return;typeof f[l]=="function"&&f.removeEventListener(a,ii),s?.call(f,null),f[l]=p,typeof p=="function"&&f.addEventListener(a,ii,!1)},t.get=function(){let p=this;if(!p&&o===se&&(p=se),!p)return null;let f=p[l];if(f)return f;if(r){let g=r.call(this);if(g)return t.set.call(this,g),typeof p[Ar]=="function"&&p.removeAttribute(e),g}return null},kn(o,e,t),o[i]=!0}function fi(o,e,n){if(e)for(let t=0;t<e.length;t++)ri(o,"on"+e[t],n);else{let t=[];for(let i in o)i.slice(0,2)=="on"&&t.push(i);for(let i=0;i<t.length;i++)ri(o,t[i],n)}}var me=Q("originalInstance");function at(o){let e=se[o];if(!e)return;se[Q(o)]=e,se[o]=function(){let i=Mn(arguments,o);switch(i.length){case 0:this[me]=new e;break;case 1:this[me]=new e(i[0]);break;case 2:this[me]=new e(i[0],i[1]);break;case 3:this[me]=new e(i[0],i[1],i[2]);break;case 4:this[me]=new e(i[0],i[1],i[2],i[3]);break;default:throw new Error("Arg list too long.")}},Te(se[o],e);let n=new e(function(){}),t;for(t in n)o==="XMLHttpRequest"&&t==="responseBlob"||(function(i){typeof n[i]=="function"?se[o].prototype[i]=function(){return this[me][i].apply(this[me],arguments)}:kn(se[o].prototype,i,{set:function(r){typeof r=="function"?(this[me][i]=Sn(r,o+"."+i),Te(this[me][i],r)):this[me][i]=r},get:function(){return this[me][i]}})})(t);for(t in e)t!=="prototype"&&e.hasOwnProperty(t)&&(se[o][t]=e[t])}function De(o,e,n){let t=o;for(;t&&!t.hasOwnProperty(e);)t=Dn(t);!t&&o[e]&&(t=o);let i=Q(e),r=null;if(t&&(!(r=t[i])||!t.hasOwnProperty(i))){r=t[i]=t[e];let s=t&&ct(t,e);if(di(s)){let a=n(r,i,e);t[e]=function(){return a(this,arguments)},Te(t[e],r)}}return r}function Or(o,e,n){let t=null;function i(r){let s=r.data;return s.args[s.cbIdx]=function(){r.invoke.apply(this,arguments)},t.apply(s.target,s.args),r}t=De(o,e,r=>function(s,a){let l=n(s,a);return l.cbIdx>=0&&typeof a[l.cbIdx]=="function"?_n(l.name,a[l.cbIdx],l,i):r.apply(s,a)})}function Te(o,e){o[Q("OriginalDelegate")]=e}var si=!1,En=!1;function Fr(){if(si)return En;si=!0;try{let o=dt.navigator.userAgent;(o.indexOf("MSIE ")!==-1||o.indexOf("Trident/")!==-1||o.indexOf("Edge/")!==-1)&&(En=!0)}catch{}return En}function ai(o){return typeof o=="function"}function ci(o){return typeof o=="number"}var Lr={useG:!0},ue={},mi={},hi=new RegExp("^"+lt+"(\\w+)(true|false)$"),gi=Q("propagationStopped");function vi(o,e){let n=(e?e(o):o)+ke,t=(e?e(o):o)+we,i=lt+n,r=lt+t;ue[o]={},ue[o][ke]=i,ue[o][we]=r}function Nr(o,e,n,t){let i=t&&t.add||Tn,r=t&&t.rm||xn,s=t&&t.listeners||"eventListeners",a=t&&t.rmAll||"removeAllListeners",l=Q(i),p="."+i+":",f="prependListener",g="."+f+":",y=function(I,h,S){if(I.isRemoved)return;let R=I.callback;typeof R=="object"&&R.handleEvent&&(I.callback=C=>R.handleEvent(C),I.originalDelegate=R);let M;try{I.invoke(I,h,[S])}catch(C){M=C}let H=I.options;if(H&&typeof H=="object"&&H.once){let C=I.originalDelegate?I.originalDelegate:I.callback;h[r].call(h,S.type,C,H)}return M};function w(I,h,S){if(h=h||o.event,!h)return;let R=I||h.target||o,M=R[ue[h.type][S?we:ke]];if(M){let H=[];if(M.length===1){let C=y(M[0],R,h);C&&H.push(C)}else{let C=M.slice();for(let Y=0;Y<C.length&&!(h&&h[gi]===!0);Y++){let j=y(C[Y],R,h);j&&H.push(j)}}if(H.length===1)throw H[0];for(let C=0;C<H.length;C++){let Y=H[C];e.nativeScheduleMicroTask(()=>{throw Y})}}}let E=function(I){return w(this,I,!1)},z=function(I){return w(this,I,!0)};function P(I,h){if(!I)return!1;let S=!0;h&&h.useG!==void 0&&(S=h.useG);let R=h&&h.vh,M=!0;h&&h.chkDup!==void 0&&(M=h.chkDup);let H=!1;h&&h.rt!==void 0&&(H=h.rt);let C=I;for(;C&&!C.hasOwnProperty(i);)C=Dn(C);if(!C&&I[i]&&(C=I),!C||C[l])return!1;let Y=h&&h.eventNameToString,j={},T=C[l]=C[i],k=C[Q(r)]=C[r],F=C[Q(s)]=C[s],te=C[Q(a)]=C[a],K;h&&h.prepend&&(K=C[Q(h.prepend)]=C[h.prepend]);function W(u,b){return b?typeof u=="boolean"?{capture:u,passive:!0}:u?typeof u=="object"&&u.passive!==!1?Ke(Oe({},u),{passive:!0}):u:{passive:!0}:u}let x=function(u){if(!j.isExisting)return T.call(j.target,j.eventName,j.capture?z:E,j.options)},c=function(u){if(!u.isRemoved){let b=ue[u.eventName],L;b&&(L=b[u.capture?we:ke]);let Z=L&&u.target[L];if(Z){for(let A=0;A<Z.length;A++)if(Z[A]===u){Z.splice(A,1),u.isRemoved=!0,u.removeAbortListener&&(u.removeAbortListener(),u.removeAbortListener=null),Z.length===0&&(u.allRemoved=!0,u.target[L]=null);break}}}if(u.allRemoved)return k.call(u.target,u.eventName,u.capture?z:E,u.options)},d=function(u){return T.call(j.target,j.eventName,u.invoke,j.options)},_=function(u){return K.call(j.target,j.eventName,u.invoke,j.options)},$=function(u){return k.call(u.target,u.eventName,u.invoke,u.options)},O=S?x:d,D=S?c:$,X=function(u,b){let L=typeof b;return L==="function"&&u.callback===b||L==="object"&&u.originalDelegate===b},G=h?.diff||X,re=Zone[Q("UNPATCHED_EVENTS")],ne=o[Q("PASSIVE_EVENTS")];function m(u){if(typeof u=="object"&&u!==null){let b=Oe({},u);return u.signal&&(b.signal=u.signal),b}return u}let v=function(u,b,L,Z,A=!1,q=!1){return function(){let U=this||o,V=arguments[0];h&&h.transferEventName&&(V=h.transferEventName(V));let J=arguments[1];if(!J)return u.apply(this,arguments);if(Kt&&V==="uncaughtException")return u.apply(this,arguments);let ee=!1;if(typeof J!="function"){if(!J.handleEvent)return u.apply(this,arguments);ee=!0}if(R&&!R(u,J,U,arguments))return;let xe=!!ne&&ne.indexOf(V)!==-1,he=m(W(arguments[2],xe)),Re=he?.signal;if(Re?.aborted)return;if(re){for(let ge=0;ge<re.length;ge++)if(V===re[ge])return xe?u.call(U,V,J,he):u.apply(this,arguments)}let Qt=he?typeof he=="boolean"?!0:he.capture:!1,jn=he&&typeof he=="object"?he.once:!1,Ci=Zone.current,Jt=ue[V];Jt||(vi(V,Y),Jt=ue[V]);let An=Jt[Qt?we:ke],$e=U[An],Rn=!1;if($e){if(Rn=!0,M){for(let ge=0;ge<$e.length;ge++)if(G($e[ge],J))return}}else $e=U[An]=[];let ut,$n=U.constructor.name,On=mi[$n];On&&(ut=On[V]),ut||(ut=$n+b+(Y?Y(V):V)),j.options=he,jn&&(j.options.once=!1),j.target=U,j.capture=Qt,j.eventName=V,j.isExisting=Rn;let Xe=S?Lr:void 0;Xe&&(Xe.taskData=j),Re&&(j.options.signal=void 0);let pe=Ci.scheduleEventTask(ut,J,Xe,L,Z);if(Re){j.options.signal=Re;let ge=()=>pe.zone.cancelTask(pe);u.call(Re,"abort",ge,{once:!0}),pe.removeAbortListener=()=>Re.removeEventListener("abort",ge)}if(j.target=null,Xe&&(Xe.taskData=null),jn&&(j.options.once=!0),typeof pe.options!="boolean"&&(pe.options=he),pe.target=U,pe.capture=Qt,pe.eventName=V,ee&&(pe.originalDelegate=J),q?$e.unshift(pe):$e.push(pe),A)return U}};return C[i]=v(T,p,O,D,H),K&&(C[f]=v(K,g,_,D,H,!0)),C[r]=function(){let u=this||o,b=arguments[0];h&&h.transferEventName&&(b=h.transferEventName(b));let L=arguments[2],Z=L?typeof L=="boolean"?!0:L.capture:!1,A=arguments[1];if(!A)return k.apply(this,arguments);if(R&&!R(k,A,u,arguments))return;let q=ue[b],U;q&&(U=q[Z?we:ke]);let V=U&&u[U];if(V)for(let J=0;J<V.length;J++){let ee=V[J];if(G(ee,A)){if(V.splice(J,1),ee.isRemoved=!0,V.length===0&&(ee.allRemoved=!0,u[U]=null,!Z&&typeof b=="string")){let xe=lt+"ON_PROPERTY"+b;u[xe]=null}return ee.zone.cancelTask(ee),H?u:void 0}}return k.apply(this,arguments)},C[s]=function(){let u=this||o,b=arguments[0];h&&h.transferEventName&&(b=h.transferEventName(b));let L=[],Z=yi(u,Y?Y(b):b);for(let A=0;A<Z.length;A++){let q=Z[A],U=q.originalDelegate?q.originalDelegate:q.callback;L.push(U)}return L},C[a]=function(){let u=this||o,b=arguments[0];if(b){h&&h.transferEventName&&(b=h.transferEventName(b));let L=ue[b];if(L){let Z=L[ke],A=L[we],q=u[Z],U=u[A];if(q){let V=q.slice();for(let J=0;J<V.length;J++){let ee=V[J],xe=ee.originalDelegate?ee.originalDelegate:ee.callback;this[r].call(this,b,xe,ee.options)}}if(U){let V=U.slice();for(let J=0;J<V.length;J++){let ee=V[J],xe=ee.originalDelegate?ee.originalDelegate:ee.callback;this[r].call(this,b,xe,ee.options)}}}}else{let L=Object.keys(u);for(let Z=0;Z<L.length;Z++){let A=L[Z],q=hi.exec(A),U=q&&q[1];U&&U!=="removeListener"&&this[a].call(this,U)}this[a].call(this,"removeListener")}if(H)return this},Te(C[i],T),Te(C[r],k),te&&Te(C[a],te),F&&Te(C[s],F),!0}let B=[];for(let I=0;I<n.length;I++)B[I]=P(n[I],t);return B}function yi(o,e){if(!e){let r=[];for(let s in o){let a=hi.exec(s),l=a&&a[1];if(l&&(!e||l===e)){let p=o[s];if(p)for(let f=0;f<p.length;f++)r.push(p[f])}}return r}let n=ue[e];n||(vi(e),n=ue[e]);let t=o[n[ke]],i=o[n[we]];return t?i?t.concat(i):t.slice():i?i.slice():[]}function zr(o,e){let n=o.Event;n&&n.prototype&&e.patchMethod(n.prototype,"stopImmediatePropagation",t=>function(i,r){i[gi]=!0,t&&t.apply(i,r)})}function Br(o,e){e.patchMethod(o,"queueMicrotask",n=>function(t,i){Zone.current.scheduleMicroTask("queueMicrotask",i[0])})}var Ut=Q("zoneTask");function Ve(o,e,n,t){let i=null,r=null;e+=t,n+=t;let s={};function a(p){let f=p.data;f.args[0]=function(){return p.invoke.apply(this,arguments)};let g=i.apply(o,f.args);return ci(g)?f.handleId=g:(f.handle=g,f.isRefreshable=ai(g.refresh)),p}function l(p){let{handle:f,handleId:g}=p.data;return r.call(o,f??g)}i=De(o,e,p=>function(f,g){if(ai(g[0])){let y={isRefreshable:!1,isPeriodic:t==="Interval",delay:t==="Timeout"||t==="Interval"?g[1]||0:void 0,args:g},w=g[0];g[0]=function(){try{return w.apply(this,arguments)}finally{let{handle:S,handleId:R,isPeriodic:M,isRefreshable:H}=y;!M&&!H&&(R?delete s[R]:S&&(S[Ut]=null))}};let E=_n(e,g[0],y,a,l);if(!E)return E;let{handleId:z,handle:P,isRefreshable:B,isPeriodic:I}=E.data;if(z)s[z]=E;else if(P&&(P[Ut]=E,B&&!I)){let h=P.refresh;P.refresh=function(){let{zone:S,state:R}=E;return R==="notScheduled"?(E._state="scheduled",S._updateTaskCount(E,1)):R==="running"&&(E._state="scheduling"),h.call(this)}}return P??z??E}else return p.apply(o,g)}),r=De(o,n,p=>function(f,g){let y=g[0],w;ci(y)?(w=s[y],delete s[y]):(w=y?.[Ut],w?y[Ut]=null:w=y),w?.type?w.cancelFn&&w.zone.cancelTask(w):p.apply(o,g)})}function Hr(o,e){let{isBrowser:n,isMix:t}=e.getGlobalObjects();if(!n&&!t||!o.customElements||!("customElements"in o))return;let i=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"];e.patchCallbacks(e,o.customElements,"customElements","define",i)}function Zr(o,e){if(Zone[e.symbol("patchEventTarget")])return;let{eventNames:n,zoneSymbolEventNames:t,TRUE_STR:i,FALSE_STR:r,ZONE_SYMBOL_PREFIX:s}=e.getGlobalObjects();for(let l=0;l<n.length;l++){let p=n[l],f=p+r,g=p+i,y=s+f,w=s+g;t[p]={},t[p][r]=y,t[p][i]=w}let a=o.EventTarget;if(!(!a||!a.prototype))return e.patchEventTarget(o,e,[a&&a.prototype]),!0}function Yr(o,e){e.patchEventPrototype(o,e)}function bi(o,e,n){if(!n||n.length===0)return e;let t=n.filter(r=>r.target===o);if(t.length===0)return e;let i=t[0].ignoreProperties;return e.filter(r=>i.indexOf(r)===-1)}function li(o,e,n,t){if(!o)return;let i=bi(o,e,n);fi(o,i,t)}function wn(o){return Object.getOwnPropertyNames(o).filter(e=>e.startsWith("on")&&e.length>2).map(e=>e.substring(2))}function Wr(o,e){if(Kt&&!pi||Zone[o.symbol("patchEvents")])return;let n=e.__Zone_ignore_on_properties,t=[];if(Pn){let i=window;t=t.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);let r=[];li(i,wn(i),n&&n.concat(r),Dn(i))}t=t.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let i=0;i<t.length;i++){let r=e[t[i]];r?.prototype&&li(r.prototype,wn(r.prototype),n)}}function Gr(o){o.__load_patch("legacy",e=>{let n=e[o.__symbol__("legacyPatch")];n&&n()}),o.__load_patch("timers",e=>{let t="clear";Ve(e,"set",t,"Timeout"),Ve(e,"set",t,"Interval"),Ve(e,"set",t,"Immediate")}),o.__load_patch("requestAnimationFrame",e=>{Ve(e,"request","cancel","AnimationFrame"),Ve(e,"mozRequest","mozCancel","AnimationFrame"),Ve(e,"webkitRequest","webkitCancel","AnimationFrame")}),o.__load_patch("blocking",(e,n)=>{let t=["alert","prompt","confirm"];for(let i=0;i<t.length;i++){let r=t[i];De(e,r,(s,a,l)=>function(p,f){return n.current.run(s,e,f,l)})}}),o.__load_patch("EventTarget",(e,n,t)=>{Yr(e,t),Zr(e,t);let i=e.XMLHttpRequestEventTarget;i&&i.prototype&&t.patchEventTarget(e,t,[i.prototype])}),o.__load_patch("MutationObserver",(e,n,t)=>{at("MutationObserver"),at("WebKitMutationObserver")}),o.__load_patch("IntersectionObserver",(e,n,t)=>{at("IntersectionObserver")}),o.__load_patch("FileReader",(e,n,t)=>{at("FileReader")}),o.__load_patch("on_property",(e,n,t)=>{Wr(t,e)}),o.__load_patch("customElements",(e,n,t)=>{Hr(e,t)}),o.__load_patch("XHR",(e,n)=>{p(e);let t=Q("xhrTask"),i=Q("xhrSync"),r=Q("xhrListener"),s=Q("xhrScheduled"),a=Q("xhrURL"),l=Q("xhrErrorBeforeScheduled");function p(f){let g=f.XMLHttpRequest;if(!g)return;let y=g.prototype;function w(T){return T[t]}let E=y[In],z=y[Cn];if(!E){let T=f.XMLHttpRequestEventTarget;if(T){let k=T.prototype;E=k[In],z=k[Cn]}}let P="readystatechange",B="scheduled";function I(T){let k=T.data,F=k.target;F[s]=!1,F[l]=!1;let te=F[r];E||(E=F[In],z=F[Cn]),te&&z.call(F,P,te);let K=F[r]=()=>{if(F.readyState===F.DONE)if(!k.aborted&&F[s]&&T.state===B){let x=F[n.__symbol__("loadfalse")];if(F.status!==0&&x&&x.length>0){let c=T.invoke;T.invoke=function(){let d=F[n.__symbol__("loadfalse")];for(let _=0;_<d.length;_++)d[_]===T&&d.splice(_,1);!k.aborted&&T.state===B&&c.call(T)},x.push(T)}else T.invoke()}else!k.aborted&&F[s]===!1&&(F[l]=!0)};return E.call(F,P,K),F[t]||(F[t]=T),Y.apply(F,k.args),F[s]=!0,T}function h(){}function S(T){let k=T.data;return k.aborted=!0,j.apply(k.target,k.args)}let R=De(y,"open",()=>function(T,k){return T[i]=k[2]==!1,T[a]=k[1],R.apply(T,k)}),M="XMLHttpRequest.send",H=Q("fetchTaskAborting"),C=Q("fetchTaskScheduling"),Y=De(y,"send",()=>function(T,k){if(n.current[C]===!0||T[i])return Y.apply(T,k);{let F={target:T,url:T[a],isPeriodic:!1,args:k,aborted:!1},te=_n(M,h,F,I,S);T&&T[l]===!0&&!F.aborted&&te.state===B&&te.invoke()}}),j=De(y,"abort",()=>function(T,k){let F=w(T);if(F&&typeof F.type=="string"){if(F.cancelFn==null||F.data&&F.data.aborted)return;F.zone.cancelTask(F)}else if(n.current[H]===!0)return j.apply(T,k)})}}),o.__load_patch("geolocation",e=>{e.navigator&&e.navigator.geolocation&&Rr(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),o.__load_patch("PromiseRejectionEvent",(e,n)=>{function t(i){return function(r){yi(e,i).forEach(a=>{let l=e.PromiseRejectionEvent;if(l){let p=new l(i,{promise:r.promise,reason:r.rejection});a.invoke(p)}})}}e.PromiseRejectionEvent&&(n[Q("unhandledPromiseRejectionHandler")]=t("unhandledrejection"),n[Q("rejectionHandledHandler")]=t("rejectionhandled"))}),o.__load_patch("queueMicrotask",(e,n,t)=>{Br(e,t)})}function qr(o){o.__load_patch("ZoneAwarePromise",(e,n,t)=>{let i=Object.getOwnPropertyDescriptor,r=Object.defineProperty;function s(m){if(m&&m.toString===Object.prototype.toString){let v=m.constructor&&m.constructor.name;return(v||"")+": "+JSON.stringify(m)}return m?m.toString():Object.prototype.toString.call(m)}let a=t.symbol,l=[],p=e[a("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]!==!1,f=a("Promise"),g=a("then"),y="__creationTrace__";t.onUnhandledError=m=>{if(t.showUncaughtError()){let v=m&&m.rejection;v?console.error("Unhandled Promise rejection:",v instanceof Error?v.message:v,"; Zone:",m.zone.name,"; Task:",m.task&&m.task.source,"; Value:",v,v instanceof Error?v.stack:void 0):console.error(m)}},t.microtaskDrainDone=()=>{for(;l.length;){let m=l.shift();try{m.zone.runGuarded(()=>{throw m.throwOriginal?m.rejection:m})}catch(v){E(v)}}};let w=a("unhandledPromiseRejectionHandler");function E(m){t.onUnhandledError(m);try{let v=n[w];typeof v=="function"&&v.call(this,m)}catch{}}function z(m){return m&&typeof m.then=="function"}function P(m){return m}function B(m){return D.reject(m)}let I=a("state"),h=a("value"),S=a("finally"),R=a("parentPromiseValue"),M=a("parentPromiseState"),H="Promise.then",C=null,Y=!0,j=!1,T=0;function k(m,v){return u=>{try{W(m,v,u)}catch(b){W(m,!1,b)}}}let F=function(){let m=!1;return function(u){return function(){m||(m=!0,u.apply(null,arguments))}}},te="Promise resolved with itself",K=a("currentTaskTrace");function W(m,v,u){let b=F();if(m===u)throw new TypeError(te);if(m[I]===C){let L=null;try{(typeof u=="object"||typeof u=="function")&&(L=u&&u.then)}catch(Z){return b(()=>{W(m,!1,Z)})(),m}if(v!==j&&u instanceof D&&u.hasOwnProperty(I)&&u.hasOwnProperty(h)&&u[I]!==C)c(u),W(m,u[I],u[h]);else if(v!==j&&typeof L=="function")try{L.call(u,b(k(m,v)),b(k(m,!1)))}catch(Z){b(()=>{W(m,!1,Z)})()}else{m[I]=v;let Z=m[h];if(m[h]=u,m[S]===S&&v===Y&&(m[I]=m[M],m[h]=m[R]),v===j&&u instanceof Error){let A=n.currentTask&&n.currentTask.data&&n.currentTask.data[y];A&&r(u,K,{configurable:!0,enumerable:!1,writable:!0,value:A})}for(let A=0;A<Z.length;)d(m,Z[A++],Z[A++],Z[A++],Z[A++]);if(Z.length==0&&v==j){m[I]=T;let A=u;try{throw new Error("Uncaught (in promise): "+s(u)+(u&&u.stack?`
`+u.stack:""))}catch(q){A=q}p&&(A.throwOriginal=!0),A.rejection=u,A.promise=m,A.zone=n.current,A.task=n.currentTask,l.push(A),t.scheduleMicroTask()}}}return m}let x=a("rejectionHandledHandler");function c(m){if(m[I]===T){try{let v=n[x];v&&typeof v=="function"&&v.call(this,{rejection:m[h],promise:m})}catch{}m[I]=j;for(let v=0;v<l.length;v++)m===l[v].promise&&l.splice(v,1)}}function d(m,v,u,b,L){c(m);let Z=m[I],A=Z?typeof b=="function"?b:P:typeof L=="function"?L:B;v.scheduleMicroTask(H,()=>{try{let q=m[h],U=!!u&&S===u[S];U&&(u[R]=q,u[M]=Z);let V=v.run(A,void 0,U&&A!==B&&A!==P?[]:[q]);W(u,!0,V)}catch(q){W(u,!1,q)}},u)}let _="function ZoneAwarePromise() { [native code] }",$=function(){},O=e.AggregateError;class D{static toString(){return _}static resolve(v){return v instanceof D?v:W(new this(null),Y,v)}static reject(v){return W(new this(null),j,v)}static withResolvers(){let v={};return v.promise=new D((u,b)=>{v.resolve=u,v.reject=b}),v}static any(v){if(!v||typeof v[Symbol.iterator]!="function")return Promise.reject(new O([],"All promises were rejected"));let u=[],b=0;try{for(let A of v)b++,u.push(D.resolve(A))}catch{return Promise.reject(new O([],"All promises were rejected"))}if(b===0)return Promise.reject(new O([],"All promises were rejected"));let L=!1,Z=[];return new D((A,q)=>{for(let U=0;U<u.length;U++)u[U].then(V=>{L||(L=!0,A(V))},V=>{Z.push(V),b--,b===0&&(L=!0,q(new O(Z,"All promises were rejected")))})})}static race(v){let u,b,L=new this((q,U)=>{u=q,b=U});function Z(q){u(q)}function A(q){b(q)}for(let q of v)z(q)||(q=this.resolve(q)),q.then(Z,A);return L}static all(v){return D.allWithCallback(v)}static allSettled(v){return(this&&this.prototype instanceof D?this:D).allWithCallback(v,{thenCallback:b=>({status:"fulfilled",value:b}),errorCallback:b=>({status:"rejected",reason:b})})}static allWithCallback(v,u){let b,L,Z=new this((V,J)=>{b=V,L=J}),A=2,q=0,U=[];for(let V of v){z(V)||(V=this.resolve(V));let J=q;try{V.then(ee=>{U[J]=u?u.thenCallback(ee):ee,A--,A===0&&b(U)},ee=>{u?(U[J]=u.errorCallback(ee),A--,A===0&&b(U)):L(ee)})}catch(ee){L(ee)}A++,q++}return A-=2,A===0&&b(U),Z}constructor(v){let u=this;if(!(u instanceof D))throw new Error("Must be an instanceof Promise.");u[I]=C,u[h]=[];try{let b=F();v&&v(b(k(u,Y)),b(k(u,j)))}catch(b){W(u,!1,b)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return D}then(v,u){let b=this.constructor?.[Symbol.species];(!b||typeof b!="function")&&(b=this.constructor||D);let L=new b($),Z=n.current;return this[I]==C?this[h].push(Z,L,v,u):d(this,Z,L,v,u),L}catch(v){return this.then(null,v)}finally(v){let u=this.constructor?.[Symbol.species];(!u||typeof u!="function")&&(u=D);let b=new u($);b[S]=S;let L=n.current;return this[I]==C?this[h].push(L,b,v,v):d(this,L,b,v,v),b}}D.resolve=D.resolve,D.reject=D.reject,D.race=D.race,D.all=D.all;let X=e[f]=e.Promise;e.Promise=D;let G=a("thenPatched");function re(m){let v=m.prototype,u=i(v,"then");if(u&&(u.writable===!1||!u.configurable))return;let b=v.then;v[g]=b,m.prototype.then=function(L,Z){return new D((q,U)=>{b.call(this,q,U)}).then(L,Z)},m[G]=!0}t.patchThen=re;function ne(m){return function(v,u){let b=m.apply(v,u);if(b instanceof D)return b;let L=b.constructor;return L[G]||re(L),b}}return X&&(re(X),De(e,"fetch",m=>ne(m))),Promise[n.__symbol__("uncaughtPromiseErrors")]=l,D})}function Ur(o){o.__load_patch("toString",e=>{let n=Function.prototype.toString,t=Q("OriginalDelegate"),i=Q("Promise"),r=Q("Error"),s=function(){if(typeof this=="function"){let f=this[t];if(f)return typeof f=="function"?n.call(f):Object.prototype.toString.call(f);if(this===Promise){let g=e[i];if(g)return n.call(g)}if(this===Error){let g=e[r];if(g)return n.call(g)}}return n.call(this)};s[t]=n,Function.prototype.toString=s;let a=Object.prototype.toString,l="[object Promise]";Object.prototype.toString=function(){return typeof Promise=="function"&&this instanceof Promise?l:a.call(this)}})}function Vr(o,e,n,t,i){let r=Zone.__symbol__(t);if(e[r])return;let s=e[r]=e[t];e[t]=function(a,l,p){return l&&l.prototype&&i.forEach(function(f){let g=`${n}.${t}::`+f,y=l.prototype;try{if(y.hasOwnProperty(f)){let w=o.ObjectGetOwnPropertyDescriptor(y,f);w&&w.value?(w.value=o.wrapWithCurrentZone(w.value,g),o._redefineProperty(l.prototype,f,w)):y[f]&&(y[f]=o.wrapWithCurrentZone(y[f],g))}else y[f]&&(y[f]=o.wrapWithCurrentZone(y[f],g))}catch{}}),s.call(e,a,l,p)},o.attachOriginToPatched(e[t],s)}function Xr(o){o.__load_patch("util",(e,n,t)=>{let i=wn(e);t.patchOnProperties=fi,t.patchMethod=De,t.bindArguments=Mn,t.patchMacroTask=Or;let r=n.__symbol__("BLACK_LISTED_EVENTS"),s=n.__symbol__("UNPATCHED_EVENTS");e[s]&&(e[r]=e[s]),e[r]&&(n[r]=n[s]=e[r]),t.patchEventPrototype=zr,t.patchEventTarget=Nr,t.isIEOrEdge=Fr,t.ObjectDefineProperty=kn,t.ObjectGetOwnPropertyDescriptor=ct,t.ObjectCreate=Pr,t.ArraySlice=jr,t.patchClass=at,t.wrapWithCurrentZone=Sn,t.filterProperties=bi,t.attachOriginToPatched=Te,t._redefineProperty=Object.defineProperty,t.patchCallbacks=Vr,t.getGlobalObjects=()=>({globalSources:mi,zoneSymbolEventNames:ue,eventNames:i,isBrowser:Pn,isMix:pi,isNode:Kt,TRUE_STR:we,FALSE_STR:ke,ZONE_SYMBOL_PREFIX:lt,ADD_EVENT_LISTENER_STR:Tn,REMOVE_EVENT_LISTENER_STR:xn})})}function Kr(o){qr(o),Ur(o),Xr(o)}var Ii=Mr();Kr(Ii);Gr(Ii);Un(qt,oi).catch(o=>console.error(o));
