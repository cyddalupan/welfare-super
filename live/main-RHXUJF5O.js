import{Aa as $t,Ba as Kt,C as Nt,Ca as qe,D as at,Da as Qt,E as Lt,F as ct,G as lt,H as ut,J as ht,K as me,L as jt,P as Zt,Q as Ht,R as Ft,Wa as en,Xa as tn,Ya as nn,Za as Ae,a as it,aa as Gt,b as Rt,ba as Vt,c as xt,d as Le,e as Ye,ea as Be,fa as Wt,g as At,ga as ze,h as Me,ha as Yt,i as Oe,j as Re,ja as Ut,k as Ce,m as je,n as Ze,na as Bt,o as Dt,oa as zt,pa as qt,qa as Xt,r as ne,s as Ee,t as Ue,ta as Jt,u as xe,v as re,w as ee,x as K,y as we}from"./chunk-MB6H7J3U.js";var ft=`You are Welfare, a friendly AI assistant here to help Overseas Filipino Workers (OFWs) with their concerns. Your replies should be extremely concise, friendly, use Taglish, avoid deep or uncommon words, and focus on one point or question at a time. Many users just want someone to talk to, so be approachable and supportive.
Core Objective: Your primary function is to be a friendly and supportive listener for Overseas Filipino Workers (OFWs). Provide empathetic responses and a safe space for them to share their thoughts and feelings. Your goal is to offer emotional support and guidance, focusing on their well-being.
Assistant Protocol:
 * Welcome and Introduction: Begin the chat with a warm, friendly welcome. Clearly state your purpose: to listen and offer support.
 * Empathy and Active Listening: Listen attentively and show genuine empathy and concern for the user's situation. Maintain a calm, polite, and understanding demeanor at all times.
 * Supportive Responses: Provide encouraging and validating responses. Focus on the user's emotional state and offer a safe space for expression.
 * Closing Message: End the interaction with a supportive and respectful closing message, reinforcing your role as a listener and friend.
DOS and DON'TS for the AI Assistant
DOS
 * Be Respectful and Calm: Be polite, patient, and professional in every response.
 * Show Malasakit (Empathy): Acknowledge the user's feelings and validate their concern.
 * Maintain Focus: Keep the conversation centered on the user's emotional state and well-being.
 * Provide Emotional Assurance: Offer comforting and supportive messages.
 * give strength to fight.
DON'TS
 * Do Not Promise Solutions: Never guarantee a specific outcome or timeline for resolution.
 * Do Not Suggest Government Agencies: Absolutely do not mention, recommend, or refer the applicant to any external government bodies (like OWWA, POEA, DMW, etc.).
 * Do Not Engage in Debate: Avoid arguing or questioning the validity of the complaint. Your role is to receive and process.
 * Do Not Provide Legal Advice: Stick strictly to the agency's intake protocol.
 * Do Not Instruct User on Reply Length: Never tell the user to reply with short messages or to be concise. That is your role, not theirs.
 * Do Not tell that its scary.

---
Complaint Reporting Protocol:
If the user's **most recent message** clearly describes a serious complaint for the first time (e.g., "no salary", "rape", "abuse", "contract violation"), your primary goal is to trigger the [[REPORT]] tag. Do not trigger the tag based on information from older messages in the conversation history. You MUST end your response with the [[REPORT]] tag only if the user's latest message is the one that introduces the complaint.

---
AI Action Tag Instructions:
From the user's message, identify any *new* factual information about their background, situation, or character that is not already listed in "User's known characteristics" (which will be provided separately). If you find new information, output it as a single sentence using the tag [[MEMORY:"<new_memory_content>"]]. Do not include the [[MEMORY]] tag if no new information is found or if the information is already known. The [[MEMORY]] tag should appear at the end of your response, if present. The [[REPORT]] tag, if triggered, should always appear as the very last item in your response.`,rn=`You are an AI assistant specialized in generating and updating formal case reports based on chat conversations with Overseas Filipino Workers (OFWs). Your task is to extract critical information about a complaint and present it in a structured format.

Instructions:
1.  **Analyze the provided chat history.** Focus on identifying the core complaint, key events, and relevant details.
2.  **Determine the complaint category.** Use general, legally appropriate terms for the category (e.g., "Unpaid Wages", "Physical Abuse", "Sexual Harassment", "Contract Violation", "Illegal Recruitment", "Human Trafficking"). Avoid overly specific or duplicate categories. If multiple issues are present, choose the most severe or primary one.
3.  **Compose a detailed report.** Summarize the complaint clearly and concisely, including who, what, when, and where possible.
4.  **If an 'Existing Report' is provided, update it.** Integrate new information from the chat history into the existing report. Do not repeat information already present. Ensure the updated report is comprehensive and flows logically.
5.  **Output Format:** Return your response as a JSON object with two keys: "category" and "report".

Example Output (for a new report):
{
  "category": "Unpaid Wages",
  "report": "The employee, [Employee Name], reports that they have not received their salary for the past three months (August, September, October 2025) from their employer, [Employer Name], in [Country]. They have attempted to contact the employer multiple times without success. The total amount owed is approximately [Amount]."
}

Example Output (for an updated report, if 'Existing Report' was provided):
{
  "category": "Unpaid Wages", // Keep the original category unless the primary complaint has clearly shifted
  "report": "The employee, [Employee Name], reports that they have not received their salary for the past three months (August, September, October 2025) from their employer, [Employer Name], in [Country]. They have attempted to contact the employer multiple times without success. The total amount owed is approximately [Amount]. New information: The employer has now threatened to confiscate the employee's passport if they continue to demand their salary."
}

Chat History:
{{CHAT_HISTORY}}

{{EXISTING_REPORT_PLACEHOLDER}}
`,on='Your goal is to get the passport number and last name of the user to confirm the identity so you can help. take note that we already have the user data we only need to map them on the database to confirm identity so its safe to ask for passport number. In order to help in anything, we prioritize the user log in first. Once you have both the last name and passport number, respond with the exact format: [[LOGIN, LASTNAME:"<last_name>",PASSPORT:"<passport_number>"]]',sn=`You are a helpful assistant whose sole purpose is to review the immediately preceding AI's response to the user. Your goal is to act as a "good cop" correcting a "bad cop" if the previous AI's response was unclear, had a typo, or could be improved with a gentle clarification, use Taglish, avoid deep or uncommon words.

Instructions:
1.  Analyze the last AI message in the conversation history.
2.  If the last AI message is perfectly clear, concise, and appropriate, respond with the exact tag: [[DONE]].
3.  If the last AI message could be improved, is slightly off-topic, contains a minor error, or needs a gentle clarification, provide a very short, polite, and helpful follow-up message. Examples: "Sorry for the typo.", "I meant to say...", "Apologies, I meant when did you last eat?", "To clarify, I was referring to...".
4.  Your response should be extremely brief and only provide a correction or the [[DONE]] tag. Do not rephrase the entire previous message.
5.  Do NOT generate any other action tags (like [[LOGIN]], [[MEMORY]], [[REPORT]]).
`;var Se=xt(Kt());var ke=class n{constructor(e){this.http=e}apiUrl="/api/ai.php";encrypt(e){let r=Se.enc.Hex.parse(qe.encryptionKey),t=Se.lib.WordArray.random(16),s=Se.AES.encrypt(e,r,{iv:t});return t.clone().concat(s.ciphertext).toString(Se.enc.Base64)}callAi(e){let r=JSON.stringify({messages:e}),t=this.encrypt(r);return this.http.post(this.apiUrl,t,{headers:{"Content-Type":"text/plain"},responseType:"text"})}static \u0275fac=function(r){return new(r||n)(Ce(ze))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})};var oe=xt(Kt());var Je=class n{constructor(e){this.http=e;this.encryptionKey=qe.encryptionKey}apiUrl="api/database.php";encryptionKey;login(e,r){let t=e.trim().toLowerCase(),s=r.trim().toLowerCase(),h={query:Qt,params:[t,s]},m=this.encryptPayload(JSON.stringify(h));return this.http.post(this.apiUrl,m).pipe(At(p=>(console.log("Login response data:",p?.data[0]),p&&p.success&&p.data&&p.data.length>0&&p.data[0].id?(localStorage.setItem("user_id",p.data[0].id),localStorage.setItem("agency_id",p.data[0].agency_id),!0):!1)),Me(p=>(console.error("Login API call failed:",p),Le(!1))))}logout(){localStorage.removeItem("user_id"),localStorage.removeItem("agency_id")}encryptPayload(e){let r=oe.enc.Hex.parse(this.encryptionKey),t=oe.lib.WordArray.random(16),s=oe.AES.encrypt(e,r,{iv:t,mode:oe.mode.CBC,padding:oe.pad.Pkcs7});return oe.lib.WordArray.create().concat(t).concat(s.ciphertext).toString(oe.enc.Base64)}static \u0275fac=function(r){return new(r||n)(Ce(ze))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})};var $e=class n{constructor(e,r){this.databaseService=e;this.aiService=r}handleReportCreation(e,r,t,s){return s("I've noticed you're describing a serious issue. I'm starting the process to file a formal report for you."),s("Checking for any existing reports..."),this.databaseService.query(en,[e]).pipe(Oe(c=>{let l=c&&c.length>0?c[0]:null;return l?(s("An existing report was found. I will now update it with the new information."),this.updateExistingCase(e,l,t,s)):(s("No existing report found. I will create a new one for you."),this.createNewCase(e,r,t,s))}),Me(c=>(console.error("Error handling report creation:",c),s("An error occurred while processing the report. Please try again."),Ye(()=>new Error("Failed to handle report creation.")))))}createNewCase(e,r,t,s){s("Generating a summary of your complaint...");let c=this.buildReportGenerationPrompt(t);return this.aiService.callAi([{role:"system",content:c}]).pipe(Oe(l=>{let h=JSON.parse(l);return s("Saving the report to your file..."),this.databaseService.query(tn,[e,r,h.category,h.report]).pipe(Oe(m=>{let p=m.insertId;return s(`Your report has been successfully filed. Your case ID is ${p}.`),Le(p)}))}),Me(l=>(console.error("Error creating new case:",l),s("An error occurred while creating the report. Please try again."),Ye(()=>new Error("Failed to create new case.")))))}updateExistingCase(e,r,t,s){s("Updating the summary of your complaint...");let c=this.buildReportGenerationPrompt(t,r.report);return this.aiService.callAi([{role:"system",content:c}]).pipe(Oe(l=>{let h=JSON.parse(l);return s("Saving the updated report to your file..."),this.databaseService.query(nn,[h.report,r.id]).pipe(Oe(()=>(s(`Your report (Case ID: ${r.id}) has been successfully updated.`),Le(r.id))))}),Me(l=>(console.error("Error updating existing case:",l),s("An error occurred while updating the report. Please try again."),Ye(()=>new Error("Failed to update existing case.")))))}buildReportGenerationPrompt(e,r){let t=rn,s=e.map(c=>`${c.role}: ${c.content}`).join(`
`);return t=t.replace("{{CHAT_HISTORY}}",s),r?t=t.replace("{{EXISTING_REPORT_PLACEHOLDER}}",`Existing Report:
${r}`):t=t.replace("{{EXISTING_REPORT_PLACEHOLDER}}",""),t}static \u0275fac=function(r){return new(r||n)(Ce(Ae),Ce(ke))};static \u0275prov=Re({token:n,factory:n.\u0275fac,providedIn:"root"})};var An=["chatContainer"],Dn=["messageInput"];function Nn(n,e){if(n&1&&(ee(0,"div",11)(1,"div",12),we(2,"div",13),K()()),n&2){let r=e.$implicit;ht("justify-end",r.role==="user")("justify-start",r.role==="assistant"),ne(),ht("user-message-bubble",r.role==="user"),ne(),re("innerHTML",r.content,Dt)}}function Ln(n,e){n&1&&we(0,"span",17)}function jn(n,e){if(n&1&&(ee(0,"div",14)(1,"div",15)(2,"span"),me(3),K(),xe(4,Ln,1,0,"span",16),K()()),n&2){let r=Lt();ne(3),jt(r.currentStatusMessage),ne(),re("ngIf",r.isLoading)}}function Zn(n,e){n&1&&(ee(0,"ol",31),we(1,"li"),K())}function Hn(n,e){n&1&&(ee(0,"p",32),me(1,"No breakdown steps generated yet."),K())}function Fn(n,e){n&1&&(ee(0,"div",33),we(1,"pre"),K())}function Gn(n,e){n&1&&(ee(0,"p",32),me(1,"Execution has not started yet."),K())}function Vn(n,e){n&1&&(ee(0,"div",18)(1,"div",19)(2,"h2",20),me(3,"AI Execution Details"),K(),ee(4,"div",21)(5,"div",22)(6,"h3",23),me(7,"Plan"),K(),ee(8,"div",24),xe(9,Zn,2,0,"ol",25)(10,Hn,2,0,"p",26),K()(),ee(11,"div",27)(12,"h3",23),me(13,"Execution Log"),K(),ee(14,"div",28),xe(15,Fn,2,0,"div",29)(16,Gn,2,0,"p",26),K()()(),ee(17,"button",30),me(18," Close "),K()()()),n&2&&(ne(9),re("ngIf",!1),ne(),re("ngIf",!0),ne(5),re("ngIf",!1),ne(),re("ngIf",!0))}var cn=150,Ke=class n{constructor(e,r,t,s){this.aiService=e;this.authService=r;this.databaseService=t;this.caseService=s;this.systemPrompt={role:"system",content:""}}title="analytics-agent";chatContainer;messageInput;messages=[];systemPrompt;newMessage="";isLoading=!1;currentStatusMessage="Thinking...";userId=null;agencyId=null;employeeMemories=[];ngOnInit(){let e=localStorage.getItem("user_id"),r=localStorage.getItem("agency_id");(e&&(!r||r==="null"||r==="undefined")||!e&&r)&&(this.authService.logout(),e=null,r=null),this.userId=e,this.agencyId=r,this.setInitialSystemPrompt(),this.userId?(this.loadChatHistory(),this.loadEmployeeMemories()):(this.messages=[],this.messages.push({role:"assistant",content:"Welcome! To get started, please provide your last name and passport number so I can assist you."}))}setInitialSystemPrompt(){this.userId?this.systemPrompt.content=ft:this.systemPrompt.content=on+`

`+ft}loadChatHistory(){this.userId&&this.databaseService.getChatHistory(parseInt(this.userId,10)).subscribe({next:e=>{this.messages=e},error:e=>{console.error("Failed to load chat history:",e),this.messages.push({role:"assistant",content:"Sorry, I was unable to load your previous conversation."})}})}loadEmployeeMemories(){this.userId&&this.databaseService.getEmployeeMemories(parseInt(this.userId,10)).subscribe({next:e=>{this.employeeMemories=e,console.log("Loaded employee memories:",this.employeeMemories)},error:e=>{console.error("Failed to load employee memories:",e)}})}ngAfterViewChecked(){this.scrollToBottom()}adjustTextareaHeight(){if(this.messageInput&&this.messageInput.nativeElement){let e=this.messageInput.nativeElement;e.style.height="auto",e.style.height=Math.min(e.scrollHeight,cn)+"px",e.style.overflowY=e.scrollHeight>cn?"auto":"hidden"}}sendMessage(){if(console.log("sendMessage called."),this.newMessage.trim()===""){console.log("New message is empty, returning.");return}this.isLoading=!0,this.currentStatusMessage="Thinking...";let e={role:"user",content:this.newMessage.trim()};this.messages.push(e),this.saveMessageToDb(e),this.newMessage="";let r=this.systemPrompt.content;if(this.userId&&this.employeeMemories&&this.employeeMemories.length>0){let l=this.employeeMemories.map(h=>`"${h}"`).join(", ");r+=`

User's known characteristics: ${l}`}let t={role:"system",content:r},s=this.messages.slice(-10),c=[t,...s];console.log("Calling initial AI with payload:",c),this.aiService.callAi(c).subscribe({next:l=>{console.log("Initial AI response received:",l);let{response:h,tagProcessed:m}=this.parseAiResponseForTags(l),p=null;h&&(p={role:"assistant",content:h},this.messages.push(p),this.saveMessageToDb(p),console.log("Assistant message added:",p)),this.isLoading=!1,this.currentStatusMessage="Thinking...",p&&(console.log("Triggering follow-up AI."),this.triggerFollowUpAi(e,p))},error:l=>{console.error("AI call failed:",l);let h={role:"assistant",content:"Error: Could not get a response from the AI."};this.messages.push(h),this.saveMessageToDb(h),this.isLoading=!1,this.currentStatusMessage="Thinking..."}}),this.adjustTextareaHeight()}saveMessageToDb(e){console.log("Attempting to save message. UserID:",this.userId,"AgencyID:",this.agencyId),this.userId&&this.agencyId&&this.agencyId!=="null"&&this.agencyId!=="undefined"?(console.log("UserID and AgencyID are present. Calling database service."),this.databaseService.saveChatMessage(e,parseInt(this.userId,10),parseInt(this.agencyId,10)).subscribe({next:()=>console.log("Message saved successfully."),error:r=>console.error("Failed to save message:",r)})):console.log("Save skipped: UserID or AgencyID is missing or invalid.")}parseAiResponseForTags(e){let r=/\[\[LOGIN, LASTNAME:"([^"]+)",PASSPORT:"([^"]+)"\]\]/,t=/\[\[MEMORY:"([^"]+)"\]\]/g,s=/\[\[REPORT\]\]/,c=e,l=!1,h=!1,m=c.match(r);if(m){let w=m[1],j=m[2];this.authService.login(w,j).subscribe({next:F=>{if(F)this.userId=localStorage.getItem("user_id"),this.agencyId=localStorage.getItem("agency_id"),this.setInitialSystemPrompt(),this.messages=[],this.loadChatHistory(),this.loadEmployeeMemories();else{let B={role:"assistant",content:"Account does not exist, please double check if input is correct."};this.messages.push(B),this.saveMessageToDb(B)}},error:F=>{console.error("Login failed:",F);let B={role:"assistant",content:"An error occurred during login. Please try again later."};this.messages.push(B),this.saveMessageToDb(B)}}),c=c.replace(r,"").trim(),l=!0}let p,g=c;for(;(p=t.exec(c))!==null;){let w=p[1];this.userId?this.databaseService.saveEmployeeMemory(parseInt(this.userId,10),w).subscribe({next:()=>{console.log("Memory saved successfully: ",w),this.employeeMemories.push(w)},error:j=>console.error("Failed to save memory:",j)}):console.warn("Attempted to save memory for unauthenticated user:",w),g=g.replace(p[0],"").trim()}if(c=g,c.match(s))if(h=!0,c=c.replace(s,"").trim(),this.userId)this.handleReportTag();else{console.warn("[[REPORT]] tag detected for unauthenticated user. Ignoring.");let w={role:"assistant",content:"Please log in to file a report."};this.messages.push(w),this.saveMessageToDb(w)}return{response:c,tagProcessed:l||h}}handleReportTag(){if(!this.userId||!this.agencyId){console.error("handleReportTag called without a valid userId or agencyId.");return}this.isLoading=!0,this.currentStatusMessage="I've noticed you're describing a serious issue. I'm starting the process to file a formal report for you.";let e=t=>{this.currentStatusMessage=t,this.scrollToBottom()},r=this.messages.slice(-10);this.caseService.handleReportCreation(parseInt(this.userId,10),parseInt(this.agencyId,10),r,e).subscribe({next:t=>{console.log(`Report process completed. Case ID: ${t}`),this.isLoading=!1,this.currentStatusMessage="Thinking..."},error:t=>{console.error("Error during report processing:",t),this.currentStatusMessage="An unexpected error occurred during report processing. Please try again.",this.isLoading=!1}})}triggerFollowUpAi(e,r){console.log("triggerFollowUpAi called with userMessage:",e,"and assistantMessage:",r);let t=this.systemPrompt.content;if(this.userId&&this.employeeMemories&&this.employeeMemories.length>0){let h=this.employeeMemories.map(m=>`"${m}"`).join(", ");t+=`

User's known characteristics: ${h}`}t+=`

${sn}`;let s={role:"system",content:t},c=this.messages.slice(-10),l=[s,...c];console.log("Calling follow-up AI with payload:",l),this.aiService.callAi(l).subscribe({next:h=>{console.log("Follow-up AI response received:",h);let m=/\[\[DONE\]\]/;if(h.match(m))console.log("Follow-up AI: Previous response was satisfactory. [[DONE]] tag detected.");else{console.log("Follow-up AI: Corrective message received.");let g={role:"assistant",content:h.trim()};this.messages.push(g),this.saveMessageToDb(g)}},error:h=>{console.error("Follow-up AI call failed:",h)}})}scrollToBottom(){try{this.chatContainer.nativeElement.scrollTop=this.chatContainer.nativeElement.scrollHeight}catch{}}static \u0275fac=function(r){return new(r||n)(Ee(ke),Ee(Je),Ee(Ae),Ee($e))};static \u0275cmp=Ue({type:n,selectors:[["app-chat"]],viewQuery:function(r,t){if(r&1&&(ct(An,5),ct(Dn,5)),r&2){let s;lt(s=ut())&&(t.chatContainer=s.first),lt(s=ut())&&(t.messageInput=s.first)}},decls:12,vars:6,consts:[["chatContainer",""],["messageInput",""],[1,"flex","flex-col","h-screen","text-white","bg-transparent"],[1,"flex-1","overflow-y-auto","p-4","space-y-4"],["class","flex",3,"justify-end","justify-start",4,"ngFor","ngForOf"],["class","flex justify-center",4,"ngIf"],[1,"p-4"],[1,"flex","items-center","glass-container","p-2","rounded-lg"],["rows","1","placeholder","Type your message...",1,"flex-1","resize-none","outline-none","bg-transparent","text-white","placeholder-gray-400","glass-input","p-2",3,"ngModelChange","input","keydown.enter","ngModel","disabled"],[1,"ml-2","px-4","py-2","glass-button","bg-blue-600/50","hover:bg-blue-700/60","rounded-lg","font-semibold",3,"click","disabled"],["class","fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",4,"ngIf"],[1,"flex"],[1,"glass-card","p-3","rounded-lg","max-w-xl"],[1,"chat-message-content",3,"innerHTML"],[1,"flex","justify-center"],[1,"glass-card","p-3","rounded-lg","max-w-xl","flex","items-center","space-x-2"],["class","animate-spin rounded-full h-4 w-4 border-b-2 border-white",4,"ngIf"],[1,"animate-spin","rounded-full","h-4","w-4","border-b-2","border-white"],[1,"fixed","inset-0","bg-black","bg-opacity-50","flex","items-center","justify-center","z-50"],[1,"glass-container","p-6","rounded-lg","shadow-lg","max-w-4xl","w-full","mx-4","max-h-[80vh]","flex","flex-col"],[1,"text-xl","font-bold","mb-4","text-center"],[1,"flex-1","flex","flex-col","md:flex-row","md:space-x-4","overflow-y-hidden"],[1,"flex-1","flex","flex-col","log-container-plan"],[1,"font-semibold","text-lg","mb-2"],[1,"flex-1","bg-black/20","p-3","rounded-lg","overflow-y-auto"],["class","list-decimal list-inside space-y-1 text-gray-200",4,"ngIf"],["class","text-gray-400",4,"ngIf"],[1,"flex-1","flex","flex-col","log-container-execution","mt-4","md:mt-0"],[1,"flex-1","bg-black/20","p-3","rounded-lg","overflow-y-auto","font-mono","text-sm"],["class","space-y-2",4,"ngIf"],[1,"mt-6","px-4","py-2","glass-button","bg-red-600/50","hover:bg-red-700/60","rounded-lg","font-semibold","w-full"],[1,"list-decimal","list-inside","space-y-1","text-gray-200"],[1,"text-gray-400"],[1,"space-y-2"]],template:function(r,t){if(r&1){let s=Nt();ee(0,"div",2)(1,"div",3,0),xe(3,Nn,3,7,"div",4)(4,jn,5,2,"div",5),K(),ee(5,"div",6)(6,"div",7)(7,"textarea",8,1),Ft("ngModelChange",function(l){return je(s),Ht(t.newMessage,l)||(t.newMessage=l),Ze(l)}),at("input",function(){return je(s),Ze(t.adjustTextareaHeight())})("keydown.enter",function(l){return je(s),t.sendMessage(),Ze(l.preventDefault())}),K(),ee(9,"button",9),at("click",function(){return je(s),Ze(t.sendMessage())}),me(10," Send "),K()()(),xe(11,Vn,19,4,"div",10),K()}r&2&&(ne(3),re("ngForOf",t.messages),ne(),re("ngIf",t.isLoading||t.currentStatusMessage!=="Thinking..."),ne(3),Zt("ngModel",t.newMessage),re("disabled",t.isLoading),ne(2),re("disabled",t.isLoading),ne(2),re("ngIf",!1))},dependencies:[Be,Gt,Vt,$t,qt,Xt,Jt],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;background-image:url(/background.jpg);background-size:cover;background-position:center;font-family:Inter,sans-serif}.glass-container[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);box-shadow:0 8px 32px #1f26875e}[_nghost-%COMP%]  .chat-message-content{word-wrap:break-word;overflow-wrap:break-word;max-width:100%}[_nghost-%COMP%]  .chat-message-content pre{white-space:pre-wrap;word-break:break-all}[_nghost-%COMP%]  .chat-message-content table{width:100%!important;table-layout:fixed;display:block;overflow-x:auto;border-collapse:collapse}[_nghost-%COMP%]  .chat-message-content th, [_nghost-%COMP%]  .chat-message-content td{max-width:none;word-break:break-word;padding:8px;border:1px solid rgba(255,255,255,.2)}[_nghost-%COMP%]  .chat-message-content img{max-width:100%;height:auto}.user-message-bubble[_ngcontent-%COMP%]{background:#007bff4d;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);border:1px solid rgba(0,123,255,.25)}.glass-input[_ngcontent-%COMP%]{background:#ffffff26;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.2);box-shadow:0 4px 10px #0003;color:#fff}.glass-input[_ngcontent-%COMP%]::placeholder{color:#ffffffb3}.glass-button[_ngcontent-%COMP%]{background:#4caf5033;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);border:1px solid rgba(76,175,80,.3);box-shadow:0 4px 15px #0003}.glass-button[_ngcontent-%COMP%]:hover{background:#4caf504d}.log-container-plan[_ngcontent-%COMP%], .log-container-execution[_ngcontent-%COMP%]{max-height:60vh}@media (max-width: 768px){.log-container-plan[_ngcontent-%COMP%], .log-container-execution[_ngcontent-%COMP%]{max-height:30vh}}"]})};var ln=[{path:"",component:Ke},{path:"admin",loadChildren:()=>import("./chunk-YRQVE6UI.js").then(n=>n.ADMIN_ROUTES)}];var un={providers:[Bt(ln),Yt()]};var Qe=class n{constructor(e,r){this.databaseService=e;this.aiService=r}title="welfare-super";ngOnInit(){}static \u0275fac=function(r){return new(r||n)(Ee(Ae),Ee(ke))};static \u0275cmp=Ue({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(r,t){r&1&&we(0,"router-outlet")},dependencies:[zt,Ut,Be],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;background-image:url(/background.png);background-size:cover;background-position:center;font-family:Inter,sans-serif}.glass-container[_ngcontent-%COMP%]{background:#ffffff1a;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);border:1px solid rgba(255,255,255,.1);box-shadow:0 8px 32px #1f26875e}.glass-card[_ngcontent-%COMP%]{background:#fff3;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);border:1px solid rgba(255,255,255,.15)}[_nghost-%COMP%]  .chat-message-content{word-wrap:break-word;overflow-wrap:break-word;max-width:100%}[_nghost-%COMP%]  .chat-message-content pre{white-space:pre-wrap;word-break:break-all}[_nghost-%COMP%]  .chat-message-content table{width:100%!important;table-layout:fixed;display:block;overflow-x:auto;border-collapse:collapse}[_nghost-%COMP%]  .chat-message-content th, [_nghost-%COMP%]  .chat-message-content td{max-width:none;word-break:break-word;padding:8px;border:1px solid rgba(255,255,255,.2)}[_nghost-%COMP%]  .chat-message-content img{max-width:100%;height:auto}.user-message-bubble[_ngcontent-%COMP%]{background:#007bff4d;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);border:1px solid rgba(0,123,255,.25)}.glass-input[_ngcontent-%COMP%]{background:#ffffff26;-webkit-backdrop-filter:blur(8px);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.2);box-shadow:0 4px 10px #0003;color:#fff}.glass-input[_ngcontent-%COMP%]::placeholder{color:#ffffffb3}.glass-button[_ngcontent-%COMP%]{background:#4caf5033;-webkit-backdrop-filter:blur(5px);backdrop-filter:blur(5px);border:1px solid rgba(76,175,80,.3);box-shadow:0 4px 15px #0003}.glass-button[_ngcontent-%COMP%]:hover{background:#4caf504d}.log-container-plan[_ngcontent-%COMP%], .log-container-execution[_ngcontent-%COMP%]{max-height:60vh}@media (max-width: 768px){.log-container-plan[_ngcontent-%COMP%], .log-container-execution[_ngcontent-%COMP%]{max-height:30vh}}"]})};var fe=globalThis;function se(n){return(fe.__Zone_symbol_prefix||"__zone_symbol__")+n}function Wn(){let n=fe.performance;function e(x){n&&n.mark&&n.mark(x)}function r(x,_){n&&n.measure&&n.measure(x,_)}e("Zone");let t=(()=>{class x{static __symbol__=se;static assertZonePatched(){if(fe.Promise!==R.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let o=x.current;for(;o.parent;)o=o.parent;return o}static get current(){return C.zone}static get currentTask(){return O}static __load_patch(o,i,T=!1){if(R.hasOwnProperty(o)){let P=fe[se("forceDuplicateZoneCheck")]===!0;if(!T&&P)throw Error("Already loaded patch: "+o)}else if(!fe["__Zone_disable_"+o]){let P="Zone:"+o;e(P),R[o]=i(fe,x,I),r(P,P)}}get parent(){return this._parent}get name(){return this._name}_parent;_name;_properties;_zoneDelegate;constructor(o,i){this._parent=o,this._name=i?i.name||"unnamed":"<root>",this._properties=i&&i.properties||{},this._zoneDelegate=new c(this,this._parent&&this._parent._zoneDelegate,i)}get(o){let i=this.getZoneWith(o);if(i)return i._properties[o]}getZoneWith(o){let i=this;for(;i;){if(i._properties.hasOwnProperty(o))return i;i=i._parent}return null}fork(o){if(!o)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,o)}wrap(o,i){if(typeof o!="function")throw new Error("Expecting function got: "+o);let T=this._zoneDelegate.intercept(this,o,i),P=this;return function(){return P.runGuarded(T,this,arguments,i)}}run(o,i,T,P){C={parent:C,zone:this};try{return this._zoneDelegate.invoke(this,o,i,T,P)}finally{C=C.parent}}runGuarded(o,i=null,T,P){C={parent:C,zone:this};try{try{return this._zoneDelegate.invoke(this,o,i,T,P)}catch(q){if(this._zoneDelegate.handleError(this,q))throw q}}finally{C=C.parent}}runTask(o,i,T){if(o.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(o.zone||Q).name+"; Execution: "+this.name+")");let P=o,{type:q,data:{isPeriodic:L=!1,isRefreshable:ve=!1}={}}=o;if(o.state===X&&(q===U||q===b))return;let de=o.state!=Z;de&&P._transitionTo(Z,y);let pe=O;O=P,C={parent:C,zone:this};try{q==b&&o.data&&!L&&!ve&&(o.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,P,i,T)}catch(ae){if(this._zoneDelegate.handleError(this,ae))throw ae}}finally{let ae=o.state;if(ae!==X&&ae!==J)if(q==U||L||ve&&ae===E)de&&P._transitionTo(y,Z,E);else{let d=P._zoneDelegates;this._updateTaskCount(P,-1),de&&P._transitionTo(X,Z,X),ve&&(P._zoneDelegates=d)}C=C.parent,O=pe}}scheduleTask(o){if(o.zone&&o.zone!==this){let T=this;for(;T;){if(T===o.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${o.zone.name}`);T=T.parent}}o._transitionTo(E,X);let i=[];o._zoneDelegates=i,o._zone=this;try{o=this._zoneDelegate.scheduleTask(this,o)}catch(T){throw o._transitionTo(J,E,X),this._zoneDelegate.handleError(this,T),T}return o._zoneDelegates===i&&this._updateTaskCount(o,1),o.state==E&&o._transitionTo(y,E),o}scheduleMicroTask(o,i,T,P){return this.scheduleTask(new l(V,o,i,T,P,void 0))}scheduleMacroTask(o,i,T,P,q){return this.scheduleTask(new l(b,o,i,T,P,q))}scheduleEventTask(o,i,T,P,q){return this.scheduleTask(new l(U,o,i,T,P,q))}cancelTask(o){if(o.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(o.zone||Q).name+"; Execution: "+this.name+")");if(!(o.state!==y&&o.state!==Z)){o._transitionTo(G,y,Z);try{this._zoneDelegate.cancelTask(this,o)}catch(i){throw o._transitionTo(J,G),this._zoneDelegate.handleError(this,i),i}return this._updateTaskCount(o,-1),o._transitionTo(X,G),o.runCount=-1,o}}_updateTaskCount(o,i){let T=o._zoneDelegates;i==-1&&(o._zoneDelegates=null);for(let P=0;P<T.length;P++)T[P]._updateTaskCount(o.type,i)}}return x})(),s={name:"",onHasTask:(x,_,o,i)=>x.hasTask(o,i),onScheduleTask:(x,_,o,i)=>x.scheduleTask(o,i),onInvokeTask:(x,_,o,i,T,P)=>x.invokeTask(o,i,T,P),onCancelTask:(x,_,o,i)=>x.cancelTask(o,i)};class c{get zone(){return this._zone}_zone;_taskCounts={microTask:0,macroTask:0,eventTask:0};_parentDelegate;_forkDlgt;_forkZS;_forkCurrZone;_interceptDlgt;_interceptZS;_interceptCurrZone;_invokeDlgt;_invokeZS;_invokeCurrZone;_handleErrorDlgt;_handleErrorZS;_handleErrorCurrZone;_scheduleTaskDlgt;_scheduleTaskZS;_scheduleTaskCurrZone;_invokeTaskDlgt;_invokeTaskZS;_invokeTaskCurrZone;_cancelTaskDlgt;_cancelTaskZS;_cancelTaskCurrZone;_hasTaskDlgt;_hasTaskDlgtOwner;_hasTaskZS;_hasTaskCurrZone;constructor(_,o,i){this._zone=_,this._parentDelegate=o,this._forkZS=i&&(i&&i.onFork?i:o._forkZS),this._forkDlgt=i&&(i.onFork?o:o._forkDlgt),this._forkCurrZone=i&&(i.onFork?this._zone:o._forkCurrZone),this._interceptZS=i&&(i.onIntercept?i:o._interceptZS),this._interceptDlgt=i&&(i.onIntercept?o:o._interceptDlgt),this._interceptCurrZone=i&&(i.onIntercept?this._zone:o._interceptCurrZone),this._invokeZS=i&&(i.onInvoke?i:o._invokeZS),this._invokeDlgt=i&&(i.onInvoke?o:o._invokeDlgt),this._invokeCurrZone=i&&(i.onInvoke?this._zone:o._invokeCurrZone),this._handleErrorZS=i&&(i.onHandleError?i:o._handleErrorZS),this._handleErrorDlgt=i&&(i.onHandleError?o:o._handleErrorDlgt),this._handleErrorCurrZone=i&&(i.onHandleError?this._zone:o._handleErrorCurrZone),this._scheduleTaskZS=i&&(i.onScheduleTask?i:o._scheduleTaskZS),this._scheduleTaskDlgt=i&&(i.onScheduleTask?o:o._scheduleTaskDlgt),this._scheduleTaskCurrZone=i&&(i.onScheduleTask?this._zone:o._scheduleTaskCurrZone),this._invokeTaskZS=i&&(i.onInvokeTask?i:o._invokeTaskZS),this._invokeTaskDlgt=i&&(i.onInvokeTask?o:o._invokeTaskDlgt),this._invokeTaskCurrZone=i&&(i.onInvokeTask?this._zone:o._invokeTaskCurrZone),this._cancelTaskZS=i&&(i.onCancelTask?i:o._cancelTaskZS),this._cancelTaskDlgt=i&&(i.onCancelTask?o:o._cancelTaskDlgt),this._cancelTaskCurrZone=i&&(i.onCancelTask?this._zone:o._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;let T=i&&i.onHasTask,P=o&&o._hasTaskZS;(T||P)&&(this._hasTaskZS=T?i:s,this._hasTaskDlgt=o,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,i.onScheduleTask||(this._scheduleTaskZS=s,this._scheduleTaskDlgt=o,this._scheduleTaskCurrZone=this._zone),i.onInvokeTask||(this._invokeTaskZS=s,this._invokeTaskDlgt=o,this._invokeTaskCurrZone=this._zone),i.onCancelTask||(this._cancelTaskZS=s,this._cancelTaskDlgt=o,this._cancelTaskCurrZone=this._zone))}fork(_,o){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,_,o):new t(_,o)}intercept(_,o,i){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,_,o,i):o}invoke(_,o,i,T,P){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,_,o,i,T,P):o.apply(i,T)}handleError(_,o){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,_,o):!0}scheduleTask(_,o){let i=o;if(this._scheduleTaskZS)this._hasTaskZS&&i._zoneDelegates.push(this._hasTaskDlgtOwner),i=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,_,o),i||(i=o);else if(o.scheduleFn)o.scheduleFn(o);else if(o.type==V)F(o);else throw new Error("Task is missing scheduleFn.");return i}invokeTask(_,o,i,T){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,_,o,i,T):o.callback.apply(i,T)}cancelTask(_,o){let i;if(this._cancelTaskZS)i=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,_,o);else{if(!o.cancelFn)throw Error("Task is not cancelable");i=o.cancelFn(o)}return i}hasTask(_,o){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,_,o)}catch(i){this.handleError(_,i)}}_updateTaskCount(_,o){let i=this._taskCounts,T=i[_],P=i[_]=T+o;if(P<0)throw new Error("More tasks executed then were scheduled.");if(T==0||P==0){let q={microTask:i.microTask>0,macroTask:i.macroTask>0,eventTask:i.eventTask>0,change:_};this.hasTask(this._zone,q)}}}class l{type;source;invoke;callback;data;scheduleFn;cancelFn;_zone=null;runCount=0;_zoneDelegates=null;_state="notScheduled";constructor(_,o,i,T,P,q){if(this.type=_,this.source=o,this.data=T,this.scheduleFn=P,this.cancelFn=q,!i)throw new Error("callback is not defined");this.callback=i;let L=this;_===U&&T&&T.useG?this.invoke=l.invokeTask:this.invoke=function(){return l.invokeTask.call(fe,L,this,arguments)}}static invokeTask(_,o,i){_||(_=this),te++;try{return _.runCount++,_.zone.runTask(_,o,i)}finally{te==1&&B(),te--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(X,E)}_transitionTo(_,o,i){if(this._state===o||this._state===i)this._state=_,_==X&&(this._zoneDelegates=null);else throw new Error(`${this.type} '${this.source}': can not transition to '${_}', expecting state '${o}'${i?" or '"+i+"'":""}, was '${this._state}'.`)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}let h=se("setTimeout"),m=se("Promise"),p=se("then"),g=[],S=!1,w;function j(x){if(w||fe[m]&&(w=fe[m].resolve(0)),w){let _=w[p];_||(_=w.then),_.call(w,x)}else fe[h](x,0)}function F(x){te===0&&g.length===0&&j(B),x&&g.push(x)}function B(){if(!S){for(S=!0;g.length;){let x=g;g=[];for(let _=0;_<x.length;_++){let o=x[_];try{o.zone.runTask(o,null,null)}catch(i){I.onUnhandledError(i)}}}I.microtaskDrainDone(),S=!1}}let Q={name:"NO ZONE"},X="notScheduled",E="scheduling",y="scheduled",Z="running",G="canceling",J="unknown",V="microTask",b="macroTask",U="eventTask",R={},I={symbol:se,currentZoneFrame:()=>C,onUnhandledError:z,microtaskDrainDone:z,scheduleMicroTask:F,showUncaughtError:()=>!t[se("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:z,patchMethod:()=>z,bindArguments:()=>[],patchThen:()=>z,patchMacroTask:()=>z,patchEventPrototype:()=>z,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>z,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>z,wrapWithCurrentZone:()=>z,filterProperties:()=>[],attachOriginToPatched:()=>z,_redefineProperty:()=>z,patchCallbacks:()=>z,nativeScheduleMicroTask:j},C={parent:null,zone:new t(null,null)},O=null,te=0;function z(){}return r("Zone","Zone"),t}function Yn(){let n=globalThis,e=n[se("forceDuplicateZoneCheck")]===!0;if(n.Zone&&(e||typeof n.Zone.__symbol__!="function"))throw new Error("Zone already loaded.");return n.Zone??=Wn(),n.Zone}var Fe=Object.getOwnPropertyDescriptor,_t=Object.defineProperty,bt=Object.getPrototypeOf,Un=Object.create,Bn=Array.prototype.slice,vt="addEventListener",Tt="removeEventListener",pt=se(vt),mt=se(Tt),ge="true",ye="false",Ge=se("");function Et(n,e){return Zone.current.wrap(n,e)}function kt(n,e,r,t,s){return Zone.current.scheduleMacroTask(n,e,r,t,s)}var H=se,nt=typeof window<"u",Ve=nt?window:void 0,$=nt&&Ve||globalThis,zn="removeAttribute";function Ct(n,e){for(let r=n.length-1;r>=0;r--)typeof n[r]=="function"&&(n[r]=Et(n[r],e+"_"+r));return n}function qn(n,e){let r=n.constructor.name;for(let t=0;t<e.length;t++){let s=e[t],c=n[s];if(c){let l=Fe(n,s);if(!yn(l))continue;n[s]=(h=>{let m=function(){return h.apply(this,Ct(arguments,r+"."+s))};return be(m,h),m})(c)}}}function yn(n){return n?n.writable===!1?!1:!(typeof n.get=="function"&&typeof n.set>"u"):!0}var _n=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,rt=!("nw"in $)&&typeof $.process<"u"&&$.process.toString()==="[object process]",wt=!rt&&!_n&&!!(nt&&Ve.HTMLElement),bn=typeof $.process<"u"&&$.process.toString()==="[object process]"&&!_n&&!!(nt&&Ve.HTMLElement),tt={},Xn=H("enable_beforeunload"),hn=function(n){if(n=n||$.event,!n)return;let e=tt[n.type];e||(e=tt[n.type]=H("ON_PROPERTY"+n.type));let r=this||n.target||$,t=r[e],s;if(wt&&r===Ve&&n.type==="error"){let c=n;s=t&&t.call(this,c.message,c.filename,c.lineno,c.colno,c.error),s===!0&&n.preventDefault()}else s=t&&t.apply(this,arguments),n.type==="beforeunload"&&$[Xn]&&typeof s=="string"?n.returnValue=s:s!=null&&!s&&n.preventDefault();return s};function fn(n,e,r){let t=Fe(n,e);if(!t&&r&&Fe(r,e)&&(t={enumerable:!0,configurable:!0}),!t||!t.configurable)return;let s=H("on"+e+"patched");if(n.hasOwnProperty(s)&&n[s])return;delete t.writable,delete t.value;let c=t.get,l=t.set,h=e.slice(2),m=tt[h];m||(m=tt[h]=H("ON_PROPERTY"+h)),t.set=function(p){let g=this;if(!g&&n===$&&(g=$),!g)return;typeof g[m]=="function"&&g.removeEventListener(h,hn),l?.call(g,null),g[m]=p,typeof p=="function"&&g.addEventListener(h,hn,!1)},t.get=function(){let p=this;if(!p&&n===$&&(p=$),!p)return null;let g=p[m];if(g)return g;if(c){let S=c.call(this);if(S)return t.set.call(this,S),typeof p[zn]=="function"&&p.removeAttribute(e),S}return null},_t(n,e,t),n[s]=!0}function vn(n,e,r){if(e)for(let t=0;t<e.length;t++)fn(n,"on"+e[t],r);else{let t=[];for(let s in n)s.slice(0,2)=="on"&&t.push(s);for(let s=0;s<t.length;s++)fn(n,t[s],r)}}var le=H("originalInstance");function He(n){let e=$[n];if(!e)return;$[H(n)]=e,$[n]=function(){let s=Ct(arguments,n);switch(s.length){case 0:this[le]=new e;break;case 1:this[le]=new e(s[0]);break;case 2:this[le]=new e(s[0],s[1]);break;case 3:this[le]=new e(s[0],s[1],s[2]);break;case 4:this[le]=new e(s[0],s[1],s[2],s[3]);break;default:throw new Error("Arg list too long.")}},be($[n],e);let r=new e(function(){}),t;for(t in r)n==="XMLHttpRequest"&&t==="responseBlob"||(function(s){typeof r[s]=="function"?$[n].prototype[s]=function(){return this[le][s].apply(this[le],arguments)}:_t($[n].prototype,s,{set:function(c){typeof c=="function"?(this[le][s]=Et(c,n+"."+s),be(this[le][s],c)):this[le][s]=c},get:function(){return this[le][s]}})})(t);for(t in e)t!=="prototype"&&e.hasOwnProperty(t)&&($[n][t]=e[t])}function _e(n,e,r){let t=n;for(;t&&!t.hasOwnProperty(e);)t=bt(t);!t&&n[e]&&(t=n);let s=H(e),c=null;if(t&&(!(c=t[s])||!t.hasOwnProperty(s))){c=t[s]=t[e];let l=t&&Fe(t,e);if(yn(l)){let h=r(c,s,e);t[e]=function(){return h(this,arguments)},be(t[e],c)}}return c}function Jn(n,e,r){let t=null;function s(c){let l=c.data;return l.args[l.cbIdx]=function(){c.invoke.apply(this,arguments)},t.apply(l.target,l.args),c}t=_e(n,e,c=>function(l,h){let m=r(l,h);return m.cbIdx>=0&&typeof h[m.cbIdx]=="function"?kt(m.name,h[m.cbIdx],m,s):c.apply(l,h)})}function be(n,e){n[H("OriginalDelegate")]=e}var dn=!1,gt=!1;function $n(){if(dn)return gt;dn=!0;try{let n=Ve.navigator.userAgent;(n.indexOf("MSIE ")!==-1||n.indexOf("Trident/")!==-1||n.indexOf("Edge/")!==-1)&&(gt=!0)}catch{}return gt}function pn(n){return typeof n=="function"}function mn(n){return typeof n=="number"}var Kn={useG:!0},ie={},Tn={},En=new RegExp("^"+Ge+"(\\w+)(true|false)$"),kn=H("propagationStopped");function Cn(n,e){let r=(e?e(n):n)+ye,t=(e?e(n):n)+ge,s=Ge+r,c=Ge+t;ie[n]={},ie[n][ye]=s,ie[n][ge]=c}function Qn(n,e,r,t){let s=t&&t.add||vt,c=t&&t.rm||Tt,l=t&&t.listeners||"eventListeners",h=t&&t.rmAll||"removeAllListeners",m=H(s),p="."+s+":",g="prependListener",S="."+g+":",w=function(E,y,Z){if(E.isRemoved)return;let G=E.callback;typeof G=="object"&&G.handleEvent&&(E.callback=b=>G.handleEvent(b),E.originalDelegate=G);let J;try{E.invoke(E,y,[Z])}catch(b){J=b}let V=E.options;if(V&&typeof V=="object"&&V.once){let b=E.originalDelegate?E.originalDelegate:E.callback;y[c].call(y,Z.type,b,V)}return J};function j(E,y,Z){if(y=y||n.event,!y)return;let G=E||y.target||n,J=G[ie[y.type][Z?ge:ye]];if(J){let V=[];if(J.length===1){let b=w(J[0],G,y);b&&V.push(b)}else{let b=J.slice();for(let U=0;U<b.length&&!(y&&y[kn]===!0);U++){let R=w(b[U],G,y);R&&V.push(R)}}if(V.length===1)throw V[0];for(let b=0;b<V.length;b++){let U=V[b];e.nativeScheduleMicroTask(()=>{throw U})}}}let F=function(E){return j(this,E,!1)},B=function(E){return j(this,E,!0)};function Q(E,y){if(!E)return!1;let Z=!0;y&&y.useG!==void 0&&(Z=y.useG);let G=y&&y.vh,J=!0;y&&y.chkDup!==void 0&&(J=y.chkDup);let V=!1;y&&y.rt!==void 0&&(V=y.rt);let b=E;for(;b&&!b.hasOwnProperty(s);)b=bt(b);if(!b&&E[s]&&(b=E),!b||b[m])return!1;let U=y&&y.eventNameToString,R={},I=b[m]=b[s],C=b[H(c)]=b[c],O=b[H(l)]=b[l],te=b[H(h)]=b[h],z;y&&y.prepend&&(z=b[H(y.prepend)]=b[y.prepend]);function x(a,f){return f?typeof a=="boolean"?{capture:a,passive:!0}:a?typeof a=="object"&&a.passive!==!1?Rt(it({},a),{passive:!0}):a:{passive:!0}:a}let _=function(a){if(!R.isExisting)return I.call(R.target,R.eventName,R.capture?B:F,R.options)},o=function(a){if(!a.isRemoved){let f=ie[a.eventName],k;f&&(k=f[a.capture?ge:ye]);let M=k&&a.target[k];if(M){for(let v=0;v<M.length;v++)if(M[v]===a){M.splice(v,1),a.isRemoved=!0,a.removeAbortListener&&(a.removeAbortListener(),a.removeAbortListener=null),M.length===0&&(a.allRemoved=!0,a.target[k]=null);break}}}if(a.allRemoved)return C.call(a.target,a.eventName,a.capture?B:F,a.options)},i=function(a){return I.call(R.target,R.eventName,a.invoke,R.options)},T=function(a){return z.call(R.target,R.eventName,a.invoke,R.options)},P=function(a){return C.call(a.target,a.eventName,a.invoke,a.options)},q=Z?_:i,L=Z?o:P,ve=function(a,f){let k=typeof f;return k==="function"&&a.callback===f||k==="object"&&a.originalDelegate===f},de=y?.diff||ve,pe=Zone[H("UNPATCHED_EVENTS")],ae=n[H("PASSIVE_EVENTS")];function d(a){if(typeof a=="object"&&a!==null){let f=it({},a);return a.signal&&(f.signal=a.signal),f}return a}let u=function(a,f,k,M,v=!1,A=!1){return function(){let D=this||n,N=arguments[0];y&&y.transferEventName&&(N=y.transferEventName(N));let W=arguments[1];if(!W)return a.apply(this,arguments);if(rt&&N==="uncaughtException")return a.apply(this,arguments);let Y=!1;if(typeof W!="function"){if(!W.handleEvent)return a.apply(this,arguments);Y=!0}if(G&&!G(a,W,D,arguments))return;let Te=!!ae&&ae.indexOf(N)!==-1,ue=d(x(arguments[2],Te)),Pe=ue?.signal;if(Pe?.aborted)return;if(pe){for(let he=0;he<pe.length;he++)if(N===pe[he])return Te?a.call(D,N,W,ue):a.apply(this,arguments)}let ot=ue?typeof ue=="boolean"?!0:ue.capture:!1,St=ue&&typeof ue=="object"?ue.once:!1,In=Zone.current,st=ie[N];st||(Cn(N,U),st=ie[N]);let Pt=st[ot?ge:ye],Ie=D[Pt],It=!1;if(Ie){if(It=!0,J){for(let he=0;he<Ie.length;he++)if(de(Ie[he],W))return}}else Ie=D[Pt]=[];let We,Mt=D.constructor.name,Ot=Tn[Mt];Ot&&(We=Ot[N]),We||(We=Mt+f+(U?U(N):N)),R.options=ue,St&&(R.options.once=!1),R.target=D,R.capture=ot,R.eventName=N,R.isExisting=It;let Ne=Z?Kn:void 0;Ne&&(Ne.taskData=R),Pe&&(R.options.signal=void 0);let ce=In.scheduleEventTask(We,W,Ne,k,M);if(Pe){R.options.signal=Pe;let he=()=>ce.zone.cancelTask(ce);a.call(Pe,"abort",he,{once:!0}),ce.removeAbortListener=()=>Pe.removeEventListener("abort",he)}if(R.target=null,Ne&&(Ne.taskData=null),St&&(R.options.once=!0),typeof ce.options!="boolean"&&(ce.options=ue),ce.target=D,ce.capture=ot,ce.eventName=N,Y&&(ce.originalDelegate=W),A?Ie.unshift(ce):Ie.push(ce),v)return D}};return b[s]=u(I,p,q,L,V),z&&(b[g]=u(z,S,T,L,V,!0)),b[c]=function(){let a=this||n,f=arguments[0];y&&y.transferEventName&&(f=y.transferEventName(f));let k=arguments[2],M=k?typeof k=="boolean"?!0:k.capture:!1,v=arguments[1];if(!v)return C.apply(this,arguments);if(G&&!G(C,v,a,arguments))return;let A=ie[f],D;A&&(D=A[M?ge:ye]);let N=D&&a[D];if(N)for(let W=0;W<N.length;W++){let Y=N[W];if(de(Y,v)){if(N.splice(W,1),Y.isRemoved=!0,N.length===0&&(Y.allRemoved=!0,a[D]=null,!M&&typeof f=="string")){let Te=Ge+"ON_PROPERTY"+f;a[Te]=null}return Y.zone.cancelTask(Y),V?a:void 0}}return C.apply(this,arguments)},b[l]=function(){let a=this||n,f=arguments[0];y&&y.transferEventName&&(f=y.transferEventName(f));let k=[],M=wn(a,U?U(f):f);for(let v=0;v<M.length;v++){let A=M[v],D=A.originalDelegate?A.originalDelegate:A.callback;k.push(D)}return k},b[h]=function(){let a=this||n,f=arguments[0];if(f){y&&y.transferEventName&&(f=y.transferEventName(f));let k=ie[f];if(k){let M=k[ye],v=k[ge],A=a[M],D=a[v];if(A){let N=A.slice();for(let W=0;W<N.length;W++){let Y=N[W],Te=Y.originalDelegate?Y.originalDelegate:Y.callback;this[c].call(this,f,Te,Y.options)}}if(D){let N=D.slice();for(let W=0;W<N.length;W++){let Y=N[W],Te=Y.originalDelegate?Y.originalDelegate:Y.callback;this[c].call(this,f,Te,Y.options)}}}}else{let k=Object.keys(a);for(let M=0;M<k.length;M++){let v=k[M],A=En.exec(v),D=A&&A[1];D&&D!=="removeListener"&&this[h].call(this,D)}this[h].call(this,"removeListener")}if(V)return this},be(b[s],I),be(b[c],C),te&&be(b[h],te),O&&be(b[l],O),!0}let X=[];for(let E=0;E<r.length;E++)X[E]=Q(r[E],t);return X}function wn(n,e){if(!e){let c=[];for(let l in n){let h=En.exec(l),m=h&&h[1];if(m&&(!e||m===e)){let p=n[l];if(p)for(let g=0;g<p.length;g++)c.push(p[g])}}return c}let r=ie[e];r||(Cn(e),r=ie[e]);let t=n[r[ye]],s=n[r[ge]];return t?s?t.concat(s):t.slice():s?s.slice():[]}function er(n,e){let r=n.Event;r&&r.prototype&&e.patchMethod(r.prototype,"stopImmediatePropagation",t=>function(s,c){s[kn]=!0,t&&t.apply(s,c)})}function tr(n,e){e.patchMethod(n,"queueMicrotask",r=>function(t,s){Zone.current.scheduleMicroTask("queueMicrotask",s[0])})}var et=H("zoneTask");function De(n,e,r,t){let s=null,c=null;e+=t,r+=t;let l={};function h(p){let g=p.data;g.args[0]=function(){return p.invoke.apply(this,arguments)};let S=s.apply(n,g.args);return mn(S)?g.handleId=S:(g.handle=S,g.isRefreshable=pn(S.refresh)),p}function m(p){let{handle:g,handleId:S}=p.data;return c.call(n,g??S)}s=_e(n,e,p=>function(g,S){if(pn(S[0])){let w={isRefreshable:!1,isPeriodic:t==="Interval",delay:t==="Timeout"||t==="Interval"?S[1]||0:void 0,args:S},j=S[0];S[0]=function(){try{return j.apply(this,arguments)}finally{let{handle:Z,handleId:G,isPeriodic:J,isRefreshable:V}=w;!J&&!V&&(G?delete l[G]:Z&&(Z[et]=null))}};let F=kt(e,S[0],w,h,m);if(!F)return F;let{handleId:B,handle:Q,isRefreshable:X,isPeriodic:E}=F.data;if(B)l[B]=F;else if(Q&&(Q[et]=F,X&&!E)){let y=Q.refresh;Q.refresh=function(){let{zone:Z,state:G}=F;return G==="notScheduled"?(F._state="scheduled",Z._updateTaskCount(F,1)):G==="running"&&(F._state="scheduling"),y.call(this)}}return Q??B??F}else return p.apply(n,S)}),c=_e(n,r,p=>function(g,S){let w=S[0],j;mn(w)?(j=l[w],delete l[w]):(j=w?.[et],j?w[et]=null:j=w),j?.type?j.cancelFn&&j.zone.cancelTask(j):p.apply(n,S)})}function nr(n,e){let{isBrowser:r,isMix:t}=e.getGlobalObjects();if(!r&&!t||!n.customElements||!("customElements"in n))return;let s=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"];e.patchCallbacks(e,n.customElements,"customElements","define",s)}function rr(n,e){if(Zone[e.symbol("patchEventTarget")])return;let{eventNames:r,zoneSymbolEventNames:t,TRUE_STR:s,FALSE_STR:c,ZONE_SYMBOL_PREFIX:l}=e.getGlobalObjects();for(let m=0;m<r.length;m++){let p=r[m],g=p+c,S=p+s,w=l+g,j=l+S;t[p]={},t[p][c]=w,t[p][s]=j}let h=n.EventTarget;if(!(!h||!h.prototype))return e.patchEventTarget(n,e,[h&&h.prototype]),!0}function or(n,e){e.patchEventPrototype(n,e)}function Sn(n,e,r){if(!r||r.length===0)return e;let t=r.filter(c=>c.target===n);if(t.length===0)return e;let s=t[0].ignoreProperties;return e.filter(c=>s.indexOf(c)===-1)}function gn(n,e,r,t){if(!n)return;let s=Sn(n,e,r);vn(n,s,t)}function yt(n){return Object.getOwnPropertyNames(n).filter(e=>e.startsWith("on")&&e.length>2).map(e=>e.substring(2))}function sr(n,e){if(rt&&!bn||Zone[n.symbol("patchEvents")])return;let r=e.__Zone_ignore_on_properties,t=[];if(wt){let s=window;t=t.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);let c=[];gn(s,yt(s),r&&r.concat(c),bt(s))}t=t.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let s=0;s<t.length;s++){let c=e[t[s]];c?.prototype&&gn(c.prototype,yt(c.prototype),r)}}function ir(n){n.__load_patch("legacy",e=>{let r=e[n.__symbol__("legacyPatch")];r&&r()}),n.__load_patch("timers",e=>{let t="clear";De(e,"set",t,"Timeout"),De(e,"set",t,"Interval"),De(e,"set",t,"Immediate")}),n.__load_patch("requestAnimationFrame",e=>{De(e,"request","cancel","AnimationFrame"),De(e,"mozRequest","mozCancel","AnimationFrame"),De(e,"webkitRequest","webkitCancel","AnimationFrame")}),n.__load_patch("blocking",(e,r)=>{let t=["alert","prompt","confirm"];for(let s=0;s<t.length;s++){let c=t[s];_e(e,c,(l,h,m)=>function(p,g){return r.current.run(l,e,g,m)})}}),n.__load_patch("EventTarget",(e,r,t)=>{or(e,t),rr(e,t);let s=e.XMLHttpRequestEventTarget;s&&s.prototype&&t.patchEventTarget(e,t,[s.prototype])}),n.__load_patch("MutationObserver",(e,r,t)=>{He("MutationObserver"),He("WebKitMutationObserver")}),n.__load_patch("IntersectionObserver",(e,r,t)=>{He("IntersectionObserver")}),n.__load_patch("FileReader",(e,r,t)=>{He("FileReader")}),n.__load_patch("on_property",(e,r,t)=>{sr(t,e)}),n.__load_patch("customElements",(e,r,t)=>{nr(e,t)}),n.__load_patch("XHR",(e,r)=>{p(e);let t=H("xhrTask"),s=H("xhrSync"),c=H("xhrListener"),l=H("xhrScheduled"),h=H("xhrURL"),m=H("xhrErrorBeforeScheduled");function p(g){let S=g.XMLHttpRequest;if(!S)return;let w=S.prototype;function j(I){return I[t]}let F=w[pt],B=w[mt];if(!F){let I=g.XMLHttpRequestEventTarget;if(I){let C=I.prototype;F=C[pt],B=C[mt]}}let Q="readystatechange",X="scheduled";function E(I){let C=I.data,O=C.target;O[l]=!1,O[m]=!1;let te=O[c];F||(F=O[pt],B=O[mt]),te&&B.call(O,Q,te);let z=O[c]=()=>{if(O.readyState===O.DONE)if(!C.aborted&&O[l]&&I.state===X){let _=O[r.__symbol__("loadfalse")];if(O.status!==0&&_&&_.length>0){let o=I.invoke;I.invoke=function(){let i=O[r.__symbol__("loadfalse")];for(let T=0;T<i.length;T++)i[T]===I&&i.splice(T,1);!C.aborted&&I.state===X&&o.call(I)},_.push(I)}else I.invoke()}else!C.aborted&&O[l]===!1&&(O[m]=!0)};return F.call(O,Q,z),O[t]||(O[t]=I),U.apply(O,C.args),O[l]=!0,I}function y(){}function Z(I){let C=I.data;return C.aborted=!0,R.apply(C.target,C.args)}let G=_e(w,"open",()=>function(I,C){return I[s]=C[2]==!1,I[h]=C[1],G.apply(I,C)}),J="XMLHttpRequest.send",V=H("fetchTaskAborting"),b=H("fetchTaskScheduling"),U=_e(w,"send",()=>function(I,C){if(r.current[b]===!0||I[s])return U.apply(I,C);{let O={target:I,url:I[h],isPeriodic:!1,args:C,aborted:!1},te=kt(J,y,O,E,Z);I&&I[m]===!0&&!O.aborted&&te.state===X&&te.invoke()}}),R=_e(w,"abort",()=>function(I,C){let O=j(I);if(O&&typeof O.type=="string"){if(O.cancelFn==null||O.data&&O.data.aborted)return;O.zone.cancelTask(O)}else if(r.current[V]===!0)return R.apply(I,C)})}}),n.__load_patch("geolocation",e=>{e.navigator&&e.navigator.geolocation&&qn(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),n.__load_patch("PromiseRejectionEvent",(e,r)=>{function t(s){return function(c){wn(e,s).forEach(h=>{let m=e.PromiseRejectionEvent;if(m){let p=new m(s,{promise:c.promise,reason:c.rejection});h.invoke(p)}})}}e.PromiseRejectionEvent&&(r[H("unhandledPromiseRejectionHandler")]=t("unhandledrejection"),r[H("rejectionHandledHandler")]=t("rejectionhandled"))}),n.__load_patch("queueMicrotask",(e,r,t)=>{tr(e,t)})}function ar(n){n.__load_patch("ZoneAwarePromise",(e,r,t)=>{let s=Object.getOwnPropertyDescriptor,c=Object.defineProperty;function l(d){if(d&&d.toString===Object.prototype.toString){let u=d.constructor&&d.constructor.name;return(u||"")+": "+JSON.stringify(d)}return d?d.toString():Object.prototype.toString.call(d)}let h=t.symbol,m=[],p=e[h("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]!==!1,g=h("Promise"),S=h("then"),w="__creationTrace__";t.onUnhandledError=d=>{if(t.showUncaughtError()){let u=d&&d.rejection;u?console.error("Unhandled Promise rejection:",u instanceof Error?u.message:u,"; Zone:",d.zone.name,"; Task:",d.task&&d.task.source,"; Value:",u,u instanceof Error?u.stack:void 0):console.error(d)}},t.microtaskDrainDone=()=>{for(;m.length;){let d=m.shift();try{d.zone.runGuarded(()=>{throw d.throwOriginal?d.rejection:d})}catch(u){F(u)}}};let j=h("unhandledPromiseRejectionHandler");function F(d){t.onUnhandledError(d);try{let u=r[j];typeof u=="function"&&u.call(this,d)}catch{}}function B(d){return d&&typeof d.then=="function"}function Q(d){return d}function X(d){return L.reject(d)}let E=h("state"),y=h("value"),Z=h("finally"),G=h("parentPromiseValue"),J=h("parentPromiseState"),V="Promise.then",b=null,U=!0,R=!1,I=0;function C(d,u){return a=>{try{x(d,u,a)}catch(f){x(d,!1,f)}}}let O=function(){let d=!1;return function(a){return function(){d||(d=!0,a.apply(null,arguments))}}},te="Promise resolved with itself",z=h("currentTaskTrace");function x(d,u,a){let f=O();if(d===a)throw new TypeError(te);if(d[E]===b){let k=null;try{(typeof a=="object"||typeof a=="function")&&(k=a&&a.then)}catch(M){return f(()=>{x(d,!1,M)})(),d}if(u!==R&&a instanceof L&&a.hasOwnProperty(E)&&a.hasOwnProperty(y)&&a[E]!==b)o(a),x(d,a[E],a[y]);else if(u!==R&&typeof k=="function")try{k.call(a,f(C(d,u)),f(C(d,!1)))}catch(M){f(()=>{x(d,!1,M)})()}else{d[E]=u;let M=d[y];if(d[y]=a,d[Z]===Z&&u===U&&(d[E]=d[J],d[y]=d[G]),u===R&&a instanceof Error){let v=r.currentTask&&r.currentTask.data&&r.currentTask.data[w];v&&c(a,z,{configurable:!0,enumerable:!1,writable:!0,value:v})}for(let v=0;v<M.length;)i(d,M[v++],M[v++],M[v++],M[v++]);if(M.length==0&&u==R){d[E]=I;let v=a;try{throw new Error("Uncaught (in promise): "+l(a)+(a&&a.stack?`
`+a.stack:""))}catch(A){v=A}p&&(v.throwOriginal=!0),v.rejection=a,v.promise=d,v.zone=r.current,v.task=r.currentTask,m.push(v),t.scheduleMicroTask()}}}return d}let _=h("rejectionHandledHandler");function o(d){if(d[E]===I){try{let u=r[_];u&&typeof u=="function"&&u.call(this,{rejection:d[y],promise:d})}catch{}d[E]=R;for(let u=0;u<m.length;u++)d===m[u].promise&&m.splice(u,1)}}function i(d,u,a,f,k){o(d);let M=d[E],v=M?typeof f=="function"?f:Q:typeof k=="function"?k:X;u.scheduleMicroTask(V,()=>{try{let A=d[y],D=!!a&&Z===a[Z];D&&(a[G]=A,a[J]=M);let N=u.run(v,void 0,D&&v!==X&&v!==Q?[]:[A]);x(a,!0,N)}catch(A){x(a,!1,A)}},a)}let T="function ZoneAwarePromise() { [native code] }",P=function(){},q=e.AggregateError;class L{static toString(){return T}static resolve(u){return u instanceof L?u:x(new this(null),U,u)}static reject(u){return x(new this(null),R,u)}static withResolvers(){let u={};return u.promise=new L((a,f)=>{u.resolve=a,u.reject=f}),u}static any(u){if(!u||typeof u[Symbol.iterator]!="function")return Promise.reject(new q([],"All promises were rejected"));let a=[],f=0;try{for(let v of u)f++,a.push(L.resolve(v))}catch{return Promise.reject(new q([],"All promises were rejected"))}if(f===0)return Promise.reject(new q([],"All promises were rejected"));let k=!1,M=[];return new L((v,A)=>{for(let D=0;D<a.length;D++)a[D].then(N=>{k||(k=!0,v(N))},N=>{M.push(N),f--,f===0&&(k=!0,A(new q(M,"All promises were rejected")))})})}static race(u){let a,f,k=new this((A,D)=>{a=A,f=D});function M(A){a(A)}function v(A){f(A)}for(let A of u)B(A)||(A=this.resolve(A)),A.then(M,v);return k}static all(u){return L.allWithCallback(u)}static allSettled(u){return(this&&this.prototype instanceof L?this:L).allWithCallback(u,{thenCallback:f=>({status:"fulfilled",value:f}),errorCallback:f=>({status:"rejected",reason:f})})}static allWithCallback(u,a){let f,k,M=new this((N,W)=>{f=N,k=W}),v=2,A=0,D=[];for(let N of u){B(N)||(N=this.resolve(N));let W=A;try{N.then(Y=>{D[W]=a?a.thenCallback(Y):Y,v--,v===0&&f(D)},Y=>{a?(D[W]=a.errorCallback(Y),v--,v===0&&f(D)):k(Y)})}catch(Y){k(Y)}v++,A++}return v-=2,v===0&&f(D),M}constructor(u){let a=this;if(!(a instanceof L))throw new Error("Must be an instanceof Promise.");a[E]=b,a[y]=[];try{let f=O();u&&u(f(C(a,U)),f(C(a,R)))}catch(f){x(a,!1,f)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return L}then(u,a){let f=this.constructor?.[Symbol.species];(!f||typeof f!="function")&&(f=this.constructor||L);let k=new f(P),M=r.current;return this[E]==b?this[y].push(M,k,u,a):i(this,M,k,u,a),k}catch(u){return this.then(null,u)}finally(u){let a=this.constructor?.[Symbol.species];(!a||typeof a!="function")&&(a=L);let f=new a(P);f[Z]=Z;let k=r.current;return this[E]==b?this[y].push(k,f,u,u):i(this,k,f,u,u),f}}L.resolve=L.resolve,L.reject=L.reject,L.race=L.race,L.all=L.all;let ve=e[g]=e.Promise;e.Promise=L;let de=h("thenPatched");function pe(d){let u=d.prototype,a=s(u,"then");if(a&&(a.writable===!1||!a.configurable))return;let f=u.then;u[S]=f,d.prototype.then=function(k,M){return new L((A,D)=>{f.call(this,A,D)}).then(k,M)},d[de]=!0}t.patchThen=pe;function ae(d){return function(u,a){let f=d.apply(u,a);if(f instanceof L)return f;let k=f.constructor;return k[de]||pe(k),f}}return ve&&(pe(ve),_e(e,"fetch",d=>ae(d))),Promise[r.__symbol__("uncaughtPromiseErrors")]=m,L})}function cr(n){n.__load_patch("toString",e=>{let r=Function.prototype.toString,t=H("OriginalDelegate"),s=H("Promise"),c=H("Error"),l=function(){if(typeof this=="function"){let g=this[t];if(g)return typeof g=="function"?r.call(g):Object.prototype.toString.call(g);if(this===Promise){let S=e[s];if(S)return r.call(S)}if(this===Error){let S=e[c];if(S)return r.call(S)}}return r.call(this)};l[t]=r,Function.prototype.toString=l;let h=Object.prototype.toString,m="[object Promise]";Object.prototype.toString=function(){return typeof Promise=="function"&&this instanceof Promise?m:h.call(this)}})}function lr(n,e,r,t,s){let c=Zone.__symbol__(t);if(e[c])return;let l=e[c]=e[t];e[t]=function(h,m,p){return m&&m.prototype&&s.forEach(function(g){let S=`${r}.${t}::`+g,w=m.prototype;try{if(w.hasOwnProperty(g)){let j=n.ObjectGetOwnPropertyDescriptor(w,g);j&&j.value?(j.value=n.wrapWithCurrentZone(j.value,S),n._redefineProperty(m.prototype,g,j)):w[g]&&(w[g]=n.wrapWithCurrentZone(w[g],S))}else w[g]&&(w[g]=n.wrapWithCurrentZone(w[g],S))}catch{}}),l.call(e,h,m,p)},n.attachOriginToPatched(e[t],l)}function ur(n){n.__load_patch("util",(e,r,t)=>{let s=yt(e);t.patchOnProperties=vn,t.patchMethod=_e,t.bindArguments=Ct,t.patchMacroTask=Jn;let c=r.__symbol__("BLACK_LISTED_EVENTS"),l=r.__symbol__("UNPATCHED_EVENTS");e[l]&&(e[c]=e[l]),e[c]&&(r[c]=r[l]=e[c]),t.patchEventPrototype=er,t.patchEventTarget=Qn,t.isIEOrEdge=$n,t.ObjectDefineProperty=_t,t.ObjectGetOwnPropertyDescriptor=Fe,t.ObjectCreate=Un,t.ArraySlice=Bn,t.patchClass=He,t.wrapWithCurrentZone=Et,t.filterProperties=Sn,t.attachOriginToPatched=be,t._redefineProperty=Object.defineProperty,t.patchCallbacks=lr,t.getGlobalObjects=()=>({globalSources:Tn,zoneSymbolEventNames:ie,eventNames:s,isBrowser:wt,isMix:bn,isNode:rt,TRUE_STR:ge,FALSE_STR:ye,ZONE_SYMBOL_PREFIX:Ge,ADD_EVENT_LISTENER_STR:vt,REMOVE_EVENT_LISTENER_STR:Tt})})}function hr(n){ar(n),cr(n),ur(n)}var Pn=Yn();hr(Pn);ir(Pn);Wt(Qe,un).catch(n=>console.error(n));
