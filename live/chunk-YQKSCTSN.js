import{$ as Xe,$a as We,A as n,Ab as J,B as i,Bb as b,C as p,D as k,E as y,F as c,Fb as ut,Ga as D,Gb as _t,Ha as ie,Hb as gt,Ia as ne,Ib as ft,J as Ke,Ja as W,Jb as Ct,Ka as oe,Kb as ht,L as s,La as ae,Lb as yt,M as S,Ma as F,Mb as St,N as ge,Nb as xt,O as Ye,Ob as It,P as ze,Pb as bt,Q as f,Qb as vt,R as C,Ra as Ve,Rb as wt,S as h,Sa as Ne,Sb as Mt,T as Je,Ta as R,Tb as Et,U as ee,Ua as tt,Ub as At,V as ke,Va as De,Vb as Ft,W as Qe,Wa as L,Wb as Lt,X as Ze,Xa as O,Y as N,Ya as re,Z as U,Za as le,_ as E,_a as it,_b as Q,aa as $e,ab as nt,ba as w,bb as M,c as x,cb as ot,db as at,eb as B,fa as te,fb as se,g as Y,ga as G,gb as me,h as He,ha as z,hb as T,ia as et,ib as fe,j as _,jb as ce,ka as A,kb as q,lb as rt,m as d,mb as lt,n as u,nb as st,ob as mt,pb as ct,qb as Ce,r as je,rb as Re,s as Ue,sb as Oe,t as m,tb as K,ub as pt,v,vb as he,w as Ge,wb as H,x as I,xb as P,yb as dt,z as g,zb as ye}from"./chunk-QBNNDAMG.js";import"./chunk-BPNJ4XSC.js";import"./chunk-QUJFQN2Y.js";import"./chunk-HN6GP5JN.js";import"./chunk-LYVAD3YA.js";import"./chunk-2Z5TFF6Q.js";import"./chunk-RI6VIFYD.js";import"./chunk-BX2T5SXJ.js";import"./chunk-ROMOYGUQ.js";import"./chunk-PKG65ASR.js";import"./chunk-UDFYMEAC.js";import"./chunk-YV6RNW5L.js";import"./chunk-I4WYFWEI.js";import"./chunk-MTHZ7MWU.js";import"./chunk-WI5MSH4N.js";import"./chunk-DW6VLS55.js";import"./chunk-CKP3SGE2.js";import"./chunk-6W4ZNO6B.js";import"./chunk-3JIGZQQL.js";import"./chunk-636K7VIU.js";import"./chunk-CJW4MSPK.js";import"./chunk-TGDZUAEA.js";import"./chunk-VSDHJBUA.js";import"./chunk-M2X7KQLB.js";import"./chunk-3IVKBF6N.js";import"./chunk-OZYWYLNK.js";import"./chunk-42C7ZIID.js";import{a as de,b as ue}from"./chunk-KZZABCGY.js";var Se=class r{db=_(Q);TOKEN_KEY="admin_auth_token";async login(t,e){try{let a=await x(this.db.query(ut,[t]));if(a&&a.data&&a.data.length>0){let o=a.data[0];if(o.password===e){let l=JSON.stringify({userId:o.id,email:o.email});return localStorage.setItem(this.TOKEN_KEY,l),!0}}return!1}catch(a){return console.error("AuthService: Error during login:",a),!1}}logout(){localStorage.removeItem(this.TOKEN_KEY)}isAuthenticated(){return!!localStorage.getItem(this.TOKEN_KEY)}getCurrentUser(){let t=localStorage.getItem(this.TOKEN_KEY);if(t)try{return JSON.parse(t)}catch{return null}return null}static \u0275fac=function(e){return new(e||r)};static \u0275prov=Y({token:r,factory:r.\u0275fac,providedIn:"root"})};function kt(r,t){if(r&1&&(n(0,"ion-text",7),s(1),i()),r&2){let e=c();m(),S(e.errorMessage)}}var Ae=class r{email="";password="";errorMessage="";authService=_(Se);router=_(G);cdr=_(N);async login(){this.errorMessage="";try{await this.authService.login(this.email,this.password)?this.router.navigate(["/admin/dashboard"]):(this.errorMessage="Invalid email or password.",this.cdr.detectChanges())}catch(t){this.errorMessage="An unexpected error occurred. Please try again.",console.error("Login error:",t),this.cdr.detectChanges()}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-admin-login"]],decls:15,vars:3,consts:[[1,"ion-padding"],[1,"ion-text-center","ion-padding"],[3,"ngSubmit"],["label","Email","type","email","name","email","placeholder","admin@example.com","required","",3,"ngModelChange","ngModel"],["label","Password","type","password","name","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022","required","",3,"ngModelChange","ngModel"],["expand","block","type","submit",1,"ion-margin-top"],["color","danger","class","ion-padding-top",4,"ngIf"],["color","danger",1,"ion-padding-top"]],template:function(e,a){e&1&&(n(0,"ion-content",0)(1,"div",1)(2,"ion-card")(3,"ion-card-header")(4,"ion-card-title"),s(5,"Admin Login"),i()(),n(6,"ion-card-content")(7,"form",2),y("ngSubmit",function(){return a.login()}),n(8,"ion-item")(9,"ion-input",3),h("ngModelChange",function(l){return C(a.email,l)||(a.email=l),l}),i()(),n(10,"ion-item")(11,"ion-input",4),h("ngModelChange",function(l){return C(a.password,l)||(a.password=l),l}),i()(),n(12,"ion-button",5),s(13,"Login"),i(),I(14,kt,2,1,"ion-text",6),i()()()()()),e&2&&(m(9),f("ngModel",a.email),m(2),f("ngModel",a.password),m(3),g("ngIf",a.errorMessage))},dependencies:[w,E,F,oe,D,ie,ae,W,ne,b,L,re,le,it,We,M,me,T,pt,R],encapsulation:2})};var Be=class r{databaseService=_(Q);constructor(){}async addHistoryEntry(t){let e=[t.applicant_id,t.remarks,t.attachment,t.status];await x(this.databaseService.query(Lt,e))}static \u0275fac=function(e){return new(e||r)};static \u0275prov=Y({token:r,factory:r.\u0275fac,providedIn:"root"})};var Z=class r{db=_(Q);applicantHistoryService=_(Be);async getApplicants(t){let e=_t,a=[];t&&(e="SELECT id, first_name, last_name, passport_number, country, main_status FROM employee_employee WHERE main_status = ? ORDER BY last_name, first_name",a.push(t));let o=await x(this.db.query(e,a));return o&&o.data?o.data:[]}async getApplicantById(t){let e=await x(this.db.query(gt,[t]));return e&&e.data&&e.data.length>0?e.data[0]:null}async getStatuses(){let t=await x(this.db.query(vt));return t&&t.data&&Array.isArray(t.data)?t.data.map(e=>e.status_name):[]}async createApplicant(t){let e=this.mapApplicantToParams(t),a=await x(this.db.query(ft,e));if(a&&a.insertId){let o=a.insertId;await this.applicantHistoryService.addHistoryEntry({applicant_id:o,remarks:`Applicant created with status: ${t.main_status}`,attachment:"",status:t.main_status||"Created"})}return a}async updateApplicant(t){let e=await this.getApplicantById(t.id),a=this.mapApplicantToParams(t),o=await x(this.db.query(Ct,[...a,t.id]));if(t.id){let l=e&&e.main_status||"",j=t.main_status||"";e&&l!==j?await this.applicantHistoryService.addHistoryEntry({applicant_id:t.id,remarks:`Applicant status changed from '${e.main_status}' to '${t.main_status}'`,attachment:"",status:t.main_status||"Unknown"}):await this.applicantHistoryService.addHistoryEntry({applicant_id:t.id,remarks:"Applicant updated.",attachment:"",status:"Updated"})}return o}async deleteApplicant(t){return x(this.db.query(ht,[t]))}mapApplicantToParams(t){return[t.first_name||"",t.middle_name||"",t.last_name||"",t.passport_number||"",t.date_of_birth||null,t.address||"",t.phone_number||"",t.email||"",t.is_support?1:0,t.token||"",t.user_id||null,t.date_deployment||null,t.fra_id||null,t.main_status||"",t.applicant_type||"",t.created_date_of_report||null,t.country||"",t.facebook||"",t.whatsapp||"",t.consistency_percentage||0,t.agency_id||1,t.emergency_contact_name||"",t.emergency_contact_phone||""]}static \u0275fac=function(e){return new(e||r)};static \u0275prov=Y({token:r,factory:r.\u0275fac,providedIn:"root"})};var Vt=r=>["/admin/applicants/status",r];function Nt(r,t){if(r&1&&(n(0,"ion-menu-toggle",0)(1,"ion-item",16),p(2,"ion-icon",17),n(3,"ion-label"),s(4),ke(5,"titlecase"),i()()()),r&2){let e=t.$implicit;m(),g("routerLink",ee(4,Vt,e)),m(3),S(Qe(5,2,e))}}function Dt(r,t){if(r&1&&(n(0,"ion-list")(1,"ion-menu-toggle",0)(2,"ion-item",13),p(3,"ion-icon",14),n(4,"ion-label"),s(5,"All Applicants"),i()()(),I(6,Nt,6,6,"ion-menu-toggle",15),i()),r&2){let e=c();m(6),g("ngForOf",e.applicantStatuses)}}var Ie=class r{authService=_(Se);router=_(G);applicantService=_(Z);isApplicantMenuOpen=!1;applicantStatuses=[];ngOnInit(){this.applicantService.getStatuses().then(t=>{this.applicantStatuses=t})}toggleApplicantMenu(){this.isApplicantMenuOpen=!this.isApplicantMenuOpen}logout(){this.authService.logout(),this.router.navigate(["/admin/login"])}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-sidebar"]],decls:30,vars:2,consts:[["autoHide","false"],["routerLink","/admin/dashboard","routerLinkActive","selected","routerDirection","root","detail","false"],["slot","start","name","apps"],["button","",3,"click"],["slot","start","name","people"],["slot","end",3,"name"],[4,"ngIf"],["routerLink","/admin/cases","routerLinkActive","selected","routerDirection","root","detail","false"],["slot","start","name","folder-open"],["routerLink","/admin/fras","routerLinkActive","selected","routerDirection","root","detail","false"],["slot","start","name","business"],["expand","full","color","danger",3,"click"],["slot","start","name","log-out"],["routerLink","/admin/applicants","routerLinkActive","selected","routerDirection","root","detail","false"],["slot","start","name","list"],["autoHide","false",4,"ngFor","ngForOf"],["routerLinkActive","selected","routerDirection","root","detail","false",3,"routerLink"],["slot","start","name","person"]],template:function(e,a){e&1&&(n(0,"ion-list")(1,"ion-list-header")(2,"ion-label"),s(3,"Admin Panel"),i()(),n(4,"ion-menu-toggle",0)(5,"ion-item",1),p(6,"ion-icon",2),n(7,"ion-label"),s(8,"Dashboard"),i()()(),n(9,"ion-item",3),y("click",function(){return a.toggleApplicantMenu()}),p(10,"ion-icon",4),n(11,"ion-label"),s(12,"Applicants"),i(),p(13,"ion-icon",5),i(),I(14,Dt,7,1,"ion-list",6),n(15,"ion-menu-toggle",0)(16,"ion-item",7),p(17,"ion-icon",8),n(18,"ion-label"),s(19,"Cases"),i()()(),n(20,"ion-menu-toggle",0)(21,"ion-item",9),p(22,"ion-icon",10),n(23,"ion-label"),s(24,"FRAs"),i()()(),n(25,"ion-footer")(26,"ion-toolbar")(27,"ion-button",11),y("click",function(){return a.logout()}),p(28,"ion-icon",12),s(29," Logout "),i()()()()),e&2&&(m(13),g("name",a.isApplicantMenuOpen?"chevron-up-outline":"chevron-down-outline"),m(),g("ngIf",a.isApplicantMenuOpen))},dependencies:[A,z,et,w,U,E,b,L,ot,se,T,ce,q,rt,mt,P,J,Xe],encapsulation:2})};var Fe=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-admin-layout"]],decls:17,vars:0,consts:[["contentId","main-content"],["id","main-content",1,"ion-page"],["slot","start"]],template:function(e,a){e&1&&(n(0,"ion-app")(1,"ion-menu",0)(2,"ion-header")(3,"ion-toolbar")(4,"ion-title"),s(5,"Admin Menu"),i()()(),n(6,"ion-content"),p(7,"app-sidebar"),i()(),n(8,"div",1)(9,"ion-header")(10,"ion-toolbar")(11,"ion-buttons",2),p(12,"ion-menu-button"),i(),n(13,"ion-title"),s(14,"Admin Dashboard"),i()()(),n(15,"ion-content"),p(16,"ion-router-outlet"),i()()())},dependencies:[A,Ie,b,tt,O,M,B,lt,st,H,P,dt],encapsulation:2})};var Le=class r{static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-admin-dashboard"]],decls:3,vars:0,consts:[[1,"glass-card","p-0","text-white","rounded-xl","h-full"],["src",Ue`https://welfare.reviewcenterphil.com/api/dashboard.php`,1,"w-full","h-full","border-none","rounded-xl"]],template:function(e,a){e&1&&(n(0,"ion-content")(1,"div",0),p(2,"iframe",1),i()())},dependencies:[b,M],encapsulation:2})};var Wt=r=>["/admin/applicants/edit",r];function Rt(r,t){r&1&&(n(0,"div",6)(1,"p"),s(2,"Loading applicants..."),i(),p(3,"ion-spinner",7),i())}function Ot(r,t){if(r&1){let e=k();n(0,"ion-item")(1,"ion-label")(2,"h2"),s(3),i(),n(4,"p"),s(5),i(),n(6,"p"),s(7),i()(),n(8,"ion-badge",12),s(9),i(),n(10,"ion-buttons",0)(11,"ion-button",13),p(12,"ion-icon",14),i(),n(13,"ion-button",15),y("click",function(){let o=d(e).$implicit,l=c(2);return u(l.deleteApplicant(o.id))}),p(14,"ion-icon",16),i(),n(15,"a",17),p(16,"ion-icon",18),i()()()}if(r&2){let e=t.$implicit;m(3),Ye("",e.last_name,", ",e.first_name),m(2),S(e.passport_number),m(2),S(e.country),m(),g("color",e.main_status==="active"?"success":e.main_status==="with_complain"?"warning":"danger"),m(),ge(" ",e.main_status," "),m(2),g("routerLink",ee(9,Wt,e.id)),m(4),g("href",Je("https://welfare.reviewcenterphil.com/api/history.php?app_id=",e.id),je)}}function Bt(r,t){r&1&&(n(0,"ion-item")(1,"ion-label",19),s(2,"No applicants found."),i()())}function qt(r,t){if(r&1){let e=k();n(0,"ion-list")(1,"ion-item-divider")(2,"ion-label",8),y("click",function(){d(e);let o=c();return u(o.sort("last_name"))}),s(3,"Name "),p(4,"ion-icon",9),i(),n(5,"ion-label",8),y("click",function(){d(e);let o=c();return u(o.sort("passport_number"))}),s(6,"Passport "),p(7,"ion-icon",9),i(),n(8,"ion-label",8),y("click",function(){d(e);let o=c();return u(o.sort("country"))}),s(9,"Country "),p(10,"ion-icon",9),i(),n(11,"ion-label",8),y("click",function(){d(e);let o=c();return u(o.sort("main_status"))}),s(12,"Status "),p(13,"ion-icon",9),i(),n(14,"ion-label",10),s(15,"Actions"),i()(),I(16,Ot,17,11,"ion-item",11)(17,Bt,3,0,"ion-item",5),i()}if(r&2){let e=c();m(16),g("ngForOf",e.filteredApplicants),m(),g("ngIf",!e.filteredApplicants||e.filteredApplicants.length===0)}}var be=class r{applicantService=_(Z);cdr=_(N);route=_(te);allApplicants=[];filteredApplicants=[];searchTerm="";isLoading=!1;currentStatus=null;sortDirection={};ngOnInit(){this.route.paramMap.subscribe(t=>{this.currentStatus=t.get("status"),this.loadApplicants(this.currentStatus??void 0)})}async loadApplicants(t){this.isLoading=!0,this.cdr.detectChanges();try{this.allApplicants=await this.applicantService.getApplicants(t),this.filterApplicants(),this.cdr.detectChanges()}catch(e){console.error("Error loading applicants:",e)}finally{this.isLoading=!1,this.cdr.detectChanges()}}filterApplicants(){let t=this.searchTerm.toLowerCase();this.filteredApplicants=this.allApplicants.filter(e=>(e.first_name?.toLowerCase()??"").includes(t)||(e.last_name?.toLowerCase()??"").includes(t)||(e.passport_number?.toLowerCase()??"").includes(t)||(e.country?.toLowerCase()??"").includes(t))}sort(t){let e=this.sortDirection[t]==="asc"?"desc":"asc";this.sortDirection={[t]:e},this.filteredApplicants.sort((a,o)=>{let l=a[t]??"",j=o[t]??"";return l<j?e==="asc"?-1:1:l>j?e==="asc"?1:-1:0})}async deleteApplicant(t){if(confirm("Are you sure you want to delete this applicant?"))try{await this.applicantService.deleteApplicant(t),this.loadApplicants()}catch(e){console.error("Error deleting applicant:",e),alert("Failed to delete applicant.")}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-employee-list"]],decls:12,vars:3,consts:[["slot","end"],["routerLink","/admin/applicants/new"],["name","add-outline"],["placeholder","Search applicants...",3,"ngModelChange","ionChange","ngModel"],["class","ion-padding ion-text-center",4,"ngIf"],[4,"ngIf"],[1,"ion-padding","ion-text-center"],["name","crescent"],[3,"click"],["name","swap-vertical-outline"],[1,"ion-text-right"],[4,"ngFor","ngForOf"],["slot","end",3,"color"],["fill","clear",3,"routerLink"],["name","create-outline"],["fill","clear","color","danger",3,"click"],["name","trash-outline"],["target","_blank","rel","noopener noreferrer",3,"href"],["name","document-text-outline"],[1,"ion-text-center"]],template:function(e,a){e&1&&(n(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),s(3,"Applicants"),i(),n(4,"ion-buttons",0)(5,"ion-button",1),p(6,"ion-icon",2),s(7," New Applicant "),i()()()(),n(8,"ion-content")(9,"ion-searchbar",3),h("ngModelChange",function(l){return C(a.searchTerm,l)||(a.searchTerm=l),l}),y("ionChange",function(){return a.filterApplicants()}),i(),I(10,Rt,4,0,"div",4)(11,qt,18,2,"ion-list",5),i()),e&2&&(m(9),f("ngModel",a.searchTerm),m(),g("ngIf",a.isLoading),m(),g("ngIf",!a.isLoading))},dependencies:[w,U,E,F,D,W,A,z,b,De,L,O,M,B,se,T,fe,ce,q,Ce,K,H,P,R,J],encapsulation:2})};var pe=class r{db=_(Q);async getFras(){let t=await x(this.db.query(yt));return t&&t.data?t.data:[]}async getFraById(t){let e=await x(this.db.query(St,[t]));return e&&e.data&&e.data.length>0?e.data[0]:null}async createFra(t){let e=this.mapFraToParams(t);return x(this.db.query(xt,e))}async updateFra(t){let e=this.mapFraToParams(t);return x(this.db.query(It,[...e,t.id]))}async deleteFra(t){return x(this.db.query(bt,[t]))}mapFraToParams(t){return[t.name||"",t.contact||"",t.address||"",t.country||"",t.agency_id||null]}static \u0275fac=function(e){return new(e||r)};static \u0275prov=Y({token:r,factory:r.\u0275fac,providedIn:"root"})};function Ht(r,t){r&1&&(n(0,"div",8)(1,"p"),s(2,"Loading applicant data..."),i(),p(3,"ion-spinner",9),i())}function jt(r,t){if(r&1&&(n(0,"ion-select-option",61),s(1),i()),r&2){let e=t.$implicit;g("value",e),m(),S(e)}}function Ut(r,t){if(r&1&&(n(0,"ion-select-option",61),s(1),i()),r&2){let e=t.$implicit;g("value",e.id),m(),S(e.name)}}function Gt(r,t){if(r&1){let e=k();n(0,"form",10,0),y("ngSubmit",function(){d(e);let o=c();return u(o.saveApplicant())}),n(2,"ion-card-title",11),s(3,"Personal Information"),i(),n(4,"ion-list",12)(5,"ion-item")(6,"ion-input",13),h("ngModelChange",function(o){d(e);let l=c();return C(l.applicant.first_name,o)||(l.applicant.first_name=o),u(o)}),i()(),n(7,"ion-item")(8,"ion-input",14),h("ngModelChange",function(o){d(e);let l=c();return C(l.applicant.middle_name,o)||(l.applicant.middle_name=o),u(o)}),i()(),n(9,"ion-item")(10,"ion-input",15),h("ngModelChange",function(o){d(e);let l=c();return C(l.applicant.last_name,o)||(l.applicant.last_name=o),u(o)}),i()(),n(11,"ion-item")(12,"ion-input",16),h("ngModelChange",function(o){d(e);let l=c();return C(l.applicant.passport_number,o)||(l.applicant.passport_number=o),u(o)}),i()(),n(13,"ion-item")(14,"ion-input",17),h("ngModelChange",function(o){d(e);let l=c();return C(l.applicant.date_of_birth,o)||(l.applicant.date_of_birth=o),u(o)}),i()(),n(15,"ion-item")(16,"ion-select",18),h("ngModelChange",function(o){d(e);let l=c();return C(l.applicant.country,o)||(l.applicant.country=o),u(o)}),n(17,"ion-select-option",19),s(18,"Select Country"),i(),n(19,"ion-select-option",20),s(20,"United States"),i(),n(21,"ion-select-option",21),s(22,"Canada"),i(),n(23,"ion-select-option",22),s(24,"Mexico"),i(),n(25,"ion-select-option",23),s(26,"Brazil"),i(),n(27,"ion-select-option",24),s(28,"United Kingdom"),i(),n(29,"ion-select-option",25),s(30,"France"),i(),n(31,"ion-select-option",26),s(32,"Germany"),i(),n(33,"ion-select-option",27),s(34,"Italy"),i(),n(35,"ion-select-option",28),s(36,"Spain"),i(),n(37,"ion-select-option",29),s(38,"China"),i(),n(39,"ion-select-option",30),s(40,"India"),i(),n(41,"ion-select-option",31),s(42,"Japan"),i(),n(43,"ion-select-option",32),s(44,"South Korea"),i(),n(45,"ion-select-option",33),s(46,"Australia"),i(),n(47,"ion-select-option",34),s(48,"New Zealand"),i(),n(49,"ion-select-option",35),s(50,"Philippines"),i(),n(51,"ion-select-option",36),s(52,"Saudi Arabia"),i(),n(53,"ion-select-option",37),s(54,"United Arab Emirates"),i(),n(55,"ion-select-option",38),s(56,"Qatar"),i(),n(57,"ion-select-option",39),s(58,"Kuwait"),i(),n(59,"ion-select-option",40),s(60,"Bahrain"),i(),n(61,"ion-select-option",41),s(62,"Oman"),i(),n(63,"ion-select-option",42),s(64,"Egypt"),i(),n(65,"ion-select-option",43),s(66,"Jordan"),i(),n(67,"ion-select-option",44),s(68,"Lebanon"),i(),n(69,"ion-select-option",45),s(70,"Iraq"),i(),n(71,"ion-select-option",46),s(72,"Iran"),i(),n(73,"ion-select-option",47),s(74,"Turkey"),i(),n(75,"ion-select-option",48),s(76,"Israel"),i()()()(),n(77,"ion-card-title",49),s(78,"Contact Details"),i(),n(79,"ion-list",12)(80,"ion-item")(81,"ion-input",50),h("ngModelChange",function(o){d(e);let l=c();return C(l.applicant.email,o)||(l.applicant.email=o),u(o)}),i()(),n(82,"ion-item")(83,"ion-input",51),h("ngModelChange",function(o){d(e);let l=c();return C(l.applicant.phone_number,o)||(l.applicant.phone_number=o),u(o)}),i()(),n(84,"ion-item")(85,"ion-input",52),h("ngModelChange",function(o){d(e);let l=c();return C(l.applicant.whatsapp,o)||(l.applicant.whatsapp=o),u(o)}),i()(),n(86,"ion-item")(87,"ion-input",53),h("ngModelChange",function(o){d(e);let l=c();return C(l.applicant.facebook,o)||(l.applicant.facebook=o),u(o)}),i()(),n(88,"ion-item")(89,"ion-textarea",54),h("ngModelChange",function(o){d(e);let l=c();return C(l.applicant.address,o)||(l.applicant.address=o),u(o)}),i()()(),n(90,"ion-card-title",49),s(91,"Employment Details"),i(),n(92,"ion-list",12)(93,"ion-item")(94,"ion-select",55),h("ngModelChange",function(o){d(e);let l=c();return C(l.applicant.main_status,o)||(l.applicant.main_status=o),u(o)}),n(95,"ion-select-option",19),s(96,"Select Status"),i(),I(97,jt,2,2,"ion-select-option",56),i()(),n(98,"ion-item")(99,"ion-select",57),h("ngModelChange",function(o){d(e);let l=c();return C(l.applicant.applicant_type,o)||(l.applicant.applicant_type=o),u(o)}),n(100,"ion-select-option",58),s(101,"Household"),i(),n(102,"ion-select-option",59),s(103,"Skilled"),i()()(),n(104,"ion-item")(105,"ion-select",60),h("ngModelChange",function(o){d(e);let l=c();return C(l.applicant.fra_id,o)||(l.applicant.fra_id=o),u(o)}),n(106,"ion-select-option",61),s(107,"Select Agency"),i(),I(108,Ut,2,2,"ion-select-option",56),i()(),n(109,"ion-item")(110,"ion-input",62),h("ngModelChange",function(o){d(e);let l=c();return C(l.applicant.date_deployment,o)||(l.applicant.date_deployment=o),u(o)}),i()()(),n(111,"div",63)(112,"ion-button",64),s(113,"Cancel"),i(),n(114,"ion-button",65),s(115,"Save"),i()()()}if(r&2){let e=Ke(1),a=c();m(6),f("ngModel",a.applicant.first_name),m(2),f("ngModel",a.applicant.middle_name),m(2),f("ngModel",a.applicant.last_name),m(2),f("ngModel",a.applicant.passport_number),m(2),f("ngModel",a.applicant.date_of_birth),m(2),f("ngModel",a.applicant.country),m(65),f("ngModel",a.applicant.email),m(2),f("ngModel",a.applicant.phone_number),m(2),f("ngModel",a.applicant.whatsapp),m(2),f("ngModel",a.applicant.facebook),m(2),f("ngModel",a.applicant.address),m(5),f("ngModel",a.applicant.main_status),m(3),g("ngForOf",a.statuses),m(2),f("ngModel",a.applicant.applicant_type),m(6),f("ngModel",a.applicant.fra_id),m(),g("value",null),m(2),g("ngForOf",a.fras),m(2),f("ngModel",a.applicant.date_deployment),m(4),g("disabled",!e.form.valid)}}var ve=class r{applicantService=_(Z);fraService=_(pe);router=_(G);route=_(te);cdr=_(N);applicant={};isEditMode=!1;applicantId=null;isLoading=!1;statuses=[];fras=[];ngOnInit(){this.loadStatuses(),this.loadFras();let t=this.route.snapshot.paramMap.get("id");t&&(this.isEditMode=!0,this.applicantId=+t,this.loadApplicantData(this.applicantId))}async loadFras(){try{this.fras=await this.fraService.getFras()}catch(t){console.error("Error loading FRAs:",t)}}async loadStatuses(){try{this.statuses=await this.applicantService.getStatuses()}catch(t){console.error("Error loading statuses:",t)}}async loadApplicantData(t){this.isLoading=!0,this.cdr.detectChanges();try{let e=await this.applicantService.getApplicantById(t);e?(this.applicant=e,this.cdr.detectChanges()):this.router.navigate(["/admin/applicants"])}catch(e){console.error("Error loading applicant data:",e)}finally{this.isLoading=!1,this.cdr.detectChanges()}}async saveApplicant(){try{this.isEditMode&&this.applicantId?await this.applicantService.updateApplicant(ue(de({},this.applicant),{id:this.applicantId})):await this.applicantService.createApplicant(this.applicant),this.router.navigate(["/admin/applicants"])}catch(t){console.error("Error saving applicant:",t),alert("Failed to save applicant.")}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-applicant-form"]],decls:14,vars:3,consts:[["applicantForm","ngForm"],["slot","start"],["defaultHref","/admin/applicants"],[1,"ion-padding"],[1,"ion-justify-content-center"],["size-xl","8","size-lg","10","size-md","12","size-sm","12","size","12"],["class","ion-text-center ion-padding",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[1,"ion-text-center","ion-padding"],["name","crescent"],[3,"ngSubmit"],[1,"ion-padding-bottom"],["lines","full"],["label","First Name","type","text","name","first_name","required","",3,"ngModelChange","ngModel"],["label","Middle Name","type","text","name","middle_name",3,"ngModelChange","ngModel"],["label","Last Name","type","text","name","last_name","required","",3,"ngModelChange","ngModel"],["label","Passport Number","type","text","name","passport_number",3,"ngModelChange","ngModel"],["label","Date of Birth","type","date","name","date_of_birth",3,"ngModelChange","ngModel"],["label","Country","name","country",3,"ngModelChange","ngModel"],["value",""],["value","US"],["value","CA"],["value","MX"],["value","BR"],["value","GB"],["value","FR"],["value","DE"],["value","IT"],["value","ES"],["value","CN"],["value","IN"],["value","JP"],["value","KR"],["value","AU"],["value","NZ"],["value","PH"],["value","SA"],["value","AE"],["value","QA"],["value","KW"],["value","BH"],["value","OM"],["value","EG"],["value","JO"],["value","LB"],["value","IQ"],["value","IR"],["value","TR"],["value","IL"],[1,"ion-padding-top","ion-padding-bottom"],["label","Email","type","email","name","email",3,"ngModelChange","ngModel"],["label","Phone Number","type","text","name","phone_number",3,"ngModelChange","ngModel"],["label","WhatsApp","type","text","name","whatsapp",3,"ngModelChange","ngModel"],["label","Facebook URL","type","url","name","facebook",3,"ngModelChange","ngModel"],["label","Address","rows","3","name","address",3,"ngModelChange","ngModel"],["label","Main Status","name","main_status",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["label","Applicant Type","name","applicant_type",3,"ngModelChange","ngModel"],["value","household"],["value","skilled"],["label","Foreign Recruitment Agency","name","fra_id",3,"ngModelChange","ngModel"],[3,"value"],["label","Deployment Date","type","date","name","date_deployment",3,"ngModelChange","ngModel"],[1,"ion-padding-top","ion-text-right"],["fill","clear","routerLink","/admin/applicants"],["type","submit",3,"disabled"]],template:function(e,a){e&1&&(n(0,"ion-content")(1,"ion-header")(2,"ion-toolbar")(3,"ion-buttons",1),p(4,"ion-back-button",2),i(),n(5,"ion-title"),s(6),i()()(),n(7,"ion-grid",3)(8,"ion-row",4)(9,"ion-col",5)(10,"ion-card")(11,"ion-card-content"),I(12,Ht,4,0,"div",6)(13,Gt,116,19,"form",7),i()()()()()()),e&2&&(m(6),ge("",a.isEditMode?"Edit":"Create"," Applicant"),m(6),g("ngIf",a.isLoading),m(),g("ngIf",!a.isLoading))},dependencies:[w,U,E,F,oe,D,ie,ae,W,ne,A,z,b,L,O,re,le,We,nt,M,at,B,me,T,q,ct,Re,Oe,K,he,H,P,Ne,R,ye,J],styles:[".form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem}.form-label[_ngcontent-%COMP%]{margin-bottom:.5rem;font-size:.875rem;line-height:1.25rem;font-weight:500;color:#d1d5db}.form-field[_ngcontent-%COMP%]{width:100%;background-color:#0003;border-width:0;border-bottom-width:2px;border-color:#ffffff4d;border-top-left-radius:.5rem;border-top-right-radius:.5rem;padding:.625rem;color:#fff;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.3s}.form-field[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.form-field[_ngcontent-%COMP%]:focus{outline:none;--tw-ring-shadow: 0 0 #0000;border-color:#60a5fa}.form-field[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]{background-color:#1f2937;color:#fff}input[type=date][_ngcontent-%COMP%]::-webkit-calendar-picker-indicator{filter:invert(1)}"]})};var we=class r{db=_(Q);async getCases(){let t=await x(this.db.query(wt));return t&&t.data?t.data.map(e=>ue(de({},e),{employee_name:`${e.last_name}, ${e.first_name}`})):[]}async getCaseById(t){let e=await x(this.db.query(Mt,[t]));if(e&&e.data&&e.data.length>0){let a=e.data[0];return ue(de({},a),{employee_name:`${a.last_name}, ${a.first_name}`})}return null}async createCase(t){let e=this.mapCaseToParams(t);return x(this.db.query(Et,e))}async updateCase(t){let e=this.mapCaseToParams(t);return x(this.db.query(At,[...e,t.id]))}async deleteCase(t){return x(this.db.query(Ft,[t]))}mapCaseToParams(t){return[t.employee_id||null,t.category||"",t.report||"",t.report_status||"open",t.agency_id||null]}static \u0275fac=function(e){return new(e||r)};static \u0275prov=Y({token:r,factory:r.\u0275fac,providedIn:"root"})};var Kt=r=>["/admin/cases/edit",r];function Yt(r,t){r&1&&(n(0,"div",6)(1,"p"),s(2,"Loading cases..."),i(),p(3,"ion-spinner",7),i())}function zt(r,t){if(r&1){let e=k();n(0,"ion-item")(1,"ion-label")(2,"h2"),s(3),i(),n(4,"p"),s(5),i(),n(6,"p"),s(7),ke(8,"date"),i()(),n(9,"ion-badge",12),s(10),i(),n(11,"ion-buttons",0)(12,"ion-button",13),p(13,"ion-icon",14),i(),n(14,"ion-button",15),y("click",function(){let o=d(e).$implicit,l=c(2);return u(l.deleteCase(o.id))}),p(15,"ion-icon",16),i()()()}if(r&2){let e=t.$implicit;m(3),S(e.employee_name),m(2),S(e.category),m(2),S(Ze(8,6,e.date_reported,"shortDate")),m(2),g("color",e.report_status==="open"?"success":"danger"),m(),ge(" ",e.report_status," "),m(2),g("routerLink",ee(9,Kt,e.id))}}function Jt(r,t){r&1&&(n(0,"ion-item")(1,"ion-label",17),s(2,"No cases found."),i()())}function Qt(r,t){if(r&1){let e=k();n(0,"ion-list")(1,"ion-item-divider")(2,"ion-label",8),y("click",function(){d(e);let o=c();return u(o.sort("employee_name"))}),s(3,"Employee "),p(4,"ion-icon",9),i(),n(5,"ion-label",8),y("click",function(){d(e);let o=c();return u(o.sort("category"))}),s(6,"Category "),p(7,"ion-icon",9),i(),n(8,"ion-label",8),y("click",function(){d(e);let o=c();return u(o.sort("report_status"))}),s(9,"Status "),p(10,"ion-icon",9),i(),n(11,"ion-label",8),y("click",function(){d(e);let o=c();return u(o.sort("date_reported"))}),s(12,"Date Reported "),p(13,"ion-icon",9),i(),n(14,"ion-label",10),s(15,"Actions"),i()(),I(16,zt,16,11,"ion-item",11)(17,Jt,3,0,"ion-item",5),i()}if(r&2){let e=c();m(16),g("ngForOf",e.filteredCases),m(),g("ngIf",!e.filteredCases||e.filteredCases.length===0)}}var Te=class r{caseService=_(we);cdr=_(N);allCases=[];filteredCases=[];searchTerm="";isLoading=!1;sortDirection={};ngOnInit(){this.loadCases()}async loadCases(){this.isLoading=!0,this.cdr.detectChanges();try{this.allCases=await this.caseService.getCases(),this.filteredCases=[...this.allCases],this.cdr.detectChanges()}catch(t){console.error("Error loading cases:",t)}finally{this.isLoading=!1,this.cdr.detectChanges()}}filterCases(){let t=this.searchTerm.toLowerCase();this.filteredCases=this.allCases.filter(e=>(e.employee_name?.toLowerCase()??"").includes(t)||(e.category?.toLowerCase()??"").includes(t)||(e.report_status?.toLowerCase()??"").includes(t))}sort(t){let e=this.sortDirection[t]==="asc"?"desc":"asc";this.sortDirection={[t]:e},this.filteredCases.sort((a,o)=>{let l,j;return t==="employee_name"?(l=a.employee_name??"",j=o.employee_name??""):(l=a[t]??"",j=o[t]??""),l<j?e==="asc"?-1:1:l>j?e==="asc"?1:-1:0})}async deleteCase(t){if(confirm("Are you sure you want to delete this case?"))try{await this.caseService.deleteCase(t),this.loadCases()}catch(e){console.error("Error deleting case:",e),alert("Failed to delete case.")}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-case-list"]],decls:12,vars:3,consts:[["slot","end"],["routerLink","/admin/cases/new"],["name","add-outline"],["placeholder","Search cases...",3,"ngModelChange","ionChange","ngModel"],["class","ion-padding ion-text-center",4,"ngIf"],[4,"ngIf"],[1,"ion-padding","ion-text-center"],["name","crescent"],[3,"click"],["name","swap-vertical-outline"],[1,"ion-text-right"],[4,"ngFor","ngForOf"],["slot","end",3,"color"],["fill","clear",3,"routerLink"],["name","create-outline"],["fill","clear","color","danger",3,"click"],["name","trash-outline"],[1,"ion-text-center"]],template:function(e,a){e&1&&(n(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),s(3,"Cases"),i(),n(4,"ion-buttons",0)(5,"ion-button",1),p(6,"ion-icon",2),s(7," New Case "),i()()()(),n(8,"ion-content")(9,"ion-searchbar",3),h("ngModelChange",function(l){return C(a.searchTerm,l)||(a.searchTerm=l),l}),y("ionChange",function(){return a.filterCases()}),i(),I(10,Yt,4,0,"div",4)(11,Qt,18,2,"ion-list",5),i()),e&2&&(m(9),f("ngModel",a.searchTerm),m(),g("ngIf",a.isLoading),m(),g("ngIf",!a.isLoading))},dependencies:[w,U,E,F,D,W,A,z,b,De,L,O,M,B,se,T,fe,ce,q,Ce,K,H,P,R,J,$e],encapsulation:2})};function Zt(r,t){r&1&&(n(0,"div",5)(1,"p"),s(2,"Loading case details..."),i(),p(3,"ion-spinner",6),i())}function Xt(r,t){if(r&1&&(n(0,"ion-select-option",22),s(1),i()),r&2){let e=t.$implicit;g("value",e.id),m(),ze(" ",e.last_name,", ",e.first_name," (",e.passport_number,") ")}}function $t(r,t){if(r&1){let e=k();n(0,"form",7),y("ngSubmit",function(){d(e);let o=c();return u(o.saveCase())}),n(1,"ion-list",8)(2,"ion-item")(3,"ion-select",9),h("ngModelChange",function(o){d(e);let l=c();return C(l.caseItem.employee_id,o)||(l.caseItem.employee_id=o),u(o)}),n(4,"ion-select-option",10),s(5,"Select an Employee"),i(),I(6,Xt,2,4,"ion-select-option",11),i()(),n(7,"ion-item")(8,"ion-input",12),h("ngModelChange",function(o){d(e);let l=c();return C(l.caseItem.category,o)||(l.caseItem.category=o),u(o)}),i()(),n(9,"ion-item")(10,"ion-textarea",13),h("ngModelChange",function(o){d(e);let l=c();return C(l.caseItem.report,o)||(l.caseItem.report=o),u(o)}),i()(),n(11,"ion-item")(12,"ion-select",14),h("ngModelChange",function(o){d(e);let l=c();return C(l.caseItem.report_status,o)||(l.caseItem.report_status=o),u(o)}),n(13,"ion-select-option",15),s(14,"Open"),i(),n(15,"ion-select-option",16),s(16,"Closed"),i(),n(17,"ion-select-option",17),s(18,"Pending"),i()()(),n(19,"ion-item")(20,"ion-input",18),h("ngModelChange",function(o){d(e);let l=c();return C(l.caseItem.agency_id,o)||(l.caseItem.agency_id=o),u(o)}),i()()(),n(21,"div",19)(22,"ion-button",20),y("click",function(){d(e);let o=c();return u(o.router.navigate(["/admin/cases"]))}),s(23,"Cancel"),i(),n(24,"ion-button",21),s(25),i()()()}if(r&2){let e=c();m(3),f("ngModel",e.caseItem.employee_id),m(),g("value",null),m(2),g("ngForOf",e.applicants),m(2),f("ngModel",e.caseItem.category),m(2),f("ngModel",e.caseItem.report),m(2),f("ngModel",e.caseItem.report_status),m(8),f("ngModel",e.caseItem.agency_id),m(5),S(e.isEditMode?"Update Case":"Create Case")}}var Me=class r{caseService=_(we);applicantService=_(Z);route=_(te);router=_(G);cdr=_(N);caseItem={report_status:"open"};applicants=[];isEditMode=!1;isLoading=!1;async ngOnInit(){this.isLoading=!0,this.cdr.detectChanges();try{await this.loadApplicants(),this.route.paramMap.subscribe(async t=>{let e=t.get("id");e&&(this.isEditMode=!0,await this.loadCase(+e)),this.isLoading=!1,this.cdr.detectChanges()})}catch(t){console.error("Error during initialization:",t),this.isLoading=!1,this.cdr.detectChanges()}}async loadApplicants(){try{this.applicants=await this.applicantService.getApplicants()}catch(t){console.error("Error loading applicants:",t)}}async loadCase(t){try{let e=await this.caseService.getCaseById(t);e?this.caseItem=e:(console.error("Case not found"),this.router.navigate(["/admin/cases"]))}catch(e){console.error("Error loading case:",e)}}async saveCase(){try{this.isEditMode?await this.caseService.updateCase(this.caseItem):await this.caseService.createCase(this.caseItem),this.router.navigate(["/admin/cases"])}catch(t){console.error("Error saving case:",t),alert("Failed to save case.")}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-case-form"]],decls:11,vars:3,consts:[["slot","start"],["defaultHref","/admin/cases"],[1,"ion-padding"],["class","ion-text-center ion-padding",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[1,"ion-text-center","ion-padding"],["name","crescent"],[3,"ngSubmit"],["lines","full"],["label","Employee","name","employee_id","required","",3,"ngModelChange","ngModel"],["disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["label","Category","type","text","name","category","required","",3,"ngModelChange","ngModel"],["label","Report","rows","5","name","report","required","",3,"ngModelChange","ngModel"],["label","Status","name","report_status","required","",3,"ngModelChange","ngModel"],["value","open"],["value","closed"],["value","pending"],["label","Agency ID (Optional)","type","number","name","agency_id",3,"ngModelChange","ngModel"],[1,"ion-padding-top","ion-text-right"],["fill","clear",3,"click"],["type","submit"],[3,"value"]],template:function(e,a){e&1&&(n(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),p(3,"ion-back-button",1),i(),n(4,"ion-title"),s(5),i()()(),n(6,"ion-content",2)(7,"ion-card")(8,"ion-card-content"),I(9,Zt,4,0,"div",3)(10,$t,26,8,"form",4),i()()()),e&2&&(m(5),S(a.isEditMode?"Edit Case":"New Case"),m(4),g("ngIf",a.isLoading),m(),g("ngIf",!a.isLoading))},dependencies:[w,U,E,F,oe,D,ie,ae,W,ne,b,L,O,re,le,M,B,me,T,q,Re,Oe,K,he,H,P,Ve,Ne,R,ye],encapsulation:2})};var ei=r=>["/admin/fras/edit",r];function ti(r,t){r&1&&(n(0,"div",6)(1,"p"),s(2,"Loading FRAs..."),i(),p(3,"ion-spinner",7),i())}function ii(r,t){if(r&1){let e=k();n(0,"ion-item")(1,"ion-label")(2,"h2"),s(3),i(),n(4,"p"),s(5),i(),n(6,"p"),s(7),i()(),n(8,"ion-buttons",0)(9,"ion-button",12),p(10,"ion-icon",13),i(),n(11,"ion-button",14),y("click",function(){let o=d(e).$implicit,l=c(2);return u(l.deleteFra(o.id))}),p(12,"ion-icon",15),i()()()}if(r&2){let e=t.$implicit;m(3),S(e.name),m(2),S(e.contact),m(2),S(e.country),m(2),g("routerLink",ee(4,ei,e.id))}}function ni(r,t){r&1&&(n(0,"ion-item")(1,"ion-label",16),s(2,"No FRAs found."),i()())}function oi(r,t){if(r&1){let e=k();n(0,"ion-list")(1,"ion-item-divider")(2,"ion-label",8),y("click",function(){d(e);let o=c();return u(o.sort("name"))}),s(3,"Name "),p(4,"ion-icon",9),i(),n(5,"ion-label",8),y("click",function(){d(e);let o=c();return u(o.sort("contact"))}),s(6,"Contact "),p(7,"ion-icon",9),i(),n(8,"ion-label",8),y("click",function(){d(e);let o=c();return u(o.sort("country"))}),s(9,"Country "),p(10,"ion-icon",9),i(),n(11,"ion-label",10),s(12,"Actions"),i()(),I(13,ii,13,6,"ion-item",11)(14,ni,3,0,"ion-item",5),i()}if(r&2){let e=c();m(13),g("ngForOf",e.filteredFras),m(),g("ngIf",!e.filteredFras||e.filteredFras.length===0)}}var Pe=class r{fraService=_(pe);cdr=_(N);allFras=[];filteredFras=[];searchTerm="";isLoading=!1;sortDirection={};ngOnInit(){this.loadFras()}async loadFras(){this.isLoading=!0,this.cdr.detectChanges();try{this.allFras=await this.fraService.getFras(),this.filterFras(),this.cdr.detectChanges()}catch(t){console.error("Error loading FRAs:",t)}finally{this.isLoading=!1,this.cdr.detectChanges()}}filterFras(){let t=this.searchTerm.toLowerCase();this.filteredFras=this.allFras.filter(e=>(e.name?.toLowerCase()??"").includes(t)||(e.contact?.toLowerCase()??"").includes(t)||(e.country?.toLowerCase()??"").includes(t))}sort(t){let e=this.sortDirection[t]==="asc"?"desc":"asc";this.sortDirection={[t]:e},this.filteredFras.sort((a,o)=>{let l=a[t]??"",j=o[t]??"";return l<j?e==="asc"?-1:1:l>j?e==="asc"?1:-1:0})}async deleteFra(t){if(confirm("Are you sure you want to delete this FRA?"))try{await this.fraService.deleteFra(t),this.loadFras()}catch(e){console.error("Error deleting FRA:",e),alert("Failed to delete FRA.")}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-fra-list"]],decls:12,vars:3,consts:[["slot","end"],["routerLink","/admin/fras/new"],["name","add-outline"],["placeholder","Search FRAs...",3,"ngModelChange","ionChange","ngModel"],["class","ion-padding ion-text-center",4,"ngIf"],[4,"ngIf"],[1,"ion-padding","ion-text-center"],["name","crescent"],[3,"click"],["name","swap-vertical-outline"],[1,"ion-text-right"],[4,"ngFor","ngForOf"],["fill","clear",3,"routerLink"],["name","create-outline"],["fill","clear","color","danger",3,"click"],["name","trash-outline"],[1,"ion-text-center"]],template:function(e,a){e&1&&(n(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),s(3,"Foreign Recruitment Agencies"),i(),n(4,"ion-buttons",0)(5,"ion-button",1),p(6,"ion-icon",2),s(7," New FRA "),i()()()(),n(8,"ion-content")(9,"ion-searchbar",3),h("ngModelChange",function(l){return C(a.searchTerm,l)||(a.searchTerm=l),l}),y("ionChange",function(){return a.filterFras()}),i(),I(10,ti,4,0,"div",4)(11,oi,15,2,"ion-list",5),i()),e&2&&(m(9),f("ngModel",a.searchTerm),m(),g("ngIf",a.isLoading),m(),g("ngIf",!a.isLoading))},dependencies:[w,U,E,F,D,W,A,z,b,L,O,M,B,se,T,fe,ce,q,Ce,K,H,P,R,J],encapsulation:2})};function ai(r,t){r&1&&(n(0,"div",5)(1,"p"),s(2,"Loading FRA data..."),i(),p(3,"ion-spinner",6),i())}function ri(r,t){if(r&1){let e=k();n(0,"form",7),y("ngSubmit",function(){d(e);let o=c();return u(o.saveFra())}),n(1,"ion-list",8)(2,"ion-item")(3,"ion-input",9),h("ngModelChange",function(o){d(e);let l=c();return C(l.fra.name,o)||(l.fra.name=o),u(o)}),i()(),n(4,"ion-item")(5,"ion-input",10),h("ngModelChange",function(o){d(e);let l=c();return C(l.fra.contact,o)||(l.fra.contact=o),u(o)}),i()(),n(6,"ion-item")(7,"ion-textarea",11),h("ngModelChange",function(o){d(e);let l=c();return C(l.fra.address,o)||(l.fra.address=o),u(o)}),i()(),n(8,"ion-item")(9,"ion-input",12),h("ngModelChange",function(o){d(e);let l=c();return C(l.fra.country,o)||(l.fra.country=o),u(o)}),i()(),n(10,"ion-item")(11,"ion-input",13),h("ngModelChange",function(o){d(e);let l=c();return C(l.fra.agency_id,o)||(l.fra.agency_id=o),u(o)}),i()()(),n(12,"div",14)(13,"ion-button",15),y("click",function(){d(e);let o=c();return u(o.router.navigate(["/admin/fras"]))}),s(14,"Cancel"),i(),n(15,"ion-button",16),s(16),i()()()}if(r&2){let e=c();m(3),f("ngModel",e.fra.name),m(2),f("ngModel",e.fra.contact),m(2),f("ngModel",e.fra.address),m(2),f("ngModel",e.fra.country),m(2),f("ngModel",e.fra.agency_id),m(5),S(e.isEditMode?"Update FRA":"Create FRA")}}var Ee=class r{fraService=_(pe);router=_(G);route=_(te);cdr=_(N);fra={};isEditMode=!1;fraId=null;isLoading=!1;ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&(this.isEditMode=!0,this.fraId=+t,this.loadFraData(this.fraId))}async loadFraData(t){this.isLoading=!0,this.cdr.detectChanges();try{let e=await this.fraService.getFraById(t);e?(this.fra=e,this.cdr.detectChanges()):this.router.navigate(["/admin/fras"])}catch(e){console.error("Error loading FRA data:",e)}finally{this.isLoading=!1,this.cdr.detectChanges()}}async saveFra(){try{this.isEditMode&&this.fraId?await this.fraService.updateFra(ue(de({},this.fra),{id:this.fraId})):await this.fraService.createFra(this.fra),this.router.navigate(["/admin/fras"])}catch(t){console.error("Error saving FRA:",t),alert("Failed to save FRA.")}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=v({type:r,selectors:[["app-fra-form"]],decls:11,vars:3,consts:[["slot","start"],["defaultHref","/admin/fras"],[1,"ion-padding"],["class","ion-text-center ion-padding",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[1,"ion-text-center","ion-padding"],["name","crescent"],[3,"ngSubmit"],["lines","full"],["label","Name","type","text","name","name","required","",3,"ngModelChange","ngModel"],["label","Contact Person","type","text","name","contact","required","",3,"ngModelChange","ngModel"],["label","Address","rows","3","name","address","required","",3,"ngModelChange","ngModel"],["label","Country","type","text","name","country","required","",3,"ngModelChange","ngModel"],["label","Agency ID","type","number","name","agency_id",3,"ngModelChange","ngModel"],[1,"ion-padding-top","ion-text-right"],["fill","clear",3,"click"],["type","submit"]],template:function(e,a){e&1&&(n(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",0),p(3,"ion-back-button",1),i(),n(4,"ion-title"),s(5),i()()(),n(6,"ion-content",2)(7,"ion-card")(8,"ion-card-content"),I(9,ai,4,0,"div",3)(10,ri,17,6,"form",4),i()()()),e&2&&(m(5),S(a.isEditMode?"Edit FRA":"Add New FRA"),m(4),g("ngIf",a.isLoading),m(),g("ngIf",!a.isLoading))},dependencies:[w,E,F,oe,D,ie,ae,W,ne,A,b,L,O,re,le,M,B,me,T,q,K,he,H,P,Ve,R,ye],encapsulation:2})};var Tt=(r,t)=>{let e=_(G);return localStorage.getItem("admin_auth_token")?!0:(e.navigate(["/admin/login"]),!1)};var li=[{path:"login",component:Ae},{path:"",component:Fe,canActivate:[Tt],children:[{path:"dashboard",component:Le},{path:"applicants",component:be},{path:"applicants/status/:status",component:be},{path:"applicants/new",component:ve},{path:"applicants/edit/:id",component:ve},{path:"cases",component:Te},{path:"cases/new",component:Me},{path:"cases/edit/:id",component:Me},{path:"fras",component:Pe},{path:"fras/new",component:Ee},{path:"fras/edit/:id",component:Ee},{path:"",redirectTo:"dashboard",pathMatch:"full"}]}],Pt=class r{static \u0275fac=function(e){return new(e||r)};static \u0275mod=Ge({type:r});static \u0275inj=He({imports:[w,F,b,A.forChild(li),Ae,Fe,Le,be,ve,Te,Me,Pe,Ee,Ie]})};export{li as ADMIN_ROUTES,Pt as AdminModule};
